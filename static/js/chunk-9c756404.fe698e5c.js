(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c756404","chunk-5ee0ad49","chunk-177812f8","chunk-fbd18dce"],{"58bd":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.ShowAdd,callback:function(e){t.ShowAdd=e},expression:"ShowAdd"}},[o("div",{staticClass:"addAttrWrap"},[o("el-input",{attrs:{size:"mini",width:"100px",placeholder:"请输入规格名称"},model:{value:t.attr_item.attr_name,callback:function(e){t.$set(t.attr_item,"attr_name",e)},expression:"attr_item.attr_name"}}),o("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.addAttrItem}},[t._v("添加")])],1),o("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[t._v("添加认证")])],1),o("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.attr,border:""}},[o("el-table-column",{attrs:{prop:"attr_name",label:"规格名称",width:"200"}}),o("el-table-column",{attrs:{prop:"attr_value",label:"规格值"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.values,function(r,a){return o("el-tag",{key:r.attr_value,staticClass:"tag",attrs:{name:r.attr_value,"disable-transitions":!0,closable:""},on:{click:function(o){return t.editAttrValue(r,e.$index,a)},close:function(o){return t.delAttrValue(e.$index,a)}}},[t._v("\n          "+t._s(r.attr_value)+"\n        ")])})}}])}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(o){return t.addAttrDialog(e.$index)}}},[t._v("增加")]),o("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(o){return t.delAttr(e.$index)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{"append-to-body":"",title:"属性值",visible:t.addAttrValueShow,width:"30%"},on:{"update:visible":function(e){t.addAttrValueShow=e},closed:t.closed}},[o("el-form",{ref:"addAttrValueData",attrs:{"label-width":"auto",model:t.attr_value,rules:t.rules}},[o("el-form-item",{attrs:{label:"规格值",prop:"attr_value"}},[o("el-input",{model:{value:t.attr_value.attr_value,callback:function(e){t.$set(t.attr_value,"attr_value",e)},expression:"attr_value.attr_value"}})],1),o("el-form-item",{attrs:{label:"图片",prop:"attr_img"}},[o("div",{staticClass:"avatar-uploader",on:{click:t.selectPic}},[t.attr_value.min_img||t.attr_value.attr_img?o("BaseElImage",{attrs:{custom_class:"avatar",custom_src:t.attr_value.min_img||t.attr_value.attr_img,fit:"cover"}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)])],1),o("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getPic}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addAttrValueShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.setAttrValue}},[t._v("确 定")])],1)],1)],1)},a=[],n=(o("ac6a"),o("cebc")),i=o("0bba"),s={components:{PictureLibrary:i["a"]},props:{attr:{type:[Array,String],required:!0,default:function(){return[]}}},data:function(){return{ShowAdd:!1,addAttrValueShow:!1,data:[],rowIndex:"",rowIdx:"",attr_item:{attr_name:"",values:[]},attr_value:{attr_value:"",attr_img:"",min_img:""},rules:{attr_value:[{required:!0,message:"请输入规格值",trigger:"blur"}]}}},methods:{closed:function(){this.rowIndex="",this.rowIdx="",this.attr_value.min_img="",this.attr_value.attr_img="",this.attr_value.attr_value=""},addAttrItem:function(){this.attr_item.attr_name&&(this.attr.push(Object(n["a"])({},this.attr_item)),this.attr_item={attr_name:"",values:[]},this.ShowAdd=!1,this.updateAttr())},addAttrDialog:function(t){this.rowIndex=t,this.addAttrValueShow=!0},editAttrValue:function(t,e,o){this.attr_value=Object(n["a"])({},t),this.rowIndex=e,this.rowIdx=o,this.addAttrValueShow=!0},selectPic:function(){this.$refs.pic.open()},getPic:function(t){this.attr_value.attr_img=t.src_file,this.attr_value.min_img=t.min_file},setAttrValue:function(){var t=!1;if(this.$refs["addAttrValueData"].validate(function(e){t=e}),t){var e=this.attr_value,o=e.attr_value,r=e.attr_img;"string"==typeof this.rowIdx?this.attr[this.rowIndex].values.push({attr_value:o,attr_img:r}):this.$set(this.attr[this.rowIndex].values,this.rowIdx,{attr_value:o,attr_img:r}),this.updateAttr(),this.addAttrValueShow=!1}},delAttr:function(t){this.attr.splice(t,1),this.updateAttr()},delAttrValue:function(t,e){this.attr[t].values.splice(e,1),this.updateAttr()},updateAttr:function(){this.$emit("update:attr",this.attr)}}},u=s,l=(o("c386"),o("2877")),d=Object(l["a"])(u,r,a,!1,null,"6433474a",null);e["default"]=d.exports},"67a7":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"重置属性",visible:t.show,width:"70%"},on:{"update:visible":function(e){t.show=e}}},[o("div",[o("formAttr",{attrs:{attr:t.data.attrs},on:{"update:attr":function(e){return t.$set(t.data,"attrs",e)}}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])},a=[],n=(o("ac6a"),o("7f80")),i=o("c40e"),s={components:{formAttr:n["default"]},data:function(){return{data:{},show:!1}},methods:{open:function(t){this.data=t,this.show=!0},submit:function(){var t=this,e=this.data,o=e.attrs,r=e.goods_id;o.forEach(function(e){if(!e||0==e.values.length)throw t.$message({message:"规格名称 ".concat(e.attr_name," ，缺少规格值"),type:"warning"}),"规格名称 ".concat(e.attr_name," ，缺少规格值");delete e.attr_id,delete e.create_time,delete e.goods_id,e.values.forEach(function(t){delete t.attr_id,delete t.attr_value_id,delete t.create_time})}),o=JSON.stringify(o),Object(i["i"])({attrs:o,goods_id:r}).then(function(e){0==e.code&&(t.$message({message:"重置成功",type:"success"}),t.show=!1,t.$parent.refresh())})}}},u=s,l=o("2877"),d=Object(l["a"])(u,r,a,!1,null,"7c2ff093",null);e["default"]=d.exports},"7f80":function(t,e,o){"use strict";o.r(e);var r=o("58bd");e["default"]=r["default"]},c386:function(t,e,o){"use strict";var r=o("cf11"),a=o.n(r);a.a},c40e:function(t,e,o){"use strict";o.d(e,"p",function(){return n}),o.d(e,"m",function(){return i}),o.d(e,"k",function(){return s}),o.d(e,"n",function(){return u}),o.d(e,"l",function(){return l}),o.d(e,"h",function(){return d}),o.d(e,"o",function(){return c}),o.d(e,"q",function(){return g}),o.d(e,"j",function(){return p}),o.d(e,"i",function(){return f}),o.d(e,"t",function(){return v}),o.d(e,"s",function(){return h}),o.d(e,"r",function(){return m}),o.d(e,"u",function(){return _}),o.d(e,"g",function(){return b}),o.d(e,"v",function(){return w}),o.d(e,"w",function(){return A}),o.d(e,"d",function(){return y}),o.d(e,"e",function(){return k}),o.d(e,"a",function(){return S}),o.d(e,"b",function(){return x}),o.d(e,"c",function(){return $}),o.d(e,"f",function(){return L});var r=o("365c"),a={goodsGroupList:"groupList",goodsGroupAdd:"groupAdd",goodsGroupMod:"groupMod",goodsGroupDel:"groupDel",goodsGroupTree:"groupTree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList"};function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsList,t,"gm/goods")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsGroupList,t,"gm/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsGroupAdd,t,"gm/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsGroupMod,t,"gm/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsGroupDel,t,"gm/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsAdd,t,"gm/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsGroupTree,t,"gm/goods")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsMod,t,"gm/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsDel,t,"gm/goods")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsAttrSet,t,"gm/goods")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsSkuSet,t,"gm/goods")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsSkuGet,t,"gm/goods")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsRun,t,"gm/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.goodsStop,t,"gm/goods")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(a.topList,t,"gm/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(a.setTop,t,"gm/goods")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(a.topCancel,t,"gm/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.applyList,t,"gm/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.applyPool,t,"gm/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.applyCalc,t,"gm/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.applyPut,t,"gm/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.fixPut,t,"gm/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(a.fixList,t,"gm/goods")}},c6aa:function(t,e,o){"use strict";o.r(e);var r=o("67a7");e["default"]=r["default"]},cf11:function(t,e,o){}}]);