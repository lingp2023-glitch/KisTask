(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65ee155c"],{"763c":function(t,e,s){"use strict";var o=s("a429"),i=s.n(o);i.a},a429:function(t,e,s){},f0a9:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addGoods"},[s("el-dialog",{attrs:{title:"增购商品",visible:t.show,top:"20px",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"goodsList"},t._l(t.goodsList,(function(e,o){return s("div",{key:o,staticClass:"goodsItem",class:{activeGoods:e.goods_id==t.activedId},on:{click:function(s){return t.selectGoods(e.goods_id)}}},[s("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.cover}}),s("div",{staticClass:"goodsInfo"},[s("div",[t._v("\n                  "+t._s(e.goods_name)+"\n                  "),s("span",{style:{color:1==e.is_run?"#55aaff":"#777"}},[t._v(t._s(1==e.is_run?"已上线":"未上线"))])]),s("div",[t._v("\n                  ￥"+t._s(t._f("formatMoney")(e.sale_price))+"\n                ")])])],1)})),0)]),s("el-col",{directives:[{name:"show",rawName:"v-show",value:t.activedId,expression:"activedId"}],attrs:{span:12}},[s("div",{staticClass:"attrsList"},t._l(t.attrsList,(function(e,o){return s("div",{key:o,staticClass:"attrsItem"},[s("div",{staticClass:"attrsTitle"},[t._v("\n              "+t._s(e.attr_name)+"\n            ")]),s("div",{staticClass:"attrsValue"},t._l(e.values,(function(e,i){return s("div",{key:i,staticClass:"valueItem",class:e.attr_value_id==(t.selectAttrs[o]?t.selectAttrs[o].attr_value_id:"")?"activeAttr":"",on:{click:function(e){return t.selectAttr(o,i)}}},[t._v("\n                "+t._s(e.attr_value)+"\n              ")])})),0)])})),0),s("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",rules:t.rules,model:t.append_data,"label-width":"auto"}},[s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入姓名"},model:{value:t.append_data.name,callback:function(e){t.$set(t.append_data,"name",e)},expression:"append_data.name"}})],1),s("el-form-item",{attrs:{label:"性别",prop:"gender"}},[s("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.append_data.gender,callback:function(e){t.$set(t.append_data,"gender",e)},expression:"append_data.gender"}},t._l(t.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[s("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入联系手机"},model:{value:t.append_data.phone,callback:function(e){t.$set(t.append_data,"phone",e)},expression:"append_data.phone"}})],1),s("el-form-item",{attrs:{label:"订单状态"}},[s("el-radio-group",{model:{value:t.order_status,callback:function(e){t.order_status=e},expression:"order_status"}},[s("el-radio",{attrs:{label:1}},[t._v("待服务")]),s("el-radio",{attrs:{label:2}},[t._v("已完成")])],1)],1)],1),s("div",{staticClass:"cell"},[s("div",[t._v("单价：")]),s("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price:0))+"\n          ")])]),s("div",{staticClass:"cell"},[s("div",[t._v("总价：")]),s("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price*t.num:0))+"\n          ")])])],1)],1),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closed}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},i=[],r=(s("ac6a"),s("f8b7")),n={data:function(){return{show:!1,goodsList:[],goodsObj:{},shop_id:"",work_id:"",num:1,append_data:{name:"",gender:"",phone:""},order_status:1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],phone:[{required:!0,message:"请输入联系手机",trigger:"blur"}]},options:[{value:"1",label:"男"},{value:"0",label:"女"}],activedId:"",selectAttrs:[],hasSelect:[],attrs:[],skuMap:{}}},watch:{activedId:function(){var t=this;console.log(this.goodsObj[this.activedId]),this.num=1,this.skuMap={},this.goodsObj[this.activedId].sku.map((function(e,s){t.skuMap[e.attr_value_items]=e}))}},components:{},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{goods_sku:function(){if(console.log(this.selectAll),this.selectAll){var t=this.selectAttrs.map((function(t){return t?t.attr_value_id:""}));return this.skuMap[JSON.stringify(t)]}return this.goodsObj[this.activedId]},attrsList:function(){return this.activedId?this.goodsObj[this.activedId].attrs:[]},selectAll:function(){var t=!0;return this.hasSelect.map((function(e,s){-1==e&&(t=!1)})),t},tipText:function(){for(var t="",e=0;e<this.hasSelect.length;e++){var s=this.hasSelect[e];if(-1==s){t=this.attrs[e].attr_name;break}}return t}},methods:{submit:function(){var t=this;this.selectAll?this.$refs.form.validate((function(e){if(e){var s=[];t.selectAttrs.map((function(t,e){s.push(t.attr_value_id)})),Object(r["n"])({work_id:t.work_id,shop_id:t.shop_id,goods_id:t.activedId,attrs:JSON.stringify(s),append_data:JSON.stringify(t.append_data),order_status:t.order_status}).then((function(e){0==e.code&&(t.$message({message:"补单成功",type:"success"}),t.show=!1,t.$parent.refresh())}))}})):this.$message({message:"请选择".concat(this.tipText),type:"error"})},selectAttr:function(t,e){JSON.stringify(this.selectAttrs[t])==JSON.stringify(this.attrs[t].values[e])?(this.$set(this.selectAttrs,t,void 0),this.$set(this.hasSelect,t,-1)):(this.$set(this.selectAttrs,t,this.attrs[t].values[e]),this.$set(this.hasSelect,t,e))},selectGoods:function(t){var e=this;this.activedId=t,this.attrs=[],this.selectAttrs=[],this.attrs=this.goodsObj[this.activedId].attrs,this.hasSelect=[],this.attrs.map((function(t,s){e.hasSelect.push(-1)}))},getOGoodsList:function(){var t=this;Object(r["g"])().then((function(e){console.log(e,1),t.goodsList=e.data,t.goodsList.map((function(e,s){t.goodsObj[e.goods_id]=e})),console.log(t.goodsObj)}))},open:function(t,e){this.show=!0,this.shop_id=t,this.work_id=e,this.getOGoodsList()},closed:function(){this.activedId="",this.goodsObj={},this.shop_id="",this.work_id="",this.selectAttrs=[],this.attrs=[],this.hasSelect=[],this.show=!1,this.append_data={name:"",gender:"",phone:""},this.order_status=1,this.$refs["form"].clearValidate()}}},a=n,d=(s("763c"),s("2877")),l=Object(d["a"])(a,o,i,!1,null,"750ae2f6",null);e["default"]=l.exports},f8b7:function(t,e,s){"use strict";s.d(e,"i",(function(){return r})),s.d(e,"h",(function(){return n})),s.d(e,"b",(function(){return a})),s.d(e,"m",(function(){return d})),s.d(e,"o",(function(){return l})),s.d(e,"e",(function(){return c})),s.d(e,"c",(function(){return u})),s.d(e,"g",(function(){return p})),s.d(e,"k",(function(){return h})),s.d(e,"l",(function(){return f})),s.d(e,"d",(function(){return v})),s.d(e,"f",(function(){return g})),s.d(e,"n",(function(){return _})),s.d(e,"p",(function(){return m})),s.d(e,"a",(function(){return b})),s.d(e,"j",(function(){return k})),s.d(e,"q",(function(){return w}));var o=s("365c"),i={list:"list",setAddress:"setAddress",getShipComs:"getShipComs",setShip:"setShip",getOrderInfo:"info",contactMod:"contactMod",noticeMod:"noticeMod",priceReduce:"reduce",priceCredit:"credit",getCreditList:"creditList",creditDel:"creditDel",getOGoodsList:"goodsList",goodsAdd:"goodsAdd",goodsDel:"goodsDel",finishOrder:"finish",listWork:"listWork",orderAdd:"add",reBook:"reBook",cancelOrder:"cancel",getShipList:"express",setShiping:"setShiping"};function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.list,t,"api/order")}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getOrderInfo,t,"api/order")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.contactMod,t,"api/order")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.noticeMod,t,"api/order")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.priceCredit,t,"api/order")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getCreditList,t,"api/order")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.creditDel,t,"api/order")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getOGoodsList,t,"api/order")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.goodsAdd,t,"api/order")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.goodsDel,t,"api/order")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.finishOrder,t,"api/order")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.listWork,t,"api/order")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.orderAdd,t,"api/order")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.reBook,t,"api/order")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.cancelOrder,t,"api/order")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getShipList,t,"api/order")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.setShiping,t,"api/order")}}}]);