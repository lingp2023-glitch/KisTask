(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d415071","chunk-701e176e"],{"24d2":function(e,t,r){"use strict";r.d(t,"g",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"i",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return f})),r.d(t,"a",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"l",(function(){return v})),r.d(t,"b",(function(){return h}));var o=r("365c"),i={addProject:"add",editProject:"mod",getProjectList:"list",delProject:"del",flowStautsMod:"flowStautsMod",flowStatus:"flowStatus",flowActions:"flowActions",flowActionMod:"flowActionMod",flowInfo:"flowInfo",flowMod:"flowMod",flowAdd:"flowAdd",flowDel:"flowDel"};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowDel,e,"api/project")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowAdd,e,"api/project")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowMod,e,"api/project")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowInfo,e,"api/project")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowActionMod,e,"api/project")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowActions,e,"api/project")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowStatus,e,"api/project")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.flowStautsMod,e,"api/project")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addProject,e,"api/project")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.editProject,e,"api/project")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getProjectList,e,"api/project")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delProject,e,"api/project")}},2517:function(e,t,r){},2760:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"issuec_reate"},[r("div",{staticClass:"className"},[r("el-card",{staticClass:"anoCard"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("新建事务")])]),r("div",{staticClass:"formBox"},[r("div",[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),r("u-e",{ref:"quill",staticClass:"introClass",on:{senHtml:e.getHtml}}),r("div",{staticClass:"controlBottom"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提 交")])],1)],1),r("div",{staticClass:"boxRight"},[r("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"所属项目",prop:"priority"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属项目"},on:{change:e.changProjectId},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.projectList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择优先级"},on:{change:e.changPriority},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}},e._l(e.priorityList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"严重程度",prop:"severity"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择严重程度"},on:{change:e.changSeverity},model:{value:e.form.severity,callback:function(t){e.$set(e.form,"severity",t)},expression:"form.severity"}},e._l(e.severityList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"处理人",prop:"workers"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",disabled:!e.form.project_id,placeholder:e.form.project_id?"搜索选择处理人":"请先选择项目","remote-method":e.queryWorker,loading:e.loadingWorker},on:{change:e.changWorker},model:{value:e.form.workers,callback:function(t){e.$set(e.form,"workers",t)},expression:"form.workers"}},e._l(e.workersList,(function(e){return r("el-option",{key:e.userid,attrs:{label:e.name,value:e.userid}})})),1)],1),r("el-form-item",{attrs:{label:"开始时间",prop:"btime"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择开始日期时间"},model:{value:e.form.btime,callback:function(t){e.$set(e.form,"btime",t)},expression:"form.btime"}})],1),r("el-form-item",{attrs:{label:"结束时间",prop:"etime"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择结束日期时间"},model:{value:e.form.etime,callback:function(t){e.$set(e.form,"etime",t)},expression:"form.etime"}})],1)],1)],1)])])],1)])},i=[],n=r("cf2d"),a=r("5132"),s=r("24d2"),l={data:function(){return{form:{title:"",content:"",project_id:"",severity:"",priority:"",workers:[],btime:"",etime:""},rules:{project_id:[{required:!0,message:"请选择所属项目",trigger:"blur"}],severity:[{required:!0,message:"请选择优先级",trigger:"blur"}],priority:[{required:!0,message:"请选择严重程度",trigger:"blur"}],workers:[{required:!0,message:"搜索选择处理人",trigger:"blur"}],btime:[{required:!0,message:"选择开始日期时间",trigger:"blur"}],etime:[{required:!0,message:"选择结束日期时间",trigger:"blur"}]},severityList:[{name:"致命",value:0},{name:"严重",value:1},{name:"一般",value:2},{name:"提示",value:3},{name:"建议",value:4}],priorityList:[{name:"High",value:0},{name:"Middle",value:1},{name:"Low",value:2},{name:"NicetoHave",value:3}],projectList:[],loadingWorker:!1,workersList:[]}},components:{UE:n["a"]},filters:{},created:function(){this.getProjectList()},onShow:function(){},mounted:function(){},computed:{},methods:{queryWorker:function(e){var t=this;this.loading=!0,Object(a["d"])({query_str:e,project_id:this.form.project_id}).then((function(e){0==e.code&&(t.workersList=e.data)}))},getProjectList:function(){var e=this;Object(s["l"])().then((function(t){0==t.code&&(e.projectList=t.data.list,console.log(e.projectList))}))},submit:function(){var e=this;this.form.title?this.form.content?this.$refs["form"].validate((function(t){if(t){var r=JSON.parse(JSON.stringify(e.form));r.workers=JSON.stringify(r.workers),Object(a["a"])(r).then((function(t){0==t.code&&(e.$message({message:"提交成功",duration:3e3,type:"success"}),e.form={title:"",content:"",severity:"",priority:"",workers:[],btime:"",etime:""},e.$refs.quill.setContent(""),e.$refs["form"].clearValidate())}))}})):this.$message({message:"请输入内容",type:"error"}):this.$message({message:"请输入标题",type:"error"})},getHtml:function(e){this.form.content=e},changPriority:function(){this.$refs["form"].validateField("priority")},changSeverity:function(){this.$refs["form"].validateField("severity")},changProjectId:function(){this.form.workers=[],this.queryWorker(),this.$refs["form"].validateField("project_id")},changWorker:function(){this.$refs["form"].validateField("workers")}}},u=l,c=(r("e467"),r("2877")),d=Object(c["a"])(u,o,i,!1,null,"0075f53e",null);t["default"]=d.exports},5132:function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return u}));var o=r("365c"),i={addIssue:"add",issueList:"list",queryWorker:"queryWorker",issueInfo:"info",submitIssue:"submit"};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.submitIssue,e,"api/issue")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.issueInfo,e,"api/issue")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.queryWorker,e,"api/issue")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addIssue,e,"api/issue")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.issueList,e,"api/issue")}},a410:function(e,t,r){"use strict";r.r(t);var o=r("2760");t["default"]=o["default"]},e467:function(e,t,r){"use strict";var o=r("2517"),i=r.n(o);i.a}}]);