(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b68130c","chunk-9a7abb14","chunk-361e2476"],{"41dd":function(t,e,o){"use strict";var r=o("4ae1"),i=o.n(r);i.a},"4ae1":function(t,e,o){},"4f6f":function(t,e,o){"use strict";o.d(e,"c",function(){return n}),o.d(e,"a",function(){return s}),o.d(e,"b",function(){return a});var r=o("365c"),i={notesList:"list",addNotes:"add",delNotes:"del"};function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.notesList,t,"api/notes")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.addNotes,t,"api/notes")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.delNotes,t,"api/notes")}},"6b76":function(t,e,o){"use strict";o.r(e);var r=o("76d4");e["default"]=r["default"]},"6f52":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addOrModNotesDia"},[o("el-dialog",{attrs:{title:"add"==t.type?"新增公告":"修改公告",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialog=e},closed:t.closedDialog}},[o("el-form",{ref:"form",attrs:{"label-width":"110px",model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入公告标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"封面",prop:"cover"}},[o("formCover",{attrs:{cover:t.form.cover},on:{"update:cover":function(e){return t.$set(t.form,"cover",e)},finishChoose:t.finishCoverChoose}})],1),o("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入公告内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),o("el-form-item",{attrs:{label:"详情链接",prop:"url"}},[o("el-input",{attrs:{placeholder:"请输入详情链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"是否置顶",prop:"is_top"}},[o("el-radio-group",{model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",e)},expression:"form.is_top"}},[o("el-radio",{attrs:{label:0}},[t._v("否")]),o("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},i=[],n=o("6b76"),s=o("4f6f"),a={data:function(){return{type:"",dialog:!1,form:{title:"",cover:"",content:"",url:"",is_top:0},rules:{title:[{required:!0,message:"请输入公告标题",trigger:["blur"]}],cover:[{required:!0,message:"请选择封面",trigger:["blur"]}],content:[{required:!0,message:"请输入公告内容",trigger:["blur"]}]}}},components:{formCover:n["default"]},activated:function(){},watch:{},created:function(){},mounted:function(){},methods:{finishCoverChoose:function(t){console.log(t),""!=this.form.cover&&this.$refs.form.validateField("cover"),this.form.cover=t},open:function(t){this.type=t,this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={title:"",cover:"",content:"",url:"",is_top:0}},submit:function(){var t=this;this.$refs["form"].validate(function(e){if(e){console.log("验证通过");var o={};o.title=t.form.title,o.cover=t.form.cover,o.content=t.form.content,""!=t.form.url&&(o.url=t.form.url),o.is_top=t.form.is_top,t.addNotes(o)}else console.log("验证失败")})},addNotes:function(t){var e=this;Object(s["a"])(t).then(function(t){0==t.code&&(e.$message({message:"新增公告成功",type:"success"}),e.$emit("refreshList")),e.dialog=!1})}}},l=a,c=(o("f930"),o("2877")),f=Object(c["a"])(l,r,i,!1,null,"58ce02c4",null);e["default"]=f.exports},"76d4":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("media-library",{ref:"mediaLibrary",attrs:{active:"1",title:"图片库"}}),t.cover?o("div",{staticClass:"img-wrap"},[o("div",{staticClass:"img-item"},[o("i",{staticClass:"el-icon-close img-close",on:{click:t.del_cover}}),o("BaseElImage",{attrs:{custom_src:t.cover,previewList:[t.cover],fit:"cover"}})],1)]):o("div",{staticClass:"img-add",on:{click:function(e){return t.$refs.mediaLibrary.open()}}},[o("i",{staticClass:"el-icon-plus img-add-icon"})])],1)},i=[],n=o("daf4"),s={components:{mediaLibrary:n["a"]},props:{cover:{type:[Object,String],default:function(){return""}}},data:function(){return{}},mounted:function(){var t=this;this.$bus.$on("finishCoverSelectMed",function(e){t.getData(e)})},beforeDestroy:function(){this.$bus.$off("finishCoverSelectMed")},methods:{getData:function(t){console.log(t),this.$emit("update:cover",t.min_file),this.$emit("finishChoose",t.src_file),this.$refs.mediaLibrary.handleClose()},del_cover:function(){this.$emit("update:cover",""),this.$emit("finishChoose","")}}},a=s,l=(o("41dd"),o("2877")),c=Object(l["a"])(a,r,i,!1,null,"41b1e49b",null);e["default"]=c.exports},"9baf":function(t,e,o){},f930:function(t,e,o){"use strict";var r=o("9baf"),i=o.n(r);i.a}}]);