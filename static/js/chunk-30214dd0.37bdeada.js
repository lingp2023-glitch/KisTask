(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30214dd0"],{"0be4":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flowchart-editor"},[o("div",{staticClass:"toolbar"},[o("div",{staticClass:"toolbar-left"},[o("button",{staticClass:"tool-btn",on:{click:t.addRectNode}},[t._v("æ·»åŠ çŸ©å½¢èŠ‚ç‚¹")]),o("button",{staticClass:"tool-btn",on:{click:t.addCircleNode}},[t._v("æ·»åŠ åœ†å½¢èŠ‚ç‚¹")]),o("button",{staticClass:"tool-btn",on:{click:t.addEdge}},[t._v("æ·»åŠ è¿æ¥çº¿")]),o("button",{staticClass:"tool-btn",on:{click:t.zoomIn}},[t._v("æ”¾å¤§")]),o("button",{staticClass:"tool-btn",on:{click:t.zoomOut}},[t._v("ç¼©å°")]),o("button",{staticClass:"tool-btn",on:{click:t.resetZoom}},[t._v("é‡ç½®ç¼©æ”¾")]),o("button",{staticClass:"tool-btn delete-btn",on:{click:t.deleteSelected}},[t._v("åˆ é™¤é€‰ä¸­")]),o("button",{staticClass:"tool-btn delete-btn",on:{click:t.clearAll}},[t._v("æ¸…ç©ºç”»å¸ƒ")]),o("button",{staticClass:"tool-btn export-btn",on:{click:t.exportData}},[t._v("å¯¼å‡ºæ•°æ®")]),o("button",{staticClass:"tool-btn import-btn",on:{click:t.importData}},[t._v("å¯¼å…¥æ•°æ®")])]),t._m(0)]),o("div",{staticClass:"editor-container"},[o("div",{ref:"container",attrs:{id:"flowchart-container"}})]),t.editModalVisible?o("div",{staticClass:"modal-overlay"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h3",[t._v("ç¼–è¾‘èŠ‚ç‚¹å†…å®¹")]),o("button",{staticClass:"close-btn",on:{click:t.cancelEdit}},[t._v("Ã—")])]),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"edit-form"},[o("div",{staticClass:"form-item"},[o("label",[t._v("èŠ‚ç‚¹æ ‡ç­¾ï¼š")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.label,expression:"editingNodeData.label"}],staticClass:"form-input",attrs:{placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹æ ‡ç­¾"},domProps:{value:t.editingNodeData.label},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"label",e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("label",[t._v("èŠ‚ç‚¹å†…å®¹ï¼š")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.content,expression:"editingNodeData.content"}],staticClass:"form-textarea",attrs:{placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹å†…å®¹",rows:"4"},domProps:{value:t.editingNodeData.content},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"content",e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("label",[t._v("èƒŒæ™¯é¢œè‰²ï¼š")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.color,expression:"editingNodeData.color"}],staticClass:"color-input",attrs:{type:"color"},domProps:{value:t.editingNodeData.color},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"color",e.target.value)}}}),o("span",{staticClass:"color-preview",style:{backgroundColor:t.editingNodeData.color}})])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-cancel",on:{click:t.cancelEdit}},[t._v("å–æ¶ˆ")]),o("button",{staticClass:"btn btn-save",on:{click:t.saveNodeContent}},[t._v("ä¿å­˜")])])])]):t._e(),t.importModalVisible?o("div",{staticClass:"modal-overlay"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h3",[t._v("å¯¼å…¥æµç¨‹å›¾æ•°æ®")]),o("button",{staticClass:"close-btn",on:{click:t.cancelImport}},[t._v("Ã—")])]),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"edit-form"},[o("div",{staticClass:"form-item"},[o("label",[t._v("JSONæ•°æ®ï¼š")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.importDataJson,expression:"importDataJson"}],staticClass:"form-textarea",attrs:{placeholder:"è¯·ç²˜è´´å¯¼å‡ºçš„JSONæ•°æ®",rows:"10"},domProps:{value:t.importDataJson},on:{input:function(e){e.target.composing||(t.importDataJson=e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("button",{staticClass:"btn btn-example",on:{click:t.loadExampleData}},[t._v("åŠ è½½ç¤ºä¾‹æ•°æ®")])])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-cancel",on:{click:t.cancelImport}},[t._v("å–æ¶ˆ")]),o("button",{staticClass:"btn btn-save",on:{click:t.confirmImport}},[t._v("å¯¼å…¥")])])])]):t._e(),o("div",{staticClass:"node-panel"},[o("div",{staticClass:"panel-header"},[o("h3",[t._v("èŠ‚ç‚¹åˆ—è¡¨ ("+t._s(t.nodes.length)+")")]),o("div",{staticClass:"panel-actions"},[o("button",{staticClass:"icon-btn",attrs:{title:"åˆ·æ–°"},on:{click:t.refreshNodeList}},[t._v("ğŸ”„")])])]),o("div",{staticClass:"node-list"},[t._l(t.nodes,(function(e){return o("div",{key:e.id,staticClass:"node-item",class:{active:t.selectedNodeId===e.id},on:{click:function(o){return t.focusNode(e.id)}}},[o("div",{staticClass:"node-preview",style:{backgroundColor:e.color}},[t._v("\n          "+t._s("custom-rect"===e.shape?"â–¢":"â—")+"\n        ")]),o("div",{staticClass:"node-info"},[o("div",{staticClass:"node-label"},[t._v(t._s(e.label||"æœªå‘½åèŠ‚ç‚¹"))]),o("div",{staticClass:"node-content"},[t._v(t._s(e.content||"æ— å†…å®¹"))]),o("div",{staticClass:"node-id"},[t._v("ID: "+t._s(e.id.substring(0,8))+"...")])]),o("div",{staticClass:"node-actions"},[o("button",{staticClass:"icon-btn",attrs:{title:"ç¼–è¾‘"},on:{click:function(o){return o.stopPropagation(),t.editNode(e.id)}}},[t._v("âœï¸")]),o("button",{staticClass:"icon-btn delete",attrs:{title:"åˆ é™¤"},on:{click:function(o){return o.stopPropagation(),t.deleteNode(e.id)}}},[t._v("ğŸ—‘ï¸")])])])})),0===t.nodes.length?o("div",{staticClass:"empty-state"},[o("div",{staticClass:"empty-icon"},[t._v("ğŸ“‹")]),o("div",{staticClass:"empty-text"},[t._v("æš‚æ— èŠ‚ç‚¹")]),o("div",{staticClass:"empty-hint"},[t._v("ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ èŠ‚ç‚¹")])]):t._e()],2),o("div",{staticClass:"panel-footer"},[o("div",{staticClass:"stats"},[o("div",{staticClass:"stat-item"},[t._v("è¿çº¿: "+t._s(t.edges.length))]),o("div",{staticClass:"stat-item"},[t._v("ç¼©æ”¾: "+t._s((100*t.zoom).toFixed(0))+"%")])])])]),o("add-or-mod-flow",{ref:"addOrModFlow"})],1)},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"toolbar-right"},[o("span",{staticClass:"hint"},[t._v("æç¤ºï¼šåŒå‡»èŠ‚ç‚¹ç¼–è¾‘å†…å®¹ï¼Œæ‹–æ‹½èŠ‚ç‚¹/è¿çº¿è°ƒæ•´ä½ç½®")])])}],s=(o("ac6a"),o("cebc")),n=o("a8db"),l=o("5728"),r=o("1388"),c={name:"FlowchartEditor",data:function(){return{graph:null,nodes:[],edges:[],selectedNodeId:null,editModalVisible:!1,importModalVisible:!1,zoom:1,editingNodeId:null,importDataJson:"",editingNodeData:{label:"",content:"",color:"#1890ff"}}},components:{addOrModFlow:r["default"]},mounted:function(){this.initGraph(),this.loadSampleData()},beforeDestroy:function(){this.graph&&this.graph.dispose()},methods:{initGraph:function(){var t=this,e=this;this.graph=new l["b"]({container:this.$refs.container,width:"100%",height:"100%",grid:{size:10,visible:!0},background:{color:"#fafafa"},panning:{enabled:!0,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:["ctrl","meta"]},connecting:{router:"manhattan",connector:"rounded",anchor:"center",connectionPoint:"boundary",allowBlank:!1,snap:{radius:20},createEdge:function(){return new l["c"].Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},labels:[{position:.5,attrs:{text:{text:"è¿æ¥çº¿"}}}],zIndex:0})},validateConnection:function(t){var e=t.targetMagnet;return!!e}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}}}),l["b"].registerNode("custom-rect",{inherit:"rect",width:140,height:60,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"rgba(24, 144, 255, 0.1)",rx:6,ry:6},label:{text:"",refX:.5,refY:.3,fontSize:14,fontWeight:"bold",fill:"#262626",textAnchor:"middle",textVerticalAnchor:"middle"},content:{text:"",refX:.5,refY:.7,fontSize:12,fill:"#595959",textAnchor:"middle",textVerticalAnchor:"middle"}},markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"content"}],propHooks:function(t){var o=t.data,a=Object(n["a"])(t,["data"]);return o?Object(s["a"])({},a,{attrs:{label:{text:o.label||"èŠ‚ç‚¹"},content:{text:o.content||"åŒå‡»ç¼–è¾‘"},body:{fill:e.hexToRgba(o.color||"#1890ff",.1),stroke:o.color||"#1890ff"}},data:o}):t},ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"top-port"},{group:"right",id:"right-port"},{group:"bottom",id:"bottom-port"},{group:"left",id:"left-port"}]}}),l["b"].registerNode("custom-circle",{inherit:"circle",width:80,height:80,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"rgba(24, 144, 255, 0.1)",refCx:"50%",refCy:"50%",refR:"50%"},label:{text:"",refX:.5,refY:.4,fontSize:12,fontWeight:"bold",fill:"#262626",textAnchor:"middle",textVerticalAnchor:"middle"},content:{text:"",refX:.5,refY:.6,fontSize:10,fill:"#595959",textAnchor:"middle",textVerticalAnchor:"middle"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"content"}],propHooks:function(t){var o=t.data,a=Object(n["a"])(t,["data"]);return o?Object(s["a"])({},a,{attrs:{label:{text:o.label||"èŠ‚ç‚¹"},content:{text:o.content||"åŒå‡»ç¼–è¾‘"},body:{fill:e.hexToRgba(o.color||"#1890ff",.1),stroke:o.color||"#1890ff"}},data:o}):t},ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"top-port"},{group:"right",id:"right-port"},{group:"bottom",id:"bottom-port"},{group:"left",id:"left-port"}]}}),this.graph.enableRubberband(),this.graph.enableKeyboard(),this.graph.on("node:mouseenter",(function(){var e=t.graph.container.querySelectorAll(".x6-port-body");e.forEach((function(t){t.style.visibility="visible"}))})),this.graph.on("node:mouseleave",(function(){var e=t.graph.container.querySelectorAll(".x6-port-body");e.forEach((function(t){t.style.visibility="hidden"}))})),this.graph.on("node:dblclick",(function(e){var o=e.node;t.editNode(o.id)})),this.graph.on("node:selected",(function(e){var o=e.node;t.selectedNodeId=o.id})),this.graph.on("node:unselected",(function(){t.selectedNodeId=null})),this.graph.on("scale",(function(e){var o=e.sx;t.zoom=o})),this.graph.on("cell:added",(function(){t.updateLists()})),this.graph.on("cell:removed",(function(){t.updateLists()})),this.graph.on("cell:change:*",(function(){t.updateLists()})),this.graph.bindKey(["backspace","delete"],(function(){return t.deleteSelected(),!1})),this.graph.bindKey(["ctrl+c","cmd+c"],(function(){var e=t.graph.getSelectedCells();return e.length&&t.graph.copy(e),!1})),this.graph.bindKey(["ctrl+v","cmd+v"],(function(){if(!t.graph.isClipboardEmpty()){var e=t.graph.paste();t.graph.cleanSelection(),t.graph.select(e)}return!1})),this.graph.bindKey(["ctrl+z","cmd+z"],(function(){return t.graph.canUndo()&&t.graph.undo(),!1})),this.graph.bindKey(["ctrl+y","cmd+y"],(function(){return t.graph.canRedo()&&t.graph.redo(),!1})),this.zoom=this.graph.zoom()},updateLists:function(){var t=this.graph.getCells();this.nodes=t.filter((function(t){return t.isNode()})).map((function(t){var e=t.getData()||{},o=t.attr("label/text");return{id:t.id,label:e.label||o||"èŠ‚ç‚¹".concat(t.id.substring(0,4)),content:e.content||t.attr("content/text")||"",color:e.color||"#1890ff",shape:t.shape}})),this.edges=t.filter((function(t){return t.isEdge()}))},loadSampleData:function(){this.graph.clearCells();var t=this.graph.addNode({id:"start-node",shape:"custom-rect",x:100,y:100,data:{label:"å¼€å§‹",content:"æµç¨‹å¼€å§‹èŠ‚ç‚¹",color:"#52c41a"}}),e=this.graph.addNode({id:"process-node",shape:"custom-circle",x:300,y:100,data:{label:"å¤„ç†",content:"æ•°æ®å¤„ç†èŠ‚ç‚¹",color:"#1890ff"}}),o=this.graph.addNode({id:"decision-node",shape:"custom-rect",x:500,y:100,data:{label:"åˆ¤æ–­",content:"æ¡ä»¶åˆ¤æ–­èŠ‚ç‚¹",color:"#faad14"}}),a=this.graph.addNode({id:"end-node",shape:"custom-rect",x:500,y:250,data:{label:"ç»“æŸ",content:"æµç¨‹ç»“æŸèŠ‚ç‚¹",color:"#f5222d"}});this.graph.addEdge({source:{cell:t,port:"right-port"},target:{cell:e,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"å¼€å§‹å¤„ç†"}}}]}),this.graph.addEdge({source:{cell:e,port:"right-port"},target:{cell:o,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"è¿›è¡Œåˆ¤æ–­"}}}]}),this.graph.addEdge({source:{cell:o,port:"bottom-port"},target:{cell:a,port:"top-port"},labels:[{position:.5,attrs:{text:{text:"æ¡ä»¶æˆç«‹"}}}]}),this.updateLists()},addRectNode:function(){var t=100+400*Math.random(),e=100+300*Math.random(),o="rect-node-".concat(Date.now()),a=["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#13c2c2"],i=a[Math.floor(Math.random()*a.length)];this.graph.addNode({id:o,shape:"custom-rect",x:t,y:e,data:{label:"çŸ©å½¢èŠ‚ç‚¹".concat(this.nodes.length+1),content:"åŒå‡»ç¼–è¾‘èŠ‚ç‚¹å†…å®¹",color:i}}),this.updateLists()},addCircleNode:function(){var t=100+400*Math.random(),e=100+300*Math.random(),o="circle-node-".concat(Date.now()),a=["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#13c2c2"],i=a[Math.floor(Math.random()*a.length)];this.graph.addNode({id:o,shape:"custom-circle",x:t,y:e,data:{label:"åœ†å½¢èŠ‚ç‚¹".concat(this.nodes.length+1),content:"åŒå‡»ç¼–è¾‘èŠ‚ç‚¹å†…å®¹",color:i}}),this.updateLists()},addEdge:function(){var t=this.graph.getNodes();if(t.length>=2){var e=t[t.length-2],o=t[t.length-1];this.graph.addEdge({source:{cell:e,port:"right-port"},target:{cell:o,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"è¿æ¥çº¿"}}}]}),this.updateLists()}else alert("è¯·å…ˆæ·»åŠ è‡³å°‘ä¸¤ä¸ªèŠ‚ç‚¹")},zoomIn:function(){this.graph.zoom(.1)},zoomOut:function(){this.graph.zoom(-.1)},resetZoom:function(){this.graph.zoomTo(1)},deleteSelected:function(){var t=this.graph.getSelectedCells();t.length&&(this.graph.removeCells(t),this.updateLists())},clearAll:function(){confirm("ç¡®å®šè¦æ¸…ç©ºç”»å¸ƒå—ï¼Ÿæ‰€æœ‰èŠ‚ç‚¹å’Œè¿çº¿å°†è¢«åˆ é™¤ã€‚")&&(this.graph.clearCells(),this.updateLists())},editNode:function(t){var e=this.graph.getCellById(t);if(e){var o=e.getData()||{};this.editingNodeId=t,this.editingNodeData={label:o.label||e.attr("label/text")||"æœªå‘½åèŠ‚ç‚¹",content:o.content||e.attr("content/text")||"",color:o.color||"#1890ff"},this.editModalVisible=!0}},saveNodeContent:function(){if(this.editingNodeId){var t=this.graph.getCellById(this.editingNodeId);t&&(t.setData(this.editingNodeData),t.attr("label/text",this.editingNodeData.label),t.attr("content/text",this.editingNodeData.content),t.attr("body/fill",this.hexToRgba(this.editingNodeData.color,.1)),t.attr("body/stroke",this.editingNodeData.color),this.updateLists()),this.editModalVisible=!1,this.editingNodeId=null}},cancelEdit:function(){this.editModalVisible=!1,this.editingNodeId=null},deleteNode:function(t){if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹å—ï¼Ÿç›¸å…³çš„è¿æ¥çº¿ä¹Ÿä¼šè¢«åˆ é™¤ã€‚")){var e=this.graph.getCellById(t);e&&(this.graph.removeCell(e),this.updateLists())}},focusNode:function(t){var e=this.graph.getCellById(t);e&&(this.graph.cleanSelection(),this.graph.select(e),this.graph.centerCell(e))},refreshNodeList:function(){this.updateLists()},exportData:function(){var t=this.graph.toJSON(),e=JSON.stringify(t,null,2),o=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="flowchart-".concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),alert("æ•°æ®å¯¼å‡ºæˆåŠŸï¼")},importData:function(){this.importModalVisible=!0},cancelImport:function(){this.importModalVisible=!1,this.importDataJson=""},confirmImport:function(){try{var t=JSON.parse(this.importDataJson);this.graph.fromJSON(t),this.updateLists(),this.importModalVisible=!1,this.importDataJson="",alert("æ•°æ®å¯¼å…¥æˆåŠŸï¼")}catch(e){alert("å¯¼å…¥å¤±è´¥ï¼šJSONæ ¼å¼é”™è¯¯\n"+e.message)}},loadExampleData:function(){var t={cells:[{id:"node1",shape:"custom-rect",x:100,y:100,data:{label:"ç¤ºä¾‹èŠ‚ç‚¹1",content:"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹èŠ‚ç‚¹",color:"#1890ff"}},{id:"node2",shape:"custom-circle",x:300,y:100,data:{label:"ç¤ºä¾‹èŠ‚ç‚¹2",content:"å¦ä¸€ä¸ªç¤ºä¾‹èŠ‚ç‚¹",color:"#52c41a"}},{id:"edge1",shape:"edge",source:{cell:"node1",port:"right-port"},target:{cell:"node2",port:"left-port"},labels:[{position:.5,attrs:{text:{text:"ç¤ºä¾‹è¿æ¥"}}}]}]};this.importDataJson=JSON.stringify(t,null,2)},hexToRgba:function(t,e){if(!t)return"rgba(24, 144, 255, ".concat(e,")");4===t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var o=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return"rgba(".concat(o,", ").concat(a,", ").concat(i,", ").concat(e,")")}}},d=c,h=(o("8b92"),o("2877")),p=Object(h["a"])(d,a,i,!1,null,"25d254ac",null);e["default"]=p.exports},"63e3":function(t,e,o){},"8b92":function(t,e,o){"use strict";var a=o("63e3"),i=o.n(a);i.a}}]);