(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1d7eebc"],{"11e9":function(e,t,n){var o=n("52a7"),i=n("4630"),r=n("6821"),a=n("6a99"),u=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?l:function(e,t){if(e=r(e),t=a(t,!0),s)try{return l(e,t)}catch(n){}if(u(e,t))return i(!o.f.call(e,t),e[t])}},"1c4c":function(e,t,n){"use strict";var o=n("9b43"),i=n("5ca1"),r=n("4bf8"),a=n("1fa8"),u=n("33a4"),s=n("9def"),l=n("f1ae"),c=n("27ee");i(i.S+i.F*!n("5cc5")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=r(e),g="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,h=void 0!==m,v=0,y=c(f);if(h&&(m=o(m,p>2?arguments[2]:void 0,2)),void 0==y||g==Array&&u(y))for(t=s(f.length),n=new g(t);t>v;v++)l(n,v,h?m(f[v],v):f[v]);else for(d=y.call(f),n=new g;!(i=d.next()).done;v++)l(n,v,h?a(d,m,[i.value,v],!0):i.value);return n.length=v,n}})},"5dbc":function(e,t,n){var o=n("d3f4"),i=n("8b97").set;e.exports=function(e,t,n){var r,a=t.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&o(r)&&i&&i(e,r),e}},"5df3":function(e,t,n){"use strict";var o=n("02f4")(!0);n("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},"8b97":function(e,t,n){var o=n("d3f4"),i=n("cb7c"),r=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:r}},9093:function(e,t,n){var o=n("ce10"),i=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},aa77:function(e,t,n){var o=n("5ca1"),i=n("be13"),r=n("79e5"),a=n("fdef"),u="["+a+"]",s="​",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(e,t,n){var i={},u=r(function(){return!!a[e]()||s[e]()!=s}),l=i[e]=u?t(f):a[e];n&&(i[n]=l),o(o.P+o.F*u,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},ae4a:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload"},[n("div",{on:{click:e.upLoadDia}},[e._t("btn",[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2"}},[e._v("点击上传")])])],2),n("el-dialog",{attrs:{title:"上传图片",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"formData",attrs:{model:e.formData,"status-icon":"","label-width":"auto",rules:e.rules}},[n("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[n("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择分组"},model:{value:e.formData.group_id,callback:function(t){e.$set(e.formData,"group_id",t)},expression:"formData.group_id"}},[n("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,function(e){return n("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})],2)],1),n("el-form-item",{attrs:{label:"本地素材",prop:"imgs"}},[n("el-upload",{ref:"Imageupload",attrs:{action:"","list-type":"picture-card","http-request":e.uploadImage,"on-remove":e.handleRemove,multiple:"",limit:8,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed}},[n("i",{staticClass:"el-icon-plus"})])],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],r=(n("7f7f"),n("c5f6"),n("d1eb")),a={props:{group_id:{type:[String,Number],required:!0},groupList:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{notify:"",dialogVisible:!1,formData:{group_id:"0",imgs:[]},rules:{group_id:[{required:!0,message:"请选择分组",trigger:"blur"}],imgs:[{required:!0,message:"请选择图片",trigger:"blur"}]},images:[]}},deactivated:function(){this.notify&&this.notify.close(),this.notify=null},methods:{submit:function(){var e=this;console.log("点击了提交"),this.$refs["formData"].validate(function(t){t&&(console.log(t),console.log(e.formData),e.addImage())})},addImage:function(){var e=this,t=this.formData.group_id,n=JSON.stringify(this.formData.imgs);Object(r["c"])({group_id:t,imgs:n}).then(function(t){0==t.code&&(e.$message({message:"图片上传成功！",type:"success"}),e.$emit("after-upload"),e.handleClose())})},upLoadDia:function(){this.dialogVisible=!0},handleClose:function(){this.$refs["formData"].clearValidate(),this.$refs["Imageupload"].clearFiles(),this.dialogVisible=!1,this.formData={group_id:"0",imgs:[]},this.images=[]},uploadImage:function(e){console.log(e),this.uploadPic(e.file)},handleRemove:function(e,t){console.log(e,t);var n="";this.images.map(function(t,o){t.uid==e.uid&&(n=o)}),this.images.splice(n,1),this.formData.imgs.splice(n,1),console.log(this.images),console.log(this.formData.imgs)},handleExceed:function(e,t){this.$message({type:"error",message:"当前限制选择 8 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件")})},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},uploadPic:function(e){var t=this;this.notify||(this.notify=this.$notify({title:"请不要离开页面",duration:0,iconClass:"el-icon-loading",showClose:!1})),this.notify.message="正在上传",Object(r["x"])({file:e,type:0}).then(function(n){console.log(n),t.images.push({uid:e.uid,file:n.data.file}),t.formData.imgs.push({file:n.data.file,name:n.data.name}),console.log(t.images),console.log(t.formData.imgs),t.notify.close(),t.$notify({title:"提示",message:"上传成功",type:"success",duration:1e3})},function(e){console.log(e)})}}},u=a,s=n("2877"),l=Object(s["a"])(u,o,i,!1,null,"38c283ec",null),c=l.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload"},[n("div",{on:{click:function(t){return e.$refs.fileUpload.click()}}},[e._t("btn",[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2"}},[e._v("点击上传")])])],2),n("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:e.multipleUploadFile}})])},f=[],g=(n("ac6a"),n("5df3"),n("1c4c"),n("96cf"),n("3b8d")),p={props:{group_id:{type:[String,Number],required:!0},type:{type:[String,Number],required:!0},group_type:{type:[String,Number],required:!0}},data:function(){return{}},methods:{multipleUploadFile:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,n,o,i,r,a,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=Array.from(this.$refs.fileUpload.files),n=0,o=t.length,i="",r=regeneratorRuntime.mark(function e(r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i||(i=u.$notify({title:"上传中",duration:0,iconClass:"el-icon-loading",showClose:!1})),i.message="正在上传（".concat(r+1,"/").concat(o,"）"),a=t[r],e.next=5,u.upload(a).then(function(e){n+=e}).finally(function(){u.active=r+1});case 5:case"end":return e.stop()}},e)}),a=0;case 6:if(!(a<t.length)){e.next=11;break}return e.delegateYield(r(a),"t0",8);case 8:a++,e.next=6;break;case 11:i.close(),0!=t.length&&this.$notify({title:"提示",message:"上传".concat(t.length,"个资源，成功").concat(n,"个"),type:"success"}),this.$emit("after-upload"),this.$refs.fileUpload.value="";case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),upload:function(){var e=this,t=this.$refs.fileUpload.files[0],n=this.type,o={};Object(r["x"])({file:t,type:n}).then(function(e){if(0==e.code){var t=e.data,n=t.file_name;t.file_size,t.url;o=n}},function(e){console.log(e)}).finally(function(){if(e.$refs.fileUpload.value="",3==e.group_type){var t=o,n=t.url;getVideoCover({file_url:n}).then(function(e){console.log(Object.assign(o,e.data))}).finally(function(){})}else if(2==e.group_type){var i=o,r=i.url;getAudioDuration({audio_file:r}).then(function(e){console.log(Object.assign(o,e.data))}).finally(function(){})}})}}},m=p,h=Object(s["a"])(m,d,f,!1,null,"7756d439",null),v=h.exports;n.d(t,"a",function(){return y});t["b"]=c;var y=v},c5f6:function(e,t,n){"use strict";var o=n("7726"),i=n("69a8"),r=n("2d95"),a=n("5dbc"),u=n("6a99"),s=n("79e5"),l=n("9093").f,c=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,g="Number",p=o[g],m=p,h=p.prototype,v=r(n("2aeb")(h))==g,y="trim"in String.prototype,b=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var n,o,i,r=t.charCodeAt(0);if(43===r||45===r){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(var a,s=t.slice(2),l=0,c=s.length;l<c;l++)if(a=s.charCodeAt(l),a<48||a>i)return NaN;return parseInt(s,o)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?s(function(){h.valueOf.call(n)}):r(n)!=g)?a(new m(b(t)),n,p):b(t)};for(var _,I=n("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;I.length>A;A++)i(m,_=I[A])&&!i(p,_)&&d(p,_,c(m,_));p.prototype=h,h.constructor=p,n("2aba")(o,g,p)}},d1eb:function(e,t,n){"use strict";n.d(t,"n",function(){return r}),n.d(t,"l",function(){return a}),n.d(t,"r",function(){return u}),n.d(t,"m",function(){return s}),n.d(t,"o",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"i",function(){return d}),n.d(t,"v",function(){return f}),n.d(t,"a",function(){return g}),n.d(t,"f",function(){return p}),n.d(t,"s",function(){return m}),n.d(t,"j",function(){return h}),n.d(t,"t",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"e",function(){return b}),n.d(t,"w",function(){return _}),n.d(t,"b",function(){return I}),n.d(t,"h",function(){return A}),n.d(t,"x",function(){return F}),n.d(t,"k",function(){return V}),n.d(t,"q",function(){return N}),n.d(t,"u",function(){return R}),n.d(t,"c",function(){return w}),n.d(t,"p",function(){return x});var o=n("365c"),i={getImgList:"getImgList",getAudioList:"getAudioList",getVideoList:"getVideoList",getFileList:"getFileList",getResGroups:"getResGroups",addResGroup:"addResGroup",delResGroup:"delResGroup",modResGroup:"modResGroup",addAudio:"addAudio",addVideo:"addVideo",addFile:"addFile",modFile:"modFile",modAudio:"modAudio",modVideo:"modVideo",modImage:"modImage",delAudio:"delAudio",delVideo:"delVideo",delFile:"delFile",delImage:"delImage",getAudioDuration:"getAudioDuration",getVideoCover:"getVideoCover",uploadFile:"uploadFile",addImage:"addImage",getResSize:"resSize"};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getImgList,e,"gm/res")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getAudioList,e,"gm/res")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getVideoList,e,"gm/res")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getFileList,e,"gm/res")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getResGroups,e,"gm/res")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addResGroup,e,"gm/res")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delResGroup,e,"gm/res")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.modResGroup,e,"gm/res")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addAudio,e,"gm/res")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delAudio,e,"gm/res")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.modAudio,e,"gm/res")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delVideo,e,"gm/res")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.modFile,e,"gm/res")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delFile,e,"gm/res")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addVideo,e,"gm/res")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.modVideo,e,"gm/res")}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addFile,e,"gm/res")}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.delImage,e,"gm/res")}function F(e){return o["a"].post(i.uploadFile,e,"gm/res")}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getAudioDuration,e,"gm/res")}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getVideoCover,e,"gm/res")}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.modImage,e,"gm/res")}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.addImage,e,"gm/res")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getResSize,e,"gm/res")}},f1ae:function(e,t,n){"use strict";var o=n("86cc"),i=n("4630");e.exports=function(e,t,n){t in e?o.f(e,t,i(0,n)):e[t]=n}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);