(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62ddd954","chunk-366ba38c"],{"243b":function(e,t,r){"use strict";r.r(t);var n=r("8379");t["default"]=n["default"]},"525b":function(e,t,r){"use strict";var n=r("d2f2"),i=r.n(n);i.a},8379:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mainInfo"},[r("div",{staticClass:"formContent"},[r("div",{staticClass:"pageTitle"},[e._v("\n      主体信息\n    ")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("div",{staticClass:"subTitle"},[e._v("\n        主体身份 "),r("span",{staticStyle:{color:"#aaa","margin-left":"20px"}},[e._v('请上传"营业执照"，需年检章齐全，当年注册除外')])]),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"营业执照照片",prop:"license_copy"}},[r("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadPhoto,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.licenseCopyList}},[e.form.license_copy?r("img",{staticClass:"avatar",attrs:{src:e.form.license_copy}}):r("i",{staticClass:"el-icon-plus"})]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"注册号",prop:"license_number"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.license_number,callback:function(t){e.$set(e.form,"license_number",t)},expression:"form.license_number"}}),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n              请依据营业执照，填写18位的统一社会信用代码\n            ")])],1),r("el-form-item",{attrs:{label:"商户名称",prop:"merchant_name"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.merchant_name,callback:function(t){e.$set(e.form,"merchant_name",t)},expression:"form.merchant_name"}})],1),r("el-form-item",{attrs:{label:"注册地址",prop:"license_address"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.license_address,callback:function(t){e.$set(e.form,"license_address",t)},expression:"form.license_address"}})],1),r("el-form-item",{attrs:{label:"营业期限",prop:"period_begin"}},[r("div",{staticStyle:{display:"flex"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.period_begin,callback:function(t){e.$set(e.form,"period_begin",t)},expression:"form.period_begin"}}),e.longTime?e._e():r("div",[r("span",{staticStyle:{margin:"0 20px"}},[e._v("至")]),r("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.period_end,callback:function(t){e.$set(e.form,"period_end",t)},expression:"form.period_end"}})],1),r("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.longTime,callback:function(t){e.longTime=t},expression:"longTime"}},[e._v("长期有效")])],1)])],1),r("el-form-item",{attrs:{label:"经营者姓名/法定代表人",prop:"legal_person"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.legal_person,callback:function(t){e.$set(e.form,"legal_person",t)},expression:"form.legal_person"}})],1)],1),r("div",{staticClass:"subTitle"},[e._v("\n        法定代表人证件 "),r("span",{staticStyle:{color:"#aaa","margin-left":"20px"}},[e._v("请上传法定代表人的证件信息")])]),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"身份证人像面照片",prop:"id_card_copy"}},[r("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadIdCopy,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.idCardCopyList}},[e.form.id_card_copy?r("img",{staticClass:"avatar",attrs:{src:e.form.id_card_copy}}):r("i",{staticClass:"el-icon-plus"})]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"证件持有人姓名",prop:"id_card_name"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_name,callback:function(t){e.$set(e.form,"id_card_name",t)},expression:"form.id_card_name"}})],1),r("el-form-item",{attrs:{label:"证件号码",prop:"id_card_number"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_number,callback:function(t){e.$set(e.form,"id_card_number",t)},expression:"form.id_card_number"}})],1),r("el-form-item",{attrs:{label:"证件持有人住址",prop:"id_card_address"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_address,callback:function(t){e.$set(e.form,"id_card_address",t)},expression:"form.id_card_address"}})],1)],1),r("el-form-item",{attrs:{label:"身份证国徽面照片",prop:"id_card_national"}},[r("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadIdNational,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.idCardNationalList}},[e.form.id_card_national?r("img",{staticClass:"avatar",attrs:{src:e.form.id_card_national}}):r("i",{staticClass:"el-icon-plus"})]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),r("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),r("div",{staticClass:"formBox"},[r("el-form-item",{attrs:{label:"证件有效期",prop:"card_period_begin"}},[r("div",{staticStyle:{display:"flex"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.card_period_begin,callback:function(t){e.$set(e.form,"card_period_begin",t)},expression:"form.card_period_begin"}}),e.longIdTime?e._e():r("div",[r("span",{staticStyle:{margin:"0 20px"}},[e._v("至")]),r("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.card_period_end,callback:function(t){e.$set(e.form,"card_period_end",t)},expression:"form.card_period_end"}})],1),r("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.longIdTime,callback:function(t){e.longIdTime=t},expression:"longIdTime"}},[e._v("长期有效")])],1)])],1)],1)]),r("div",{staticStyle:{"margin-top":"40px"}},[r("el-button",{staticStyle:{width:"120px"},on:{click:e.toDataFill}},[e._v("返回")]),r("el-button",{staticStyle:{width:"120px"},on:{click:e.mchInfoSave}},[e._v("保存草稿")]),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(t){return e.mchInfoSave("next")}}},[e._v("下一步")])],1)],1)])},i=[],o=r("9add"),a=r("d1eb"),d={data:function(){return{licenseCopyList:[],idCardCopyList:[],idCardNationalList:[],form:{license_copy:"",license_number:"",merchant_name:"",license_address:"",legal_person:"",period_begin:"",period_end:"",id_card_copy:"",id_card_national:"",id_card_name:"",id_card_number:"",id_card_address:"",card_period_begin:"",card_period_end:""},value:"",longTime:!1,longIdTime:!1,rules:{license_number:[{required:!0,message:"请输入注册号",trigger:"change"}],merchant_name:[{required:!0,message:"请输入商户名称",trigger:"change"}],license_address:[{required:!0,message:"请输入注册地址",trigger:"change"}],legal_person:[{required:!0,message:"请输入经营者姓名/法定代表人",trigger:"change"}],period_begin:[{required:!0,message:"请输入营业期限",trigger:"change"}],id_card_name:[{required:!0,message:"请输入身份证姓名",trigger:"change"}],id_card_number:[{required:!0,message:"请输入身份证号码",trigger:"change"}],id_card_address:[{required:!0,message:"请输入身份证居住地址",trigger:"change"}],card_period_begin:[{required:!0,message:"请输入身份证有效期",trigger:"change"}]},step:1}},components:{},filters:{},created:function(){this.brandId=this.$route.params.brandId,this.mchInfoStepGet()},onShow:function(){},mounted:function(){},computed:{},methods:{toDataFill:function(){this.$router.push({path:"/dataFill/".concat(this.brandId),replace:!0})},mchInfoStepGet:function(){var e=this;Object(o["l"])({brand_id:this.brandId,step:this.step}).then(function(t){if(console.log(t),0==t.code&&t.data.step1){var r=JSON.parse(t.data.step1);e.form.license_copy=r.subject_info.license_copy,e.form.license_number=r.subject_info.license_number,e.form.merchant_name=r.subject_info.merchant_name,e.form.license_address=r.subject_info.license_address,e.form.legal_person=r.subject_info.legal_person,e.form.period_begin=r.subject_info.period_begin,e.form.period_end=r.subject_info.period_end,e.form.id_card_copy=r.id_card_info.id_card_copy,e.form.id_card_national=r.id_card_info.id_card_national,e.form.id_card_name=r.id_card_info.id_card_name,e.form.id_card_number=r.id_card_info.id_card_number,e.form.id_card_address=r.id_card_info.id_card_address,e.form.card_period_begin=r.id_card_info.card_period_begin,e.form.card_period_end=r.id_card_info.card_period_end}})},mchInfoSave:function(e){var t=this;if("next"==e)this.$refs["form"].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(t.form.license_copy)if(t.longTime||""!=t.form.period_end)if(t.form.id_card_copy)if(t.form.id_card_national)if(t.longIdTime||""!=t.form.card_period_end){var r=JSON.stringify(t.formatData());Object(o["k"])({brand_id:t.brandId,data:r,step:t.step,is_submit:1}).then(function(e){0==e.code&&t.$router.push({path:"/manageInfo/".concat(t.brandId),replace:!0})})}else t.$message({message:"请输入身份证有效期结束时间",type:"error"});else t.$message({message:"请上传身份证人像面照片",type:"error"});else t.$message({message:"请上传身份证人像面照片",type:"error"});else t.$message({message:"请输入营业结束期限",type:"error"});else t.$message({message:"请上传营业执照照片",type:"error"})});else{var r=JSON.stringify(this.formatData());Object(o["k"])({brand_id:this.brandId,data:r,step:this.step,is_submit:0}).then(function(e){0==e.code&&t.$message({message:"保存草稿成功",type:"success"})})}},formatData:function(){var e={subject_info:{},id_card_info:{}};return e.subject_info.license_copy=this.form.license_copy,e.subject_info.license_number=this.form.license_number,e.subject_info.merchant_name=this.form.merchant_name,e.subject_info.license_address=this.form.license_address,e.subject_info.legal_person=this.form.legal_person,e.subject_info.period_begin=this.form.period_begin,e.subject_info.period_end=this.form.period_end,e.id_card_info.id_card_copy=this.form.id_card_copy,e.id_card_info.id_card_national=this.form.id_card_national,e.id_card_info.id_card_name=this.form.id_card_name,e.id_card_info.id_card_number=this.form.id_card_number,e.id_card_info.id_card_address=this.form.id_card_address,e.id_card_info.card_period_begin=this.form.card_period_begin,e.id_card_info.card_period_end=this.form.card_period_end,console.log(e),e},uploadPhoto:function(e){console.log(e),this.uploadPic(e.file,"licenseCopy")},uploadIdCopy:function(e){this.uploadPic(e.file,"idCardCopy")},uploadIdNational:function(e){this.uploadPic(e.file,"idCardNational")},uploadPic:function(e,t){var r=this;this.notify||(this.notify=this.$notify({title:"请不要离开页面",duration:0,iconClass:"el-icon-loading",showClose:!1})),this.notify.message="正在上传",Object(a["x"])({file:e,type:0}).then(function(e){console.log(e,t),"licenseCopy"==t&&(r.form.license_copy=e.data.file),"idCardCopy"==t&&(r.form.id_card_copy=e.data.file),"idCardNational"==t&&(r.form.id_card_national=e.data.file),r.notify.close(),r.$notify({title:"提示",message:"上传成功",type:"success",duration:1e3})},function(e){console.log(e)})},handleRemove:function(e){this.form.license_copy.splice(delIndex,1)},handleExceed:function(e){this.$message({type:"error",message:"当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件")})}}},s=d,c=(r("525b"),r("2877")),l=Object(c["a"])(s,n,i,!1,null,"10f8a3ec",null);t["default"]=l.exports},"9add":function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"n",function(){return d}),r.d(t,"p",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return l}),r.d(t,"e",function(){return u}),r.d(t,"o",function(){return m}),r.d(t,"g",function(){return f}),r.d(t,"f",function(){return p}),r.d(t,"h",function(){return _}),r.d(t,"j",function(){return g}),r.d(t,"l",function(){return h}),r.d(t,"k",function(){return v}),r.d(t,"m",function(){return b}),r.d(t,"i",function(){return y});var n=r("365c"),i={brandList:"list",addBrand:"add",runBrand:"run",stopBrand:"stop",editBrand:"mod",getAppBindUrl:"getAppBindUrl",getGhMes:"getAppBindInfo",setBookConfig:"bookConfig",brandMod:"mod",getBookConfig:"getBookConfig",getWorkData:"workData",getReport:"report",setTemplate:"setTemplate",mchInfoAdd:"mchInfoAdd",mchInfoMod:"mchInfoMod",mchInfoStepGet:"mchInfoStepGet",mchInfoSave:"mchInfoSave",mchInfoSubmit:"mchInfoSubmit",mchInfoGet:"mchInfoGet"};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.brandList,e,"gm/brand")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addBrand,e,"gm/brand")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.runBrand,e,"gm/brand")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.stopBrand,e,"gm/brand")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.editBrand,e,"gm/brand")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getAppBindUrl,e,"gm/brand")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getGhMes,e,"gm/brand")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.setBookConfig,e,"gm/brand")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getWorkData,e,"gm/brand")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getReport,e,"gm/brand")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoAdd,e,"gm/brand")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoMod,e,"gm/brand")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoStepGet,e,"gm/brand")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoSave,e,"gm/brand")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoSubmit,e,"gm/brand")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.mchInfoGet,e,"gm/brand")}},d1eb:function(e,t,r){"use strict";r.d(t,"n",function(){return o}),r.d(t,"l",function(){return a}),r.d(t,"r",function(){return d}),r.d(t,"m",function(){return s}),r.d(t,"o",function(){return c}),r.d(t,"d",function(){return l}),r.d(t,"i",function(){return u}),r.d(t,"v",function(){return m}),r.d(t,"a",function(){return f}),r.d(t,"f",function(){return p}),r.d(t,"s",function(){return _}),r.d(t,"j",function(){return g}),r.d(t,"t",function(){return h}),r.d(t,"g",function(){return v}),r.d(t,"e",function(){return b}),r.d(t,"w",function(){return y}),r.d(t,"b",function(){return I}),r.d(t,"h",function(){return x}),r.d(t,"x",function(){return S}),r.d(t,"k",function(){return C}),r.d(t,"q",function(){return k}),r.d(t,"u",function(){return G}),r.d(t,"c",function(){return M}),r.d(t,"p",function(){return j});var n=r("365c"),i={getImgList:"getImgList",getAudioList:"getAudioList",getVideoList:"getVideoList",getFileList:"getFileList",getResGroups:"getResGroups",addResGroup:"addResGroup",delResGroup:"delResGroup",modResGroup:"modResGroup",addAudio:"addAudio",addVideo:"addVideo",addFile:"addFile",modFile:"modFile",modAudio:"modAudio",modVideo:"modVideo",modImage:"modImage",delAudio:"delAudio",delVideo:"delVideo",delFile:"delFile",delImage:"delImage",getAudioDuration:"getAudioDuration",getVideoCover:"getVideoCover",uploadFile:"uploadFile",addImage:"addImage",getResSize:"resSize"};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getImgList,e,"gm/res")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getAudioList,e,"gm/res")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getVideoList,e,"gm/res")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getFileList,e,"gm/res")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getResGroups,e,"gm/res")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addResGroup,e,"gm/res")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.delResGroup,e,"gm/res")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.modResGroup,e,"gm/res")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addAudio,e,"gm/res")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.delAudio,e,"gm/res")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.modAudio,e,"gm/res")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.delVideo,e,"gm/res")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.modFile,e,"gm/res")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.delFile,e,"gm/res")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addVideo,e,"gm/res")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.modVideo,e,"gm/res")}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addFile,e,"gm/res")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.delImage,e,"gm/res")}function S(e){return n["a"].post(i.uploadFile,e,"gm/res")}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getAudioDuration,e,"gm/res")}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getVideoCover,e,"gm/res")}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.modImage,e,"gm/res")}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.addImage,e,"gm/res")}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getResSize,e,"gm/res")}},d2f2:function(e,t,r){}}]);