(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb3cb3c","chunk-31905c06","chunk-73052d5a","chunk-f6102e1c","chunk-022b1e7a"],{"086c":function(t,e,a){"use strict";a.r(e);var r=a("d2b4");e["default"]=r["default"]},"1bcd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("media-library",{ref:"mediaLibrary",attrs:{active:"1",title:"图片库"}}),a("div",{staticClass:"imgFlex"},[t._l(t.imgs,function(e,r){return a("div",{key:r,staticClass:"img-wrap"},[a("div",{staticClass:"img-item"},[a("i",{staticClass:"el-icon-close img-close",on:{click:function(e){return t.del_cover(r)}}}),a("BaseElImage",{attrs:{custom_src:e,previewList:[e],fit:"cover"}})],1)])}),t.imgs.length<t.limit?a("div",{staticClass:"img-add",on:{click:function(e){return t.$refs.mediaLibrary.open()}}},[a("i",{staticClass:"el-icon-plus img-add-icon"})]):t._e()],2)],1)},i=[],o=(a("c5f6"),a("daf4")),s={components:{mediaLibrary:o["a"]},props:{imgs:{type:[Object,Array],default:function(){return[]}},limit:{type:Number,default:function(){return 9}}},data:function(){return{srcCovers:[]}},mounted:function(){var t=this;this.$bus.$on("finishCoverSelectMed",function(e){t.getData(e)})},beforeDestroy:function(){this.$bus.$off("finishCoverSelectMed")},methods:{getData:function(t){this.imgs.push(t.src_file),this.$emit("update:imgs",this.imgs),this.$emit("finishChoose",this.imgs),this.$refs.mediaLibrary.handleClose()},del_cover:function(t){this.imgs.splice(t,1),console.log(this.imgs),this.$emit("update:imgs",this.imgs),this.$emit("finishChoose",this.imgs)}}},n=s,d=(a("5c15"),a("2877")),l=Object(d["a"])(n,r,i,!1,null,"7ba5f4df",null);e["default"]=l.exports},"5b1b":function(t,e,a){},"5c15":function(t,e,a){"use strict";var r=a("5b1b"),i=a.n(r);i.a},"6ade":function(t,e,a){},"9ca1":function(t,e,a){"use strict";a.r(e);var r=a("1bcd");e["default"]=r["default"]},a3ab:function(t,e,a){"use strict";a.r(e);var r=a("ed85");e["default"]=r["default"]},c40e:function(t,e,a){"use strict";a.d(e,"c",function(){return o}),a.d(e,"m",function(){return s}),a.d(e,"i",function(){return n}),a.d(e,"J",function(){return d}),a.d(e,"G",function(){return l}),a.d(e,"I",function(){return u}),a.d(e,"F",function(){return c}),a.d(e,"w",function(){return p}),a.d(e,"t",function(){return v}),a.d(e,"r",function(){return f}),a.d(e,"u",function(){return m}),a.d(e,"s",function(){return h}),a.d(e,"o",function(){return g}),a.d(e,"v",function(){return _}),a.d(e,"x",function(){return b}),a.d(e,"q",function(){return S}),a.d(e,"p",function(){return y}),a.d(e,"A",function(){return k}),a.d(e,"z",function(){return w}),a.d(e,"y",function(){return A}),a.d(e,"B",function(){return x}),a.d(e,"n",function(){return L}),a.d(e,"K",function(){return V}),a.d(e,"L",function(){return $}),a.d(e,"g",function(){return C}),a.d(e,"h",function(){return D}),a.d(e,"a",function(){return N}),a.d(e,"b",function(){return R}),a.d(e,"f",function(){return F}),a.d(e,"j",function(){return G}),a.d(e,"H",function(){return O}),a.d(e,"d",function(){return j}),a.d(e,"e",function(){return I}),a.d(e,"l",function(){return P}),a.d(e,"k",function(){return M}),a.d(e,"C",function(){return z}),a.d(e,"E",function(){return J}),a.d(e,"D",function(){return B});var r=a("365c"),i={groupList:"groupList",groupAdd:"groupAdd",groupMod:"groupMod",groupDel:"groupDel",goodsGroupList:"list",goodsGroupAdd:"add",goodsGroupMod:"mod",goodsGroupDel:"del",goodsGroupTree:"tree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList",setGoodsTop:"topSet",draftGet:"draftGet",draftSet:"draftSet",profitList:"profitList",imgGet:"imgsGet",setImgs:"imgsSet",serveGet:"serviceGet",setServe:"serviceSet",getAttrs:"attrs",getSkuShops:"skuShops",checkGoods:"check"};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.checkGoods,t,"api/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.getSkuShops,t,"api/goods")}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.getAttrs,t,"api/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.setServe,t,"api/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.serveGet,t,"api/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.setImgs,t,"api/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.imgGet,t,"api/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsList,t,"api/goods")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsGroupList,t,"api/group")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsGroupAdd,t,"api/group")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsGroupMod,t,"api/group")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsGroupDel,t,"api/group")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsAdd,t,"api/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsGroupTree,t,"api/group")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsMod,t,"api/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsDel,t,"api/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsAttrSet,t,"api/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsSkuSet,t,"api/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsSkuGet,t,"api/goods")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsRun,t,"api/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.goodsStop,t,"api/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(i.topList,t,"api/goods")}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(i.setTop,t,"api/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(i.topCancel,t,"api/goods")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.applyList,t,"api/goods")}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.applyPool,t,"api/goods")}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.applyCalc,t,"api/goods")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.applyPut,t,"api/goods")}function F(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.fixPut,t,"api/goods")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.fixList,t,"api/goods")}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.setGoodsTop,t,"api/goods")}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.draftGet,t,"api/goods")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.draftSet,t,"api/goods")}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.profitList,t,"api/goods")}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.groupList,t,"api/goods")}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.groupAdd,t,"api/goods")}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.groupMod,t,"api/goods")}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.groupDel,t,"api/goods")}},c68a:function(t,e,a){},c933:function(t,e,a){"use strict";var r=a("c68a"),i=a.n(r);i.a},d2b4:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑",visible:t.show,width:"70%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[a("el-form",{ref:"form",attrs:{model:t.data,"label-width":"auto",rules:t.rules}},[a("el-form-item",{attrs:{label:"库存数量",prop:"stock_num"}},[a("el-input",{attrs:{type:"number"},model:{value:t.data.stock_num,callback:function(e){t.$set(t.data,"stock_num",e)},expression:"data.stock_num"}})],1),a("el-form-item",{attrs:{label:"苗木报价",prop:"green_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.data.green_price,callback:function(e){t.$set(t.data,"green_price",e)},expression:"data.green_price"}})],1),a("el-form-item",{attrs:{label:"花盆报价",prop:"pot_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.data.pot_price,callback:function(e){t.$set(t.data,"pot_price",e)},expression:"data.pot_price"}})],1),a("el-form-item",{attrs:{label:"配送报价",prop:"deliver_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.data.deliver_price,callback:function(e){t.$set(t.data,"deliver_price",e)},expression:"data.deliver_price"}})],1),a("el-form-item",{attrs:{label:"其他费用",prop:"care_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.data.care_price,callback:function(e){t.$set(t.data,"care_price",e)},expression:"data.care_price"}})],1),a("el-form-item",{attrs:{label:"总售价"}},[a("div",[t._v(t._s(Number(t.data.green_price)+Number(t.data.pot_price)+Number(t.data.deliver_price)+Number(t.data.care_price)))])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},i=[],o=(a("c5f6"),a("901e")),s=a.n(o),n=a("c40e"),d={data:function(){return{show:!1,data:{sku_id:"",stock_num:"",green_price:"",pot_price:"",deliver_price:"",care_price:""},rules:{}}},methods:{open:function(t){this.data.stock_num=t.stock_num,this.data.green_price=t.green_price?Number(t.green_price):0,this.data.pot_price=t.pot_price?Number(t.pot_price):0,this.data.deliver_price=t.deliver_price?Number(t.deliver_price):0,this.data.care_price=t.care_price?Number(t.care_price):0,this.data.sku_id=t.sku_id,this.show=!0},closed:function(){this.data={sku_id:"",stock_num:"",green_price:"",pot_price:"",deliver_price:"",care_price:""}},submit:function(){var t=this,e=!1;if(this.$refs["form"].validate(function(t){e=t}),e){var a=this.data,r=a.sku_id,i=a.stock_num,o=a.green_price,s=a.pot_price,d=a.deliver_price,l=a.care_price;Object(n["A"])({sku_id:r,stock_num:i,green_price:o,pot_price:s,deliver_price:d,care_price:l}).then(function(e){0==e.code&&(t.$message({message:"编辑成功",type:"success"}),t.show=!1,t.$emit("refresh"))})}},formatPirce:function(t){return t?new s.a(t).multipliedBy(new s.a(100)).toNumber():0}}},l=d,u=a("2877"),c=Object(u["a"])(l,r,i,!1,null,null,null);e["default"]=c.exports},ea90:function(t,e,a){"use strict";var r=a("6ade"),i=a.n(r);i.a},ed85:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasAttrs,expression:"hasAttrs"}],attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.showAddStandardAttr}},[t._v('"参数选择"定义属性')]),a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.ShowAdd,callback:function(e){t.ShowAdd=e},expression:"ShowAdd"}},[a("div",{staticClass:"addAttrWrap"},[a("el-input",{attrs:{size:"mini",width:"100px",placeholder:"请输入规格名称"},model:{value:t.attr_item.attr_name,callback:function(e){t.$set(t.attr_item,"attr_name",e)},expression:"attr_item.attr_name"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.addAttrItem}},[t._v("添加")])],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-plus",type:"primary",size:"mini"},slot:"reference"},[t._v('"文字描述"定义属性')])],1),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.attr,border:""}},[a("el-table-column",{attrs:{prop:"attr_name",label:"规格名称",width:"200"}}),a("el-table-column",{attrs:{prop:"attr_value",label:"规格值"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.values,function(r,i){return a("el-tag",{key:r.attr_value,staticClass:"tag",attrs:{name:r.attr_value,type:"info","disable-transitions":!0,closable:""},on:{click:function(a){return t.editAttrValue(r,e.$index,i)},close:function(a){return t.delAttrValue(e.$index,i)}}},[t._v("\n          "+t._s(r.attr_value)+"\n        ")])}),t.haveStandardValue(e.row.attr_name)?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(a){return t.addStandardValueDialog(e.$index,e.row.attr_name)}}},[t._v('"参数选择"定义属性值')]):t._e(),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(a){return t.addAttrDialog(e.$index)}}},[t._v('"文字描述"定义属性值')])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(a){return t.delAttr(e.$index)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{"append-to-body":"",title:"属性值",visible:t.addAttrValueShow,width:"30%"},on:{"update:visible":function(e){t.addAttrValueShow=e},closed:t.closed}},[a("el-form",{ref:"addAttrValueData",attrs:{"label-width":"auto",model:t.attr_value,rules:t.rules}},[a("el-form-item",{attrs:{label:"规格值",prop:"attr_value"}},[a("el-input",{model:{value:t.attr_value.attr_value,callback:function(e){t.$set(t.attr_value,"attr_value",e)},expression:"attr_value.attr_value"}})],1)],1),a("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getPic}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addAttrValueShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setAttrValue}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{"append-to-body":"",top:"20px",title:"标准属性值",visible:t.addStandardAttrShow},on:{"update:visible":function(e){t.addStandardAttrShow=e},closed:t.closed}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-radio-group",{model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("绿植类")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("非绿植类")])],1)],1),a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid #ddd"},attrs:{span:6}},[a("div",{staticClass:"scrollBox"},[a("el-radio-group",{model:{value:t.standarAttr,callback:function(e){t.standarAttr=e},expression:"standarAttr"}},t._l(t.attrsNames,function(e,r){return a("el-radio",{key:r,attrs:{label:e},on:{change:t.attrsNameChange}},[t._v(t._s(e))])}),1)],1)]),a("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:18}},[a("el-checkbox-group",{model:{value:t.standardValueList,callback:function(e){t.standardValueList=e},expression:"standardValueList"}},t._l(t.valueData,function(t,e){return a("el-checkbox",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.standarAttr="",t.standardValueList=[],t.valueData=[],t.addStandardAttrShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addStandardAttrAndValue}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{"append-to-body":"",title:'"参数选择"定义属性值',visible:t.addStandardValueShow},on:{"update:visible":function(e){t.addStandardValueShow=e},closed:t.closed}},[a("el-checkbox-group",{model:{value:t.standardValueList,callback:function(e){t.standardValueList=e},expression:"standardValueList"}},t._l(t.valueData,function(t,e){return a("el-checkbox",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.standardValueList=[],t.addStandardValueShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addStandardValue}},[t._v("确 定")])],1)],1)],1)},i=[],o=a("cebc"),s=(a("ac6a"),a("7f7f"),a("7514"),a("0bba")),n=a("c40e"),d={components:{PictureLibrary:s["a"]},watch:{group_id:{handler:function(t){t&&this.getAttrs()},immediate:!0}},props:{attr:{type:[Array,String],required:!0,default:function(){return[]}}},data:function(){return{group_id:"1",ShowAdd:!1,addAttrValueShow:!1,data:[],rowIndex:"",rowIdx:"",attr_item:{attr_name:"",values:[]},attr_value:{attr_value:"",attr_img:"",min_img:""},rules:{attr_value:[{required:!0,message:"请输入规格值",trigger:"blur"}]},addStandardAttrShow:!1,standardAttrList:[],standardRadio:{},attrsData:[],hasAttrs:!1,addStandardValueShow:!1,standardRowName:"",standardValueList:[],valueData:[],attrsNames:[],standarAttr:""}},methods:{addStandardAttrAndValue:function(){if(""!=this.standarAttr)if(0!=this.standardValueList.length){var t=[];this.standardValueList.map(function(e,a){t.push({attr_value:e})}),this.attr.push({attr_name:this.standarAttr,values:t}),this.standarAttr="",this.standardValueList=[],this.valueData=[],this.addStandardAttrShow=!1}else this.$message({message:"请选择属性值",type:"warning"});else this.$message({message:"请选择属性",type:"warning"})},attrsNameChange:function(){var t=this;this.standardValueList=[];var e=this.attrsData.find(function(e){return Array.isArray(e.name)?e.name.some(function(e){return e==t.standarAttr})?e:void 0:e.name==t.standarAttr});this.valueData=e.value},getAttrs:function(){var t=this;Object(n["i"])({group_id:this.group_id}).then(function(e){e.data?(t.hasAttrs=!0,t.attrsData=e.data,t.attrsNames=t.attrsData.flatMap(function(t){return t.name})):t.hasAttrs=!1,t.$emit("changeRim",e.msg)})},handleCheckChange:function(t,e){if(console.log(this.standardRadio[e],!this.standardRadio[e]),1!=e.length)if(t){if(!this.standardRadio[e]){var a=this.standardAttrList.indexOf(e);console.log(a,"下标"),this.standardAttrList.splice(a,1)}}else this.standardRadio[e]=null},handleRadioChange:function(t,e){this.standardAttrList.some(function(t){return t==e})||this.standardAttrList.push(e)},addStandardValue:function(){var t=this;this.standardValueList.map(function(e,a){t.attr[t.rowIndex].values.push({attr_value:e})}),this.standardValueList=[],this.addStandardValueShow=!1},haveStandardValue:function(t){var e=this.attrsData.some(function(e){return Array.isArray(e.name)?e.name.some(function(e){return e==t})?e:void 0:e.name==t});return e},addStandardValueDialog:function(t,e){var a=this;this.standardRowName=e,this.rowIndex=t;var r=this.attrsData.find(function(t){return Array.isArray(t.name)?t.name.some(function(t){return t==a.standardRowName})?t:void 0:t.name==a.standardRowName});console.log(r),r?(this.valueData=r.value,this.addStandardValueShow=!0):this.$message({message:'此规格无"参数选择"定义属性值',type:"warning"})},addStandardAttr:function(){var t=this;this.standardAttrList.map(function(e,a){1!=e.length?t.standardRadio[e]&&t.attr.push({attr_name:t.standardRadio[e],values:[]}):t.attr.push({attr_name:e[0],values:[]})}),this.standardAttrList=[],this.standardRadio={},this.addStandardAttrShow=!1},showAddStandardAttr:function(){this.addStandardAttrShow=!0,this.ShowAdd=!1,console.log(this.group_id)},closed:function(){this.rowIndex="",this.rowIdx="",this.attr_value.min_img="",this.attr_value.attr_img="",this.attr_value.attr_value=""},addAttrItem:function(){this.attr_item.attr_name&&(this.attr.push(Object(o["a"])({},this.attr_item)),this.attr_item={attr_name:"",values:[]},this.ShowAdd=!1,this.updateAttr())},addAttrDialog:function(t){this.rowIndex=t,this.addAttrValueShow=!0},editAttrValue:function(t,e,a){this.attr_value=Object(o["a"])({},t),this.rowIndex=e,this.rowIdx=a,this.addAttrValueShow=!0},selectPic:function(){this.$refs.pic.open()},getPic:function(t){this.attr_value.attr_img=t.src_file,this.attr_value.min_img=t.min_file},setAttrValue:function(){var t=!1;if(this.$refs["addAttrValueData"].validate(function(e){t=e}),t){var e=this.attr_value,a=e.attr_value,r=e.attr_img;"string"==typeof this.rowIdx?this.attr[this.rowIndex].values.push({attr_value:a,attr_img:r}):this.$set(this.attr[this.rowIndex].values,this.rowIdx,{attr_value:a,attr_img:r}),this.updateAttr(),this.addAttrValueShow=!1}},delAttr:function(t){this.attr.splice(t,1),this.updateAttr()},delAttrValue:function(t,e){this.attr[t].values.splice(e,1),this.updateAttr()},updateAttr:function(){this.$emit("update:attr",this.attr)}}},l=d,u=(a("c933"),a("2877")),c=Object(u["a"])(l,r,i,!1,null,"848b9326",null);e["default"]=c.exports},f032:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setImg"},[a("el-dialog",{attrs:{title:"商品上架",top:"20px",width:"70%",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialog=e},closed:t.closedDialog}},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:t.activeRunStep,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"产品图片"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"服务设置"}}),a("el-step",{attrs:{title:"价格库存"}})],1),a("div",{staticClass:"Box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.activeRunStep,expression:"activeRunStep == 0"}]},[a("el-form",{ref:"imgForm",attrs:{"label-width":"110px",model:t.imgForm,rules:t.imgRules}},[a("el-form-item",{attrs:{label:"商品图片",prop:"imgs"}},[a("formCovers",{attrs:{imgs:t.imgForm.imgs},on:{"update:imgs":function(e){return t.$set(t.imgForm,"imgs",e)},finishChoose:t.finishCoversChoose}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.imgNextSetp}},[t._v("下一步")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeRunStep,expression:"activeRunStep == 1"}]},[a("div",{staticClass:"scrollBox"},[a("formAttr",{attrs:{attr:t.data.attrs},on:{"update:attr":function(e){return t.$set(t.data,"attrs",e)}}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.activeRunStep-=1}}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.attrNextSetp}},[t._v("下一步")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.activeRunStep,expression:"activeRunStep == 2"}]},[a("el-form",{ref:"serveForm",attrs:{"label-width":"110px",model:t.serveForm,rules:t.serveRules}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"到货方式",prop:"deliver_method"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.serveForm.deliver_method,callback:function(e){t.$set(t.serveForm,"deliver_method",e)},expression:"serveForm.deliver_method"}},t._l(t.deliveryMethodList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"服务保障",prop:"service"}},[t._l(t.serveForm.service,function(e,r){return a("el-tag",{key:e,staticClass:"tag",attrs:{name:e,type:"info","disable-transitions":!0,closable:""},on:{click:function(a){return t.editServe(e,r)},close:function(e){return t.delServe(r)}}},[t._v("\n                "+t._s(e)+"\n              ")])}),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(e){t.addStandardServeShow=!0}}},[t._v("标准服务保障")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(e){t.addServeValueShow=!0}}},[t._v("定制服务保障")])],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.activeRunStep-=1}}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.serveSubmit}},[t._v("下一步")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.activeRunStep,expression:"activeRunStep == 3"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-menu",{attrs:{"default-active":t.activeShopId},on:{select:t.selectShop}},t._l(t.shopList,function(e,r){return a("el-menu-item",{key:r,attrs:{index:e.shop_id.toString()}},[t._v(t._s(e.shop_name))])}),1)],1),a("el-col",{attrs:{span:21}},[a("div",{staticClass:"scrollBox"},[a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.skuData,border:""}},[a("el-table-column",{attrs:{prop:"attr_value_format",label:"商品属性"}}),a("el-table-column",{attrs:{prop:"green_price",label:"苗木报价"}}),a("el-table-column",{attrs:{prop:"pot_price",label:"花盆报价"}}),a("el-table-column",{attrs:{prop:"deliver_price",label:"配送报价"}}),a("el-table-column",{attrs:{prop:"care_price",label:"其他费用"}}),a("el-table-column",{attrs:{label:"总售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(Number(e.row.green_price)+Number(e.row.pot_price)+Number(e.row.deliver_price)+Number(e.row.care_price))+"\n                  ")]}}])}),a("el-table-column",{attrs:{prop:"stock_num",label:"库存"}}),a("el-table-column",{attrs:{prop:"create_time",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("\n                      编辑\n                    ")])]}}])})],1)],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.activeRunStep-=1}}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.skuNextStep}},[t._v("确 认")])],1),a("formSku",{ref:"sku",on:{refresh:t.goodsSkuGet}})],1)]),a("el-dialog",{attrs:{"append-to-body":"",title:"设置服务保障",visible:t.addServeValueShow,width:"30%"},on:{"update:visible":function(e){t.addServeValueShow=e}}},[a("el-form",{ref:"addServeValueData",attrs:{"label-width":"auto",model:t.serve_value,rules:t.serveRules}},[a("el-form-item",{attrs:{label:"服务保障",prop:"serve_value"}},[a("el-input",{model:{value:t.serve_value.serve_value,callback:function(e){t.$set(t.serve_value,"serve_value",e)},expression:"serve_value.serve_value"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.serve_value.serve_value="",t.addServeValueShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setServeValue}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{"append-to-body":"",title:"标准服务保障",visible:t.addStandardServeShow},on:{"update:visible":function(e){t.addStandardServeShow=e}}},[a("el-checkbox-group",{model:{value:t.standardServeList,callback:function(e){t.standardServeList=e},expression:"standardServeList"}},t._l(t.standardServeData,function(t,e){return a("el-checkbox",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.standardServeList=[],t.addStandardServeShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addStandardServe}},[t._v("确 定")])],1)],1)],1)],1)},i=[],o=(a("ac6a"),a("cebc")),s=a("bd86"),n=a("9ca1"),d=a("c40e"),l=a("d1eb"),u=a("a3ab"),c=a("901e"),p=a.n(c),v=a("086c"),f=a("2f62"),m={data:function(){var t;return t={activeRunStep:0,dialog:!1,imgForm:{imgs:[]},data:{},imgRules:{imgs:[{required:!0,message:"请选择封面",trigger:["blur"]}]},formData:{},skuData:[],goods_id:"",shopList:[],activeShopId:"",serveForm:{deliver_method:"",service:[]}},Object(s["a"])(t,"goods_id",""),Object(s["a"])(t,"serveRules",{deliver_method:[{required:!0,message:"请选择到货方式",trigger:["blur"]}]}),Object(s["a"])(t,"deliveryMethodList",["免费包邮","付费包邮","门店自提","站点自提","付费配送"]),Object(s["a"])(t,"serve_value",{serve_value:""}),Object(s["a"])(t,"serveRules",{serve_value:[{required:!0,message:"请输入服务保障",trigger:"blur"}]}),Object(s["a"])(t,"activeServe",""),Object(s["a"])(t,"addServeValueShow",!1),Object(s["a"])(t,"addStandardServeShow",!1),Object(s["a"])(t,"standardServeList",[]),Object(s["a"])(t,"standardServeData",["7天无理由退货","退货运费险","极速退款","不活包赔（15天）","破损包补","免费养护指导","特价处理不退换"]),t},components:{formCovers:n["default"],formAttr:u["default"],formSku:v["default"]},activated:function(){},watch:{},created:function(){},mounted:function(){},computed:Object(o["a"])({},Object(f["b"])(["base_img"])),methods:{editServe:function(t,e){this.serve_value.serve_value=t,this.activeServe=e,this.addServeValueShow=!0},delServe:function(t){this.serveForm.service.splice(t,1)},addStandardServe:function(){var t=this;console.log(this.standardServeList),this.standardServeList.map(function(e,a){t.serveForm.service.push(e)}),this.standardServeList=[],this.addStandardServeShow=!1},setServeValue:function(){var t=this;this.$refs["addServeValueData"].validate(function(e){e&&("string"==typeof t.activeServe?t.serveForm.service.push(t.serve_value.serve_value):(t.$set(t.serveForm.service,t.activeServe,t.serve_value.serve_value),t.activeServe=""),t.serve_value={serve_value:""},t.addServeValueShow=!1)})},serveGet:function(){var t=this;Object(d["G"])({goods_id:this.data.goods_id}).then(function(e){t.serveForm.deliver_method=e.data.deliver_method,t.serveForm.service=e.data.service?JSON.parse(e.data.service):[]})},serveSubmit:function(){var t=this;this.$refs["serveForm"].validate(function(e){if(e){console.log("验证通过");var a={};a.deliver_method=t.serveForm.deliver_method,a.service=JSON.stringify(t.serveForm.service),a.goods_id=t.data.goods_id,t.setServe(a)}else console.log("验证失败")})},setServe:function(t){var e=this;Object(d["J"])(t).then(function(t){0==t.code&&e.$message({message:"设置成功",type:"success"}),e.getSkuShops(),e.activeRunStep+=1})},skuNextStep:function(){this.activeRunStep=0,this.dialog=!1},selectShop:function(t){this.activeShopId=t+"",this.goodsSkuGet()},getSkuShops:function(){var t=this;Object(d["m"])({goods_id:this.data.goods_id}).then(function(e){t.shopList=e.data,t.activeShopId=t.shopList[0].shop_id+"",t.goodsSkuGet()})},formatPirce:function(t){return t?new p.a(t).dividedBy(new p.a(100)).toNumber():0},edit:function(t){this.formData=JSON.parse(JSON.stringify(t)),this.$refs.sku.open(this.formData)},goodsSkuGet:function(){var t=this;Object(d["z"])({shop_id:this.activeShopId,goods_id:this.data.goods_id}).then(function(e){0==e.code&&(e.data.forEach(function(t){}),t.skuData=e.data)})},attrNextSetp:function(){var t=this,e=this.data,a=e.attrs,r=e.goods_id;a.forEach(function(e){if(!e||0==e.values.length)throw t.$message({message:"规格名称 ".concat(e.attr_name," ，缺少规格值"),type:"warning"}),"规格名称 ".concat(e.attr_name," ，缺少规格值");delete e.attr_id,delete e.create_time,delete e.goods_id,e.values.forEach(function(t){delete t.attr_id,delete t.attr_value_id,delete t.create_time})}),a=JSON.stringify(a),Object(d["p"])({attrs:a,goods_id:r}).then(function(e){0==e.code&&(t.$message({message:"重置成功",type:"success"}),t.$parent.refresh(),t.activeRunStep+=1)})},uploadVideo:function(t){var e=this;console.log(t),this.$message({type:"warning",message:"视频上传中, 请稍后",duration:0,iconClass:"el-icon-loading"}),Object(l["x"])({file:t.file,type:2}).then(function(t){e.$message.close(),0==t.code?e.imgForm.video=t.data.url:e.$message({type:"error",message:"上传失败"})})},handleRemoveVideo:function(){},beforeUploadVideo:function(t){console.log(t),this.uploadVideo(t)},imgGet:function(){var t=this;Object(d["F"])({goods_id:this.data.goods_id}).then(function(e){console.log(e),t.imgForm.imgs=e.data.imgs?e.data.imgs:[]})},finishCoversChoose:function(t){console.log(t),0!==this.imgForm.imgs.length&&this.$refs.imgForm.validateField("imgs"),this.imgForm.imgs=t},open:function(t){this.data=t,this.imgGet(),this.serveGet(),this.dialog=!0},closedDialog:function(){this.$refs["imgForm"].clearValidate(),this.imgForm={imgs:""},this.$refs["serveForm"].clearValidate(),this.serveForm={deliver_method:"",gift:[]},this.data={},this.activeRunStep=0},imgNextSetp:function(){var t=this;this.$refs["imgForm"].validate(function(e){if(e){console.log("验证通过");var a={};a.imgs=JSON.stringify(t.imgForm.imgs),a.goods_id=t.data.goods_id,t.setImgs(a)}else console.log("验证失败")})},setImgs:function(t){var e=this;Object(d["I"])(t).then(function(t){0==t.code&&(e.$message({message:"设置成功",type:"success"}),e.$emit("refreshList")),e.activeRunStep+=1})}}},h=m,g=(a("ea90"),a("2877")),_=Object(g["a"])(h,r,i,!1,null,"206f09e0",null);e["default"]=_.exports}}]);