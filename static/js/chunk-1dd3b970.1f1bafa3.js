(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dd3b970"],{"167a":function(e,o,t){"use strict";t.r(o);var n=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"addOrModStaff"},[t("el-dialog",{attrs:{title:1==e.dialogType?"编辑员工":"新增员工",visible:e.dialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(o){e.dialog=o},closed:e.closedDialog}},[t("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(o){e.$set(e.form,"name",o)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{type:"tel",placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(o){e.$set(e.form,"phone",o)},expression:"form.phone"}})],1),0==e.dialogType?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(o){e.$set(e.form,"password",o)},expression:"form.password"}})],1):e._e(),t("el-form-item",{attrs:{label:"角色",prop:"role"}},[t("el-radio",{attrs:{label:1},model:{value:e.form.role,callback:function(o){e.$set(e.form,"role",o)},expression:"form.role"}},[e._v("店长")]),t("el-radio",{attrs:{label:2},model:{value:e.form.role,callback:function(o){e.$set(e.form,"role",o)},expression:"form.role"}},[e._v("店员")])],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.dialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},a=[],s=(t("7f7f"),t("e692")),r=t("b4ea"),i={data:function(){return{dialogType:0,dialog:!1,staff_id:null,form:{name:"",phone:"",password:"",role:1},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"blur"}]},checkAll:!1,checkedShops:[],shops:[],isIndeterminate:!0,shopData:[]}},props:{shopId:{type:String,default:function(){return""}}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{handleCheckAllChange:function(e){var o=this;console.log(e),this.checkedShops=[],e&&this.shops.map((function(e,t){o.checkedShops.push(e.shop_id)})),this.isIndeterminate=!1},handleCheckedShopsChange:function(e){console.log(e);var o=e.length;this.checkAll=o===this.shops.length,this.isIndeterminate=o>0&&o<this.shops.length},getShopList:function(){var e=this;Object(s["j"])().then((function(o){0==o.code&&(console.log(o.data),e.shops=o.data.list)}))},open:function(e,o){console.log(o),"mod"==e&&(this.dialogType=1,this.staff_id=o.staff_id,this.form.name=o.name,this.form.phone=o.phone,this.form.role=o.role,console.log(this.form)),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={name:"",phone:"",password:"",role:1},this.dialogType=0,this.staff_id=null},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate((function(o){if(o){console.log("验证通过");var t={};t.name=e.form.name,t.phone=e.form.phone,t.password=e.form.password,t.role=e.form.role,1==e.dialogType?(t.staff_id=e.staff_id,e.modStaff(t)):(t.shop_id=e.shopId,e.addStaff(t))}else console.log("验证失败")}))},modStaff:function(e){var o=this;Object(r["f"])(e).then((function(e){0==e.code&&o.$message({message:"修改员工成功",type:"success"}),o.dialog=!1,o.$parent.refresh()}))},addStaff:function(e){var o=this;Object(r["a"])(e).then((function(e){0==e.code&&o.$message({message:"新增员工成功",type:"success"}),o.dialog=!1,o.$parent.refresh()}))}}},l=i,f=t("2877"),d=Object(f["a"])(l,n,a,!1,null,"1310b6a9",null);o["default"]=d.exports},b4ea:function(e,o,t){"use strict";t.d(o,"a",(function(){return s})),t.d(o,"c",(function(){return r})),t.d(o,"b",(function(){return i})),t.d(o,"g",(function(){return l})),t.d(o,"f",(function(){return f})),t.d(o,"d",(function(){return d}));var n=t("365c"),a={addStaff:"add",getStaffList:"list",delStaff:"del",unbindStaff:"unbind",modStaff:"mod",getWxBind:"wxbind",staffActive:"active"};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.addStaff,e,"api/staff")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.getStaffList,e,"api/staff")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.delStaff,e,"api/staff")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.unbindStaff,e,"api/staff")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.modStaff,e,"api/staff")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(a.getWxBind,e,"api/staff")}}}]);