(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e61fa2"],{"1dae":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addOrModForm"},[s("el-dialog",{attrs:{title:t.dialogTitle,visible:t.show,top:"20px",width:"40%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[s("div",{staticClass:"scrollBox"},[s("div",{staticClass:"fromOption"},[s("div",{staticClass:"option"},[s("div",{staticClass:"titleInput"},[s("div",{staticStyle:{color:"#24acf2",width:"70px"}},[t._v("表单标题")]),s("div",{staticStyle:{margin:"0 10px",color:"#dd001b"}},[t._v("*")]),s("el-input",{attrs:{placeholder:"请输入表单标题",border:"none"},model:{value:t.formName,callback:function(e){t.formName=e},expression:"formName"}})],1)])]),s("div",{staticClass:"fromOption"},[s("div",{staticClass:"option"},[s("div",{staticClass:"titleInput"},[s("div",{staticStyle:{color:"#24acf2",width:"70px"}},[t._v("表单代码")]),s("div",{staticStyle:{margin:"0 10px",color:"#dd001b"}},[t._v("*")]),s("el-input",{attrs:{placeholder:"请输入表单代码",border:"none"},model:{value:t.formCode,callback:function(e){t.formCode=e},expression:"formCode"}})],1)])]),t._l(t.specList,(function(e,i){return s("div",{key:i,staticClass:"fromOption"},[s("div",{staticClass:"option"},[s("div",{staticClass:"titleInput"},[t._v("\n            "+t._s(i+1)+". \n            "),s("div",{staticStyle:{color:"#24acf2",width:"70px"}},[t._v("["+t._s(t.handleTitle(e.value_type))+"]")]),s("div",{staticStyle:{margin:"0 10px"},style:{color:1==e.is_must?"#dd001b":"#fff"}},[t._v("*")]),s("el-input",{attrs:{placeholder:"请输入标题",border:"none"},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"item.name"}})],1),4==e.value_type||5==e.value_type?s("div",{staticClass:"optionValue"},[t._l(e.options,(function(o,n){return s("div",{key:n,staticClass:"valueItem"},[s("i",{staticClass:"el-icon-remove-outline",style:{fontSize:"20px",color:e.options.length>2?"#dd001b":"#ddd"},on:{click:function(e){return t.delOption(i,n)}}}),s("div",{staticClass:"valueInput"},[s("div",[s("el-input",{attrs:{disabledColor:"#ffffff",border:"none",placeholder:"请输入选项值"},model:{value:t.specList[i].options[n].value,callback:function(e){t.$set(t.specList[i].options[n],"value",e)},expression:"specList[index].options[oIndex].value"}})],1),s("div",{staticClass:"scoreBox"},[s("div",{staticStyle:{color:"#24acf2",width:"70px"}},[t._v("分数")]),s("el-input",{attrs:{placeholder:"请输入分数",border:"none",type:"Number"},model:{value:t.specList[i].options[n].score,callback:function(e){t.$set(t.specList[i].options[n],"score",e)},expression:"specList[index].options[oIndex].score"}})],1)])])})),s("div",{staticClass:"valueControl",on:{click:function(e){return t.addOption(i)}}},[s("div",{staticStyle:{"margin-right":"20px"}},[s("i",{staticClass:"el-icon-circle-plus-outline"})]),t._v("\n              添加选项\n            ")])],2):t._e(),s("div",{staticClass:"optionControl"},[s("div",{staticClass:"controlLeft"},[s("div",{staticClass:"requireBtn",on:{click:function(e){return t.handleRequired(i)}}},[s("div",{staticClass:"rIcon"},[1==e.is_must?s("i",{staticClass:"el-icon-circle-check"}):t._e()]),s("span",{staticStyle:{"margin-right":"20px"}},[t._v("必填")])])]),s("div",{staticClass:"controlRight"},[s("el-button",{attrs:{size:"mini",disabled:0==i},on:{click:function(e){return t.contentUp(i)}}},[t._v("上移")]),s("div",{staticStyle:{padding:"0 6px"}},[s("el-button",{attrs:{size:"mini",disabled:i==t.specList.length-1},on:{click:function(e){return t.contentDown(i)}}},[t._v("下移")])],1),s("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除这一条消息吗？"},on:{confirm:function(e){return t.comfirmDel(i)}}},[s("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("删除")])],1)],1)])])])})),s("div",{staticClass:"fromOption"},[s("div",{staticClass:"addOption",on:{click:function(e){t.showTypeSelect=!0}}},[s("i",{staticClass:"el-icon-circle-plus-outline"}),s("span",{staticStyle:{"margin-left":"20px"}},[t._v("添加信息")])])]),s("span",{staticClass:"dialog-footer"},[s("el-button",{on:{click:t.closed}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.saveJoinSet}},[t._v("确 定")])],1)],2)]),s("el-dialog",{attrs:{title:"类型选择",visible:t.showTypeSelect,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.showTypeSelect=e}}},[s("div",{staticClass:"addPopBox"},[s("el-row",{attrs:{gutter:20}},t._l(t.typeList,(function(e,i){return s("el-col",{key:i,attrs:{span:8}},[s("div",{staticClass:"gridItem",on:{click:function(s){return t.toAddSpec(e)}}},[t._v(t._s(e.name))])])})),1)],1)])],1)},o=[],n=(s("7f7f"),s("a5b6")),a={data:function(){return{dialogTitle:"新增表单",show:!1,showDelTip:!1,showTypeSelect:!1,specList:[],formName:"",formCode:"",typeList:[{name:"文字输入",value_type:"1"},{name:"日期",value_type:"2"},{name:"地区",value_type:"3"},{name:"单选",value_type:"4"},{name:"多选",value_type:"5"},{name:"图片",value_type:"6"}],showAddMenu:!1,commonMes:[{name:"姓名",type:"1"},{name:"手机号",type:"1"},{name:"地址",type:"1"},{name:"性别",type:"4"},{name:"微信号",type:"1"},{name:"民族",type:"1"},{name:"出生日期",type:"2"},{name:"邮箱",type:"1"},{name:"身份证号",type:"1"},{name:"证件照",type:"6"},{name:"学校",type:"1"},{name:"院系",type:"1"},{name:"班级",type:"1"},{name:"学号",type:"1"},{name:"工号",type:"1"},{name:"公司",type:"1"},{name:"部门",type:"1"},{name:"单位",type:"1"},{name:"职位",type:"1"}],tipMes:"",showTip:!1,type:"add"}},components:{},filters:{},onShow:function(){},mounted:function(){},computed:{},methods:{open:function(t,e){"mod"==t&&(this.dialogTitle="编辑表单",this.specList=JSON.parse(e.forms),this.form_id=e.form_id,this.formName=e.name,this.formCode=e.form_code,this.type="mod"),this.show=!0},closed:function(){this.specList=[],this.form_id=null,this.formName="",this.formCode="",this.type="add",this.show=!1},testChange:function(t,e){console.log(t,e),this.specList[e].name=t},addOption:function(t){this.specList[t].options.push({value:"",socre:""})},delOption:function(t,e){this.specList[t].options.length>2&&this.specList[t].options.splice(e,1)},handleTitle:function(t){switch(t){case"1":return"填写项";case"2":return"日期";case"3":return"地区";case"4":return"单选";case"5":return"多选";case"6":return"图片";default:return"填写项"}},contentUp:function(t){t-1>=0&&this.handleChangeOrder(this.specList,t,t-1)},contentDown:function(t){t+1<this.specList.length&&this.handleChangeOrder(this.specList,t,t+1)},handleChangeOrder:function(t,e,s){return t[e]=t.splice(s,1,t[e])[0],t},handleRequired:function(t){1==this.specList[t].is_must?this.specList[t].is_must=0:this.specList[t].is_must=1},saveJoinSet:function(){var t=this;if(console.log(this.specList),""!=this.formName.trim())if(""!=this.formCode.trim()){for(var e=0;e<this.specList.length;e++){var s=this.specList[e];if(console.log(s.name),""==s.name.trim())return void this.$message({message:"请完善第".concat(e+1,"项标题"),type:"warning"});if(4==s.value_type||5==s.value_type)for(var i=0;i<s.options.length;i++){var o=s.options[i];if(""==o.value.trim())return void this.$message({message:"请完善第".concat(e+1,"项中第").concat(i+1,"项选项值"),type:"warning"});if(""==o.score.trim())return void this.$message({message:"请完善第".concat(e+1,"项中第").concat(i+1,"项分数值"),type:"warning"})}}var a=JSON.stringify(this.specList);console.log(a),"mod"==this.type?Object(n["d"])({name:this.formName,form_code:this.formCode,forms:a,form_id:this.form_id}).then((function(e){0==e.code&&(t.$message({message:"修改表单成功",type:"success"}),t.show=!1,t.$parent.refreshPage())})):Object(n["a"])({name:this.formName,form_code:this.formCode,forms:a}).then((function(e){0==e.code&&(t.$message({message:"新增表单成功",type:"success"}),t.show=!1,t.$parent.refreshPage())}))}else this.$message({message:"请完善表单代码",type:"warning"});else this.$message({message:"请完善表单标题",type:"warning"})},comfirmDel:function(t){this.specList.splice(t,1)},toAddSpec:function(t){this.showTypeSelect=!1,4==t.value_type||5==t.value_type?this.specList.push({name:"",is_must:1,options:[{value:"",score:""},{value:"",score:""}],value_type:t.value_type}):this.specList.push({name:"",is_must:1,value_type:t.value_type})}}},c=a,l=(s("be8e"),s("2877")),r=Object(l["a"])(c,i,o,!1,null,"df6fea04",null);e["default"]=r.exports},"56d0":function(t,e,s){},a5b6:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"d",(function(){return a})),s.d(e,"c",(function(){return c})),s.d(e,"b",(function(){return l}));var i=s("365c"),o={addForm:"add",formsList:"list",modForm:"mod",delForm:"del"};function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["a"].post(o.addForm,t,"api/forms")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["a"].post(o.modForm,t,"api/forms")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["a"].post(o.formsList,t,"api/forms")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i["a"].post(o.delForm,t,"api/forms")}},be8e:function(t,e,s){"use strict";var i=s("56d0"),o=s.n(i);o.a}}]);