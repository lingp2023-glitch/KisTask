(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36a4ddb0","chunk-245294d0","chunk-30cdee74"],{"60c1":function(t,o,e){"use strict";var n=e("9b51"),i=e.n(n);i.a},6105:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("media-library",{ref:"mediaLibrary",attrs:{active:"1",title:"图片库"}}),e("div",{staticClass:"imgFlex"},[t._l(t.imgs,function(o,n){return e("div",{key:n,staticClass:"img-wrap"},[e("div",{staticClass:"img-item"},[e("i",{staticClass:"el-icon-close img-close",on:{click:function(o){return t.del_cover(n)}}}),e("BaseElImage",{attrs:{custom_src:o,previewList:[o],fit:"cover"}})],1)])}),t.imgs.length<t.limit?e("div",{staticClass:"img-add",on:{click:function(o){return t.$refs.mediaLibrary.open()}}},[e("i",{staticClass:"el-icon-plus img-add-icon"})]):t._e()],2)],1)},i=[],r=(e("c5f6"),e("daf4")),s={components:{mediaLibrary:r["a"]},props:{imgs:{type:[Object,Array],default:function(){return[]}},limit:{type:Number,default:function(){return 9}}},data:function(){return{srcCovers:[]}},mounted:function(){var t=this;this.$bus.$on("finishCoverSelectMed",function(o){t.getData(o)})},beforeDestroy:function(){this.$bus.$off("finishCoverSelectMed")},methods:{getData:function(t){this.imgs.push(t.src_file),this.$emit("update:imgs",this.imgs),this.$emit("finishChoose",this.imgs),this.$refs.mediaLibrary.handleClose()},del_cover:function(t){this.imgs.splice(t,1),console.log(this.imgs),this.$emit("update:imgs",this.imgs),this.$emit("finishChoose",this.imgs)}}},u=s,d=(e("60c1"),e("2877")),a=Object(d["a"])(u,n,i,!1,null,"3255d3d6",null);o["default"]=a.exports},"7ea7":function(t,o,e){"use strict";var n=e("c187"),i=e.n(n);i.a},8726:function(t,o,e){"use strict";e.r(o);var n=e("6105");o["default"]=n["default"]},"9b51":function(t,o,e){},c187:function(t,o,e){},c40e:function(t,o,e){"use strict";e.d(o,"c",function(){return r}),e.d(o,"m",function(){return s}),e.d(o,"i",function(){return u}),e.d(o,"J",function(){return d}),e.d(o,"G",function(){return a}),e.d(o,"I",function(){return g}),e.d(o,"F",function(){return c}),e.d(o,"w",function(){return f}),e.d(o,"t",function(){return l}),e.d(o,"r",function(){return p}),e.d(o,"u",function(){return m}),e.d(o,"s",function(){return v}),e.d(o,"o",function(){return h}),e.d(o,"v",function(){return b}),e.d(o,"x",function(){return y}),e.d(o,"q",function(){return C}),e.d(o,"p",function(){return G}),e.d(o,"A",function(){return S}),e.d(o,"z",function(){return L}),e.d(o,"y",function(){return k}),e.d(o,"B",function(){return $}),e.d(o,"n",function(){return _}),e.d(o,"K",function(){return A}),e.d(o,"L",function(){return D}),e.d(o,"g",function(){return w}),e.d(o,"h",function(){return x}),e.d(o,"a",function(){return M}),e.d(o,"b",function(){return j}),e.d(o,"f",function(){return I}),e.d(o,"j",function(){return O}),e.d(o,"H",function(){return P}),e.d(o,"d",function(){return T}),e.d(o,"e",function(){return V}),e.d(o,"l",function(){return q}),e.d(o,"k",function(){return E}),e.d(o,"C",function(){return F}),e.d(o,"E",function(){return J}),e.d(o,"D",function(){return R});var n=e("365c"),i={groupList:"groupList",groupAdd:"groupAdd",groupMod:"groupMod",groupDel:"groupDel",goodsGroupList:"groupList",goodsGroupAdd:"groupAdd",goodsGroupMod:"groupMod",goodsGroupDel:"groupDel",goodsGroupTree:"groupTree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList",setGoodsTop:"topSet",draftGet:"draftGet",draftSet:"draftSet",profitList:"profitList",imgGet:"imgsGet",setImgs:"imgsSet",serveGet:"serviceGet",setServe:"serviceSet",getAttrs:"attrs",getSkuShops:"skuShops",checkGoods:"check"};function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.checkGoods,t,"gm/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getSkuShops,t,"gm/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.getAttrs,t,"gm/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.setServe,t,"gm/goods")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.serveGet,t,"gm/goods")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.setImgs,t,"gm/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.imgGet,t,"gm/goods")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsList,t,"gm/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsGroupList,t,"gm/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsGroupAdd,t,"gm/goods")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsGroupMod,t,"gm/goods")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsGroupDel,t,"gm/goods")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsAdd,t,"gm/goods")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsGroupTree,t,"gm/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsMod,t,"gm/goods")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsDel,t,"gm/goods")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsAttrSet,t,"gm/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsSkuSet,t,"gm/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsSkuGet,t,"gm/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsRun,t,"gm/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.goodsStop,t,"gm/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(i.topList,t,"gm/goods")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(i.setTop,t,"gm/goods")}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(i.topCancel,t,"gm/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.applyList,t,"gm/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.applyPool,t,"gm/goods")}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.applyCalc,t,"gm/goods")}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.applyPut,t,"gm/goods")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.fixPut,t,"gm/goods")}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.fixList,t,"gm/goods")}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.setGoodsTop,t,"gm/goods")}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.draftGet,t,"gm/goods")}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.draftSet,t,"gm/goods")}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.profitList,t,"gm/goods")}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.groupList,t,"gm/goods")}function F(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.groupAdd,t,"gm/goods")}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.groupMod,t,"gm/goods")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(i.groupDel,t,"gm/goods")}},d15f:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"setImg"},[e("el-dialog",{attrs:{title:"图片设置",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(o){t.dialog=o},closed:t.closedDialog}},[e("el-form",{ref:"form",attrs:{"label-width":"110px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"商品视频",prop:"video"}},[e("el-upload",{ref:"videoUpload",staticClass:"auditingImage-uploader",attrs:{action:"","http-request":t.beforeUploadVideo,"on-remove":t.handleRemoveVideo,accept:"video/mp4","show-file-list":!1}},[e("el-link",{attrs:{type:"primary"}},[t._v(t._s(t.form.video?t.form.video:"上传视频"))])],1)],1),e("el-form-item",{attrs:{label:"商品图片",prop:"imgs"}},[e("formCovers",{attrs:{imgs:t.form.imgs},on:{"update:imgs":function(o){return t.$set(t.form,"imgs",o)},finishChoose:t.finishCoversChoose}})],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){t.dialog=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},i=[],r=e("cebc"),s=e("8726"),u=e("c40e"),d=e("d1eb"),a=e("2f62"),g={data:function(){return{type:"",dialog:!1,form:{imgs:[],video:""},data:{},rules:{imgs:[{required:!0,message:"请选择封面",trigger:["blur"]}],video:[{required:!0,message:"请选择视频",trigger:["blur"]}]}}},components:{formCovers:s["default"]},activated:function(){},watch:{},created:function(){},mounted:function(){},computed:Object(r["a"])({},Object(a["b"])(["base_img"])),methods:{uploadVideo:function(t){var o=this;console.log(t),this.$message({type:"warning",message:"视频上传中, 请稍后",duration:0,iconClass:"el-icon-loading"}),Object(d["x"])({file:t.file,type:2}).then(function(t){o.$message.close(),0==t.code?o.form.video=t.data.url:o.$message({type:"error",message:"上传失败"})})},handleRemoveVideo:function(){},beforeUploadVideo:function(t){console.log(t),this.uploadVideo(t)},imgGet:function(){var t=this;Object(u["F"])({goods_id:this.data.goods_id}).then(function(o){console.log(o),t.form.imgs=o.data.imgs?o.data.imgs:[],t.form.video=o.data.video})},finishCoversChoose:function(t){console.log(t),0!==this.form.imgs.length&&this.$refs.form.validateField("imgs"),this.form.imgs=t},open:function(t){this.data=t,this.imgGet(),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={imgs:"",video:""},this.data={}},submit:function(){var t=this;this.$refs["form"].validate(function(o){if(o){console.log("验证通过");var e={};e.video=t.form.video,e.imgs=JSON.stringify(t.form.imgs),e.goods_id=t.data.goods_id,t.setImgs(e)}else console.log("验证失败")})},setImgs:function(t){var o=this;Object(u["I"])(t).then(function(t){0==t.code&&(o.$message({message:"设置成功",type:"success"}),o.$emit("refreshList")),o.dialog=!1})}}},c=g,f=(e("7ea7"),e("2877")),l=Object(f["a"])(c,n,i,!1,null,"5fdf7aaf",null);o["default"]=l.exports}}]);