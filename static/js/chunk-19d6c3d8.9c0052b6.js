(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19d6c3d8","chunk-0759a37a","chunk-6c0b6260","chunk-3a1da272","chunk-cf523fe0","chunk-61c04bb0"],{"2a2d":function(e,t,i){},"31bd":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"doc"},[i("div",{staticClass:"doc-header"},[i("div",{staticClass:"groupTitle"},[i("div",{staticClass:"title"},[e._v("分组列表")]),i("el-popover",{attrs:{placement:"top",width:"300",trigger:"click"},model:{value:e.disabled,callback:function(t){e.disabled=t},expression:"disabled"}},[i("div",{staticClass:"addGroup"},[i("div",{staticClass:"addGroupTitle"},[e._v("分组标题")]),i("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入组名"},model:{value:e.group_name,callback:function(t){e.group_name=t},expression:"group_name"}}),i("div",{staticClass:"add-btn"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.disabled=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addResGroup}},[e._v("添加")])],1)],1),i("el-button",{attrs:{slot:"reference",plain:"",type:"primary",size:"mini",icon:"el-icon-plus"},slot:"reference"},[e._v("新增分组")])],1)],1),i("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectDArr.length,expression:"selectDArr.length"}],staticClass:"img-select-list"},[i("div",{staticClass:"len"},[e._v("\n          共选择\n          "),i("el-link",{staticClass:"link-a",attrs:{icon:"el-icon-picture",type:"primary"}},[e._v(e._s(e.selectDArr.length))]),e._v("个图文消息\n        ")],1),i("div",{staticClass:"link-wrap"},[i("el-link",{staticClass:"link-a close",attrs:{icon:"el-icon-close",underline:!1,type:"primary"},on:{click:e.closeDSelect}},[e._v("全部取消")]),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:e.delDSelect}},[i("el-link",{staticClass:"link-a del",attrs:{slot:"reference",icon:"el-icon-delete",underline:!1,type:"danger"},slot:"reference"},[e._v("删除")])],1)],1)])]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.toAdd}},[e._v("新增图文消息")])],1),i("div",{staticClass:"mainContent"},[i("div",{staticClass:"tabWrap"},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.change},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("el-tab-pane",{attrs:{name:"0"}},[i("span",{staticClass:"label",attrs:{slot:"label"},on:{click:e.removeRe},slot:"label"},[e._v("未分组")])]),e._l(e.groupList,function(t){return i("el-tab-pane",{key:t.group_id,attrs:{name:t.group_id}},[i("div",{staticClass:"tabItem",attrs:{slot:"label"},on:{click:function(i){return e.mouseOver(t.group_id)}},slot:"label"},[i("span",{staticClass:"label"},[e._v(e._s(t.group_name))]),i("el-popover",{ref:"labPop",refInFor:!0,attrs:{placement:"right",width:"190",trigger:"click","v-model":e.activeId==t.group_id}},[i("div",{staticClass:"setBtnClass"},[i("el-popover",{ref:"setPop",refInFor:!0,attrs:{placement:"right",width:"300",trigger:"click","v-model":e.activeId==t.group_id},on:{hide:e.hidePopover}},[i("div",{staticClass:"modGroup"},[i("div",{staticClass:"addGroupTitle"},[e._v("分组标题")]),i("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入新组名"},model:{value:e.group_name,callback:function(t){e.group_name=t},expression:"group_name"}}),i("div",{staticClass:"mod-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.modResGroup(t.group_id)}}},[e._v("修改")])],1)],1),i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editTab(t.group_name)}},slot:"reference"},[e._v("编辑")])],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(i){return e.delResGroup(t.group_id)}}},[e._v("删除")])],1),i("i",{directives:[{name:"show",rawName:"v-show",value:e.activeId==t.group_id,expression:"activeId == item.group_id"}],staticClass:"el-icon-setting settingIcon",attrs:{slot:"reference"},nativeOn:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1)])})],2)],1),i("div",{staticClass:"anoCard"},e._l(e.docData.list,function(t,o){return i("div",{key:o,staticClass:"box-card",class:{"border-gray":e.checkDSelect(t.doc_id)},on:{click:function(i){return e.select(t)}}},[i("div",{staticClass:"pic"},[i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.base_img+t.cover,fit:"cover"}})],1),i("div",{staticClass:"name"},[i("i",{staticClass:"el-icon-download preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.doc_url)}}}),i("div",{staticClass:"file_name"},[e._v(e._s(t.title))])]),i("div",{staticClass:"controlBtn"},[i("i",{staticClass:"el-icon-document-copy iconStyel",on:{click:function(i){return i.stopPropagation(),e.copy(t.doc_url)}}}),i("i",{staticClass:"el-icon-edit iconStyel",on:{click:function(i){return i.stopPropagation(),e.edit(t)}}}),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t)}}},[i("i",{staticClass:"el-icon-delete iconStyel",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1),i("div",{staticClass:"checked",class:{"opacity-toggle":e.checkDSelect(t.doc_id)}},[i("i",{staticClass:"el-icon-check icon"})])])}),0)]),i("pagination",{attrs:{data:e.docData},on:{change:e.getDocList}}),i("edit-dia",{ref:"editDia"})],1)},a=[],s=(i("20d6"),i("cebc")),c=i("bd86"),n=i("4632"),r=i("63cd"),l=i("e475"),u=i("d1eb"),d=i("2f62"),p={name:"media.doc",components:{pagination:n["a"],editDia:r["default"]},data:function(){return Object(c["a"])({selectDArr:[],docData:{list:[]},groupList:[],group_name:"",active:"0",disabled:!1,activeId:"",setDisabled:!1},"group_name","")},computed:Object(s["a"])({},Object(d["b"])(["base_img"])),created:function(){this.getDocList(),this.getResGroups()},activated:function(){this.$route.params.refresh&&(this.getDocList(),this.getResGroups(),this.$route.params.refresh=!1)},filters:{},methods:{closeDSelect:function(){this.selectDArr.splice(0,this.selectDArr.length)},delDSelect:function(){var e=this,t=[];this.selectDArr.map(function(e){t.push(e.doc_id)});var i=JSON.stringify(t);Object(l["b"])({docs:i}).then(function(t){0==t.code&&(e.$message({type:"success",message:"删除成功!"}),e.getDocList(1),e.selectDArr.splice(0,e.selectDArr.length))})},checkDSelect:function(e){return this.selectDArr.some(function(t){return t.doc_id==e})},select:function(e){var t=this.selectDArr.findIndex(function(t){return t.doc_id==e.doc_id});-1==t?this.selectDArr.push(e):this.selectDArr.splice(t,1)},hidePopover:function(){console.log("关闭"),this.group_name=""},copy:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},toPre:function(e){window.open(e,"_blank")},modResGroup:function(e){var t=this;console.log(this.group_name,e,"提交新组名"),Object(u["v"])({group_name:this.group_name,group_id:e}).then(function(i){t.$message({message:"修改成功",type:"success"}),t.setDisabled=!1,t.group_name="",t.$refs.setPop.map(function(e,i){e.doClose(),t.$refs.labPop[i].doClose()}),t.getResGroups(e),t.activeId=e,t.active=e})},editTab:function(e){console.log("点击了编辑功能"),this.group_name=e},mouseOver:function(e){console.log(e),this.activeId=e},removeRe:function(){this.activeId=""},toAdd:function(){this.$refs.editDia.open()},change:function(e){this.getDocList()},getResGroups:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";Object(u["o"])({group_type:4}).then(function(i){0==i.code&&(e.groupList=i.data,e.active=t+"")})},delResGroup:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u["i"])({group_id:e}).then(function(e){0==e.code&&(t.$message({message:"删除成功",type:"success"}),t.getResGroups(),t.active="0")})})},addResGroup:function(){var e=this,t=this.group_name,i=this.active;Object(u["d"])({group_type:4,group_name:t,group_id:i}).then(function(t){0==t.code&&(e.$message({message:"添加成功",type:"success"}),e.disabled=!1,e.group_name="",e.getResGroups(t.data.group_id),e.activeId=t.data.group_id)})},getDocList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.active;this.docData={list:[]},Object(l["d"])({page:t,group_id:i}).then(function(t){0==t.code&&t.data&&(e.docData=t.data)})},edit:function(e){console.log(e.doc_id),this.$refs.editDia.open(e.doc_id)},del:function(e){var t=this,i=[];i.push(e.doc_id);var o=JSON.stringify(i);Object(l["b"])({docs:o}).then(function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getDocList())})}}},g=p,f=(i("c61f"),i("2877")),m=Object(f["a"])(g,o,a,!1,null,"6afb86bc",null);t["default"]=m.exports},3272:function(e,t,i){"use strict";var o=i("fc12"),a=i.n(o);a.a},"3d76":function(e,t,i){},"4be0":function(e,t,i){"use strict";var o=i("62d4"),a=i.n(o);a.a},5666:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"head"},[i("static-group",{attrs:{group_type:e.group_type,groupList:e.groupList,group_id:e.group_id}})],1),i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"tabWrap"},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[i("el-tab-pane",{attrs:{name:"0"}},[i("span",{staticClass:"label",attrs:{slot:"label"},on:{click:e.removeRe},slot:"label"},[e._v("未分组")])]),e._l(e.groupList,function(t){return i("el-tab-pane",{key:t.group_id,attrs:{name:t.group_id}},[i("div",{staticClass:"tabItem",attrs:{slot:"label"},on:{click:function(i){return e.mouseOver(t.group_id)}},slot:"label"},[i("span",{staticClass:"label"},[e._v(e._s(t.group_name))]),i("el-popover",{ref:"labPop",refInFor:!0,attrs:{placement:"right",width:"190",trigger:"click","v-model":e.activeId==t.group_id}},[i("div",{staticClass:"setBtnClass"},[i("el-popover",{ref:"setPop",refInFor:!0,attrs:{placement:"right",width:"300",trigger:"click","v-model":e.activeId==t.group_id},on:{show:e.operateChange,hide:e.operateChange}},[i("div",{staticClass:"modGroup"},[i("div",{staticClass:"addGroupTitle"},[e._v("分组标题")]),i("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入新组名"},model:{value:e.group_name,callback:function(t){e.group_name=t},expression:"group_name"}}),i("div",{staticClass:"mod-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.modResGroup(t.group_id)}}},[e._v("修改")])],1)],1),i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editTab(t.group_name)}},slot:"reference"},[e._v(e._s(e.controlOperate))])],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(i){return e.removeTab(t.group_id)}}},[e._v("删除")])],1),i("i",{directives:[{name:"show",rawName:"v-show",value:e.activeId==t.group_id,expression:"activeId == item.group_id"}],staticClass:"el-icon-setting settingIcon",attrs:{slot:"reference"},nativeOn:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1)])})],2)],1),i(e.PageComponent,{tag:"component",attrs:{pageData:e.pageData,group_type:e.group_type,groupList:e.groupList}})],1),i("pagination",{attrs:{data:e.pageData},on:{change:e.getPageData}})],1)},a=[],s=(i("20d6"),i("4632")),c=i("d1eb"),n=i("c48f"),r=i("a030"),l=i("c2b0"),u={components:{ImgPage:n["default"],AudioPage:r["default"],StaticGroup:l["default"],pagination:s["a"]},provide:function(){return{getPageData:this.getPageData,refreshPage:this.refreshPage,getResGroups:this.getResGroups,selectArr:this.selectArr,selectVArr:this.selectVArr,selectAArr:this.selectAArr,selectFArr:this.selectFArr,selectDArr:this.selectDArr,pageData:this.pageData}},props:{group_type:{type:String,required:!0},active:{required:!0,default:function(){return 0}}},data:function(){return{group_id:"0",frist:!0,groupList:[],pageData:{},selectArr:[],selectVArr:[],selectAArr:[],selectFArr:[],selectDArr:[],activeId:"",setDisabled:!1,group_name:"",operate:!0}},computed:{controlOperate:function(){return this.operate?"编辑":"取消"},PageComponent:function(){switch(this.active){case"1":return"ImgPage";default:return"AudioPage"}}},watch:{active:{handler:function(e){this.frist&&e==this.group_type&&(this.frist=!1,this.getResGroups())},immediate:!0}},created:function(){},beforeDestroy:function(){console.log("销毁finishAdd"),this.$bus.$off("finishAddView")},mounted:function(){var e=this;this.$bus.$on("finishAddView",function(t){e.activeId=t})},methods:{operateChange:function(){console.log("1112"),this.operate=!this.operate},modResGroup:function(e){var t=this;console.log(this.group_name,e,"提交新组名"),Object(c["v"])({group_name:this.group_name,group_id:e}).then(function(i){t.$message({message:"修改成功",type:"success"}),t.setDisabled=!1,t.group_name="",t.$refs.setPop.map(function(e,i){e.doClose(),t.$refs.labPop[i].doClose()}),t.activeId=e,t.group_id=e,t.getResGroups(e),console.log(e,"group_id")})},editTab:function(e){console.log("点击了编辑功能"),this.group_name=e},mouseOver:function(e){console.log(e),this.activeId=e},removeRe:function(){this.activeId=""},handleClick:function(){this.getPageData(1)},removeTab:function(e){var t=this,i=this.groupList.findIndex(function(t){return t.group_id==e});this.$confirm("此操作将删除 ".concat(this.groupList[i].group_name," 分组, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c["i"])({group_id:e}).then(function(e){0==e.code&&(t.groupList.splice(i,1),t.$message({type:"success",message:"删除成功!"}),t.group_id="0",t.handleClick())})})},getResGroups:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",i=this.group_type;Object(c["o"])({group_type:i}).then(function(i){0==i.code&&(e.groupList=i.data,e.group_id=t+"",e.handleClick())},function(e){console.log(res)})},getPageData:function(e){switch(this.active){case"1":this.getImgList(e);break;case"2":this.getAudioList(e);break;case"3":this.getVideoList(e);break;case"4":this.getFileList(e);break;default:break}},refreshPage:function(){this.getPageData(this.pageData.page)},getImgList:function(e){var t=this,i=this.group_id;Object(c["n"])({group_id:i,page:e}).then(function(e){0==e.code&&(t.pageData=e.data)},function(e){console.log(e)})},getAudioList:function(e){var t=this,i=this.group_id;Object(c["l"])({group_id:i,page:e}).then(function(e){0==e.code&&(t.pageData=e.data||{})},function(e){console.log(e)})},getVideoList:function(e){var t=this,i=this.group_id;Object(c["r"])({group_id:i,page:e}).then(function(e){0==e.code&&(t.pageData=e.data||{})},function(e){console.log(e)})},getFileList:function(e){var t=this,i=this.group_id;Object(c["m"])({group_id:i,page:e}).then(function(e){0==e.code&&(t.pageData=e.data||{})},function(e){console.log(e)})}}},d=u,p=(i("bbab"),i("2877")),g=Object(p["a"])(d,o,a,!1,null,"7c561e20",null);t["default"]=g.exports},"570f":function(e,t,i){},"62d4":function(e,t,i){},"63cd":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editDia"},[i("el-dialog",{attrs:{title:e.title,width:"90vw",top:"3vh",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("picture-library",{ref:"pic",on:{getData:e.setCover}}),i("el-card",{staticClass:"anoCard"},[i("div",{staticClass:"box"},[i("div",{staticClass:"cover",on:{click:function(t){return e.$refs.pic.open(!1)}}},[e.docData.cover?[i("BaseElImage",{attrs:{custom_style:{width:"100%",height:"100%"},custom_src:e.docData.cover,fit:"cover"}})]:[i("div",{staticClass:"coverTips"},[i("i",{staticClass:"el-icon-picture"}),e._v("\n            点击选择封面\n          ")])]],2),i("div",{staticClass:"doc-form"},[i("el-form",{attrs:{"label-position":"right","label-width":"0",model:e.docData}},[i("el-form-item",{attrs:{label:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.docData.title,expression:"docData.title"}],staticClass:"my-input title",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:e.docData.title},on:{input:function(t){t.target.composing||e.$set(e.docData,"title",t.target.value)}}})]),i("el-form-item",{attrs:{label:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.docData.author,expression:"docData.author"}],staticClass:"my-input author",attrs:{type:"text",placeholder:"请输入作者"},domProps:{value:e.docData.author},on:{input:function(t){t.target.composing||e.$set(e.docData,"author",t.target.value)}}})]),i("el-form-item",{attrs:{label:""}},[i("el-input",{staticClass:"my-input summary",attrs:{type:"textarea",rows:4,placeholder:"请输入摘要"},model:{value:e.docData.summary,callback:function(t){e.$set(e.docData,"summary",t)},expression:"docData.summary"}})],1),i("el-form-item",{attrs:{label:""}},[i("u-e",{ref:"quill",on:{senHtml:e.getHtml,UECover:e.UECover}})],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"submitWrap"},[i("div",{staticStyle:{"margin-right":"20px"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.docData.group_id,callback:function(t){e.$set(e.docData,"group_id",t)},expression:"docData.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})],2)],1),this.doc_id?i("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary"},on:{click:e.check_docData}},[e._v("编辑")]):i("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary"},on:{click:e.check_docData}},[e._v("发布")])],1)])],1)],1)])])],1)],1)},a=[],s=i("cebc"),c=i("cf2d"),n=i("0bba"),r=i("e475"),l=(i("3022"),{name:"media.edit",components:{UE:c["a"],PictureLibrary:n["a"]},data:function(){return{dialogVisible:!1,videoSelectModal:!1,groupList:[],doc_id:"",docData:{author:"",title:"",summary:"",cover:"",content:"",group_id:"0"}}},computed:{title:function(){return this.doc_id?"编辑图文消息":"新增图文消息"}},created:function(){this.getResGroups()},filters:{},methods:{open:function(e){e?(this.doc_id=e,this.getDoc()):this.doc_id="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.docData={author:"",title:"",summary:"",cover:"",content:"",group_id:"0"},console.log("关闭弹窗")},UECover:function(e){this.docData.cover||(this.docData.cover=e)},getResGroups:function(){var e=this;Object(r["e"])({group_type:4}).then(function(t){0==t.code&&(e.groupList=t.data)})},setCover:function(e){console.log(e),this.docData.cover=e.src_file},getHtml:function(e){this.docData.content=e},check_docData:function(){""!==this.docData.title?""!==this.docData.author?""!==this.docData.content?""!==this.docData.summary?""!==this.docData.cover?this.doc_id?this.modDoc():this.addDoc():this.$message({message:"请选择封面",type:"warning"}):this.$message({message:"请输入摘要",type:"warning"}):this.$message({message:"请输入内容",type:"warning"}):this.$message({message:"请输入作者",type:"warning"}):this.$message({message:"请输入标题",type:"warning"})},addDoc:function(){var e=this;Object(r["a"])(Object(s["a"])({},this.docData)).then(function(t){0==t.code&&e.$message({message:"发布成功",type:"success",duration:1e3}),e.dialogVisible=!1,e.$parent.getDocList()},function(e){})},modDoc:function(){var e=this;Object(r["f"])(Object(s["a"])({},this.docData)).then(function(t){e.$message({message:"编辑成功",type:"success",duration:1e3}),e.dialogVisible=!1,e.$parent.getDocList()},function(e){})},getDoc:function(){var e=this;Object(r["c"])({doc_id:this.doc_id}).then(function(t){0==t.code&&(e.docData=t.data,e.$refs.quill.setContent(t.data.content))},function(e){console.log(e)})}}}),u=l,d=(i("aa94"),i("2877")),p=Object(d["a"])(u,o,a,!1,null,"a116fe28",null);t["default"]=p.exports},6842:function(e,t,i){"use strict";var o=i("7bae"),a=i.n(o);a.a},"7bae":function(e,t,i){},"89f4":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sizeTip"},[i("span",{staticClass:"tipItem"},[e._v("总容量："+e._s(e.change(e.maxSize)))]),i("span",{staticClass:"tipItem"},[e._v("已用容量："+e._s(e.change(e.usedSize)))]),i("span",{staticClass:"tipItem"},[e._v("图片："+e._s(e.change(e.imgSize)))]),i("span",{staticClass:"tipItem"},[e._v("音频："+e._s(e.change(e.audioSize)))]),i("span",{staticClass:"tipItem"},[e._v("视频："+e._s(e.change(e.videoSize)))])])},a=[],s=(i("c5f6"),i("d1eb")),c={data:function(){return{maxSize:"",audioSize:"",imgSize:"",usedSize:"",videoSize:""}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){this.getResSize()},computed:{},methods:{getResSize:function(){var e=this;Object(s["p"])().then(function(t){0==t.code&&(e.maxSize=t.data.MAX_SIZE,e.audioSize=t.data.audio_size,e.imgSize=t.data.img_size,e.usedSize=t.data.used_size,e.videoSize=t.data.video_size)})},change:function(e){e=Number(e);var t="";t=(e/1048576).toFixed(2)+"MB";var i=t+"",o=i.indexOf("."),a=i.substr(o+1,2);return"00"==a?i.substring(0,o)+i.substr(o+3,2):t}}},n=c,r=(i("3272"),i("2877")),l=Object(r["a"])(n,o,a,!1,null,"49c46736",null);t["default"]=l.exports},a030:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pageContent"},[e._l(e.pageData.list,function(t,o){return i("div",{key:o,staticClass:"box-card",class:{"border-gray":e.checkSelect(t.video_id)||e.checkASelect(t.audio_id)||e.checkFSelect(t.file_id)},on:{click:function(i){return e.select(t)}}},[i("div",{staticClass:"pic"},[3==e.group_type?i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.base_img+t.cover,fit:"cover"}}):2==e.group_type?i("div",{staticClass:"default",staticStyle:{width:"90%",height:"100%"}},[i("i",{staticClass:"el-icon-microphone"})]):4==e.group_type?i("div",{staticClass:"default",staticStyle:{width:"90%",height:"100%"}},[i("i",{staticClass:"el-icon-document"})]):e._e()],1),i("div",{staticClass:"name"},[4==e.group_type?i("i",{staticClass:"el-icon-download preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),3==e.group_type?i("i",{staticClass:"el-icon-video-play preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),2==e.group_type?i("i",{staticClass:"el-icon-headset preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),i("div",{staticClass:"file_name"},[e._v(e._s(t.file_name))])]),i("div",{staticClass:"controlBtn"},[4==e.group_type?i("i",{staticClass:"el-icon-document-copy iconStyel",on:{click:function(i){return i.stopPropagation(),e.copy(t.file)}}}):e._e(),i("i",{staticClass:"el-icon-edit iconStyel",on:{click:function(i){return i.stopPropagation(),e.edit(t)}}}),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t)}}},[i("i",{staticClass:"el-icon-delete iconStyel",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1),i("div",{staticClass:"checked",class:{"opacity-toggle":e.checkSelect(t.video_id)||e.checkASelect(t.audio_id)||e.checkFSelect(t.file_id)}},[i("i",{staticClass:"el-icon-check icon"})])])}),i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"auto"}},[i("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:e.ruleForm.group_id,callback:function(t){e.$set(e.ruleForm,"group_id",t)},expression:"ruleForm.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})],2)],1),i("el-form-item",{attrs:{label:"名称",prop:"file_name"}},[i("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.file_name,callback:function(t){e.$set(e.ruleForm,"file_name",t)},expression:"ruleForm.file_name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确 定")])],1)],1),i("picture-library",{ref:"pic",on:{getData:e.setCover}})],2)},a=[],s=(i("20d6"),i("cebc")),c=i("2f62"),n=i("0bba"),r=i("d1eb"),l={delAudio:r["f"],modAudio:r["s"],modVideo:r["w"],delVideo:r["j"],modFile:r["t"],delFile:r["g"]},u={inject:["selectVArr","selectAArr","selectFArr","getPageData"],props:["pageData","group_type","groupList"],components:{PictureLibrary:n["a"]},data:function(){return{selectArr:[],dialogVisible:!1,ruleForm:{group_id:"",file_name:""}}},computed:Object(s["a"])({},Object(c["b"])(["base_img"]),{row_id:function(){switch(this.group_type){case"2":return"audio_id";case"3":return"video_id";case"4":return"file_id";default:return""}},mtd:function(){switch(this.group_type){case"2":return{del:"delAudio",mod:"modAudio"};case"3":return{del:"delVideo",mod:"modVideo"};case"4":return{del:"delFile",mod:"modFile"};default:return""}}}),methods:{checkSelect:function(e){return this.selectVArr.some(function(t){return t.video_id==e})},checkASelect:function(e){return this.selectAArr.some(function(t){return t.audio_id==e})},checkFSelect:function(e){return this.selectFArr.some(function(t){return t.file_id==e})},select:function(e){if(console.log(e),e.video_id){var t=this.selectVArr.findIndex(function(t){return t.video_id==e.video_id});-1==t?this.selectVArr.push(e):this.selectVArr.splice(t,1)}if(e.audio_id){var i=this.selectAArr.findIndex(function(t){return t.audio_id==e.audio_id});-1==i?this.selectAArr.push(e):this.selectAArr.splice(i,1)}if(e.file_id){var o=this.selectFArr.findIndex(function(t){return t.file_id==e.file_id});-1==o?this.selectFArr.push(e):this.selectFArr.splice(o,1)}},copy:function(e){var t=document.createElement("input");t.value=this.base_img+e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},setCover:function(e){console.log(e),this.ruleForm.cover=e.src_file},toPre:function(e){window.open(this.base_img+e,"_blank")},edit:function(e){this.ruleForm=Object(s["a"])({},e),this.dialogVisible=!0},editSubmit:function(){var e=this,t=this.ruleForm,i=t.group_id,o=t.file_name,a={group_id:i,file_name:o};a[this.row_id]=this.ruleForm[this.row_id],l[this.mtd.mod](a).then(function(t){0==t.code&&(e.$message({message:"修改成功",duration:1e3,type:"success"}),e.$refs.ruleForm.resetFields(),e.getPageData(1),e.dialogVisible=!1)})},close:function(){},del:function(e){var t=this,i=[];if(i.push(e[this.row_id]),2==this.group_type){var o=JSON.stringify(i);Object(r["f"])({audios:o}).then(function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)})}if(3==this.group_type){var a=JSON.stringify(i);Object(r["j"])({videos:a}).then(function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)})}if(4==this.group_type){var s=JSON.stringify(i);Object(r["g"])({files:s}).then(function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)})}}}},d=u,p=(i("4be0"),i("2877")),g=Object(p["a"])(d,o,a,!1,null,"375cb2cf",null);t["default"]=g.exports},aa94:function(e,t,i){"use strict";var o=i("570f"),a=i.n(o);a.a},ac76:function(e,t,i){"use strict";i.r(t);var o=i("31bd");t["default"]=o["default"]},b1f6:function(e,t,i){"use strict";i.r(t);var o=i("dc81");t["default"]=o["default"]},bbab:function(e,t,i){"use strict";var o=i("2a2d"),a=i.n(o);a.a},c48f:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imgWrap"},[e.showViewer?i("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":[e.viewSrc]}}):e._e(),e.pageData.list&&0!=e.pageData.list.length?e._l(e.pageData.list,function(t){return i("div",{key:t.image_id,staticClass:"box-card",class:{"border-gray":e.checkSelect(t.image_id)},on:{click:function(i){return e.select(t)}}},[i("div",{staticClass:"pic"},[i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.base_img+t.min_file,fit:"cover"}})],1),i("div",{staticClass:"name"},[i("i",{staticClass:"el-icon-zoom-in preview",on:{click:function(i){return i.stopPropagation(),e.onPreview(t)}}}),i("div",{staticClass:"file_name"},[e._v(e._s(t.file_name))])]),i("div",{staticClass:"controlBtn"},[i("i",{staticClass:"el-icon-edit iconStyel",on:{click:function(i){return i.stopPropagation(),e.edit(t)}}}),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t)}}},[i("i",{staticClass:"el-icon-delete iconStyel",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1),i("div",{staticClass:"checked",class:{"opacity-toggle":e.checkSelect(t.image_id)}},[i("i",{staticClass:"el-icon-check icon"})])])}):void 0,i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"auto"}},[i("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:e.ruleForm.group_id,callback:function(t){e.$set(e.ruleForm,"group_id",t)},expression:"ruleForm.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})],2)],1),i("el-form-item",{attrs:{label:"名称",prop:"file_name"}},[i("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.file_name,callback:function(t){e.$set(e.ruleForm,"file_name",t)},expression:"ruleForm.file_name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确 定")])],1)],1)],2)},a=[],s=(i("20d6"),i("cebc")),c=i("2f62"),n=i("d1eb"),r=i("08a9"),l={components:{ElImageViewer:r["a"]},inject:["selectArr","getPageData"],props:["pageData","groupList"],data:function(){return{showViewer:!1,viewSrc:"",dialogVisible:!1,ruleForm:{image_id:"",group_id:"0",file_name:""}}},computed:Object(s["a"])({},Object(c["b"])(["base_img"]),{supplement:function(){return this.pageData.page_count==this.pageData.page?10-this.pageData.list.length%10:0}}),methods:{edit:function(e){console.log(e),this.ruleForm.image_id=e.image_id,this.ruleForm.file_name=e.file_name,this.ruleForm.group_id=e.group_id,this.dialogVisible=!0},close:function(){},editSubmit:function(){var e=this,t=this.ruleForm,i=t.image_id,o=t.file_name,a=t.group_id,s={image_id:i,file_name:o,group_id:a};Object(n["u"])(s).then(function(t){e.$message({type:"success",message:"修改成功!"}),e.getPageData(1),e.ruleForm={},e.dialogVisible=!1})},del:function(e){var t=this,i=[];i.push(e.image_id);var o=JSON.stringify(i);Object(n["h"])({imgs:o}).then(function(e){0==e.code&&(t.$message({type:"success",message:"删除成功!"}),t.getPageData(1))})},onPreview:function(e){this.viewSrc=this.base_img+e.src_file,this.showViewer=!0},closeViewer:function(){this.showViewer=!1,this.viewSrc=""},checkSelect:function(e){return this.selectArr.some(function(t){return t.image_id==e})},select:function(e){var t=this.selectArr.findIndex(function(t){return t.image_id==e.image_id});-1==t?this.selectArr.push(e):this.selectArr.splice(t,1)},getImgList:function(e){var t=this,i=this.group_id;Object(n["n"])({group_id:i,page:e}).then(function(e){0==e.code&&(t.imgData=e.data)},function(e){console.log(e)})}}},u=l,d=(i("eaf2"),i("2877")),p=Object(d["a"])(u,o,a,!1,null,"338acf78",null);t["default"]=p.exports},c61f:function(e,t,i){"use strict";var o=i("3d76"),a=i.n(o);a.a},cf60:function(e,t,i){},dc81:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"className"},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("el-tab-pane",{attrs:{label:"图片",name:"1"}},[i("tab-item",{attrs:{group_type:"1",active:e.active}})],1)],1)],1)},a=[],s=i("5666"),c=i("ac76"),n=i("89f4"),r={name:"media.resource",components:{TabItem:s["default"],docPage:c["default"],sizeTip:n["default"]},data:function(){return{active:"1"}},created:function(){},activated:function(){console.log("resoure activated")},deactivated:function(){console.log("resoure deactivated")},mounted:function(){console.log("resoure mounted")},destroyed:function(){console.log("resoure destroyed")},filters:{},methods:{}},l=r,u=(i("6842"),i("2877")),d=Object(u["a"])(l,o,a,!1,null,null,null);t["default"]=d.exports},eaf2:function(e,t,i){"use strict";var o=i("cf60"),a=i.n(o);a.a},fc12:function(e,t,i){}}]);