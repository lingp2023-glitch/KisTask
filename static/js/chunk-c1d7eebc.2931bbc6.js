(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1d7eebc"],{"11e9":function(e,t,i){var n=i("52a7"),o=i("4630"),r=i("6821"),a=i("6a99"),u=i("69a8"),s=i("c69a"),l=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?l:function(e,t){if(e=r(e),t=a(t,!0),s)try{return l(e,t)}catch(i){}if(u(e,t))return o(!n.f.call(e,t),e[t])}},"1c4c":function(e,t,i){"use strict";var n=i("9b43"),o=i("5ca1"),r=i("4bf8"),a=i("1fa8"),u=i("33a4"),s=i("9def"),l=i("f1ae"),c=i("27ee");o(o.S+o.F*!i("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,i,o,d,f=r(e),p="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,h=void 0!==m,v=0,y=c(f);if(h&&(m=n(m,g>2?arguments[2]:void 0,2)),void 0==y||p==Array&&u(y))for(t=s(f.length),i=new p(t);t>v;v++)l(i,v,h?m(f[v],v):f[v]);else for(d=y.call(f),i=new p;!(o=d.next()).done;v++)l(i,v,h?a(d,m,[o.value,v],!0):o.value);return i.length=v,i}})},"5dbc":function(e,t,i){var n=i("d3f4"),o=i("8b97").set;e.exports=function(e,t,i){var r,a=t.constructor;return a!==i&&"function"==typeof a&&(r=a.prototype)!==i.prototype&&n(r)&&o&&o(e,r),e}},"5df3":function(e,t,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},"8b97":function(e,t,i){var n=i("d3f4"),o=i("cb7c"),r=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,i){return r(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:r}},9093:function(e,t,i){var n=i("ce10"),o=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},aa77:function(e,t,i){var n=i("5ca1"),o=i("be13"),r=i("79e5"),a=i("fdef"),u="["+a+"]",s="​",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(e,t,i){var o={},u=r((function(){return!!a[e]()||s[e]()!=s})),l=o[e]=u?t(f):a[e];i&&(o[i]=l),n(n.P+n.F*u,"String",o)},f=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},ae4a:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload"},[i("div",{on:{click:e.upLoadDia}},[e._t("btn",[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2"}},[e._v("点击上传")])])],2),i("el-dialog",{attrs:{title:"上传图片",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"formData",attrs:{model:e.formData,"status-icon":"","label-width":"auto",rules:e.rules}},[i("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[i("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择分组"},model:{value:e.formData.group_id,callback:function(t){e.$set(e.formData,"group_id",t)},expression:"formData.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,(function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})}))],2)],1),i("el-form-item",{attrs:{label:"本地素材",prop:"imgs"}},[i("el-upload",{ref:"Imageupload",attrs:{action:"","list-type":"picture-card","http-request":e.uploadImage,"on-remove":e.handleRemove,multiple:"",limit:8,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed}},[i("i",{staticClass:"el-icon-plus"})])],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},o=[],r=(i("7f7f"),i("c5f6"),i("d1eb")),a={props:{group_id:{type:[String,Number],required:!0},groupList:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{notify:"",dialogVisible:!1,formData:{group_id:"0",imgs:[]},rules:{group_id:[{required:!0,message:"请选择分组",trigger:"blur"}],imgs:[{required:!0,message:"请选择图片",trigger:"blur"}]},images:[]}},deactivated:function(){this.notify&&this.notify.close(),this.notify=null},methods:{submit:function(){var e=this;console.log("点击了提交"),this.$refs["formData"].validate((function(t){t&&(console.log(t),console.log(e.formData),e.addImage())}))},addImage:function(){var e=this,t=this.formData.group_id,i=JSON.stringify(this.formData.imgs);Object(r["c"])({group_id:t,imgs:i}).then((function(t){0==t.code&&(e.$message({message:"图片上传成功！",type:"success"}),e.$emit("after-upload"),e.handleClose())}))},upLoadDia:function(){this.dialogVisible=!0},handleClose:function(){this.$refs["formData"].clearValidate(),this.$refs["Imageupload"].clearFiles(),this.dialogVisible=!1,this.formData={group_id:"0",imgs:[]},this.images=[]},uploadImage:function(e){console.log(e),this.uploadPic(e.file)},handleRemove:function(e,t){console.log(e,t);var i="";this.images.map((function(t,n){t.uid==e.uid&&(i=n)})),this.images.splice(i,1),this.formData.imgs.splice(i,1),console.log(this.images),console.log(this.formData.imgs)},handleExceed:function(e,t){this.$message({type:"error",message:"当前限制选择 8 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件")})},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},uploadPic:function(e){var t=this;this.notify||(this.notify=this.$notify({title:"请不要离开页面",duration:0,iconClass:"el-icon-loading",showClose:!1})),this.notify.message="正在上传",Object(r["x"])({file:e,type:0}).then((function(i){console.log(i),t.images.push({uid:e.uid,file:i.data.file}),t.formData.imgs.push({file:i.data.file,name:i.data.name}),console.log(t.images),console.log(t.formData.imgs),t.notify.close(),t.$notify({title:"提示",message:"上传成功",type:"success",duration:1e3})}),(function(e){console.log(e)}))}}},u=a,s=i("2877"),l=Object(s["a"])(u,n,o,!1,null,"38c283ec",null),c=l.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload"},[i("div",{on:{click:function(t){return e.$refs.fileUpload.click()}}},[e._t("btn",[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2"}},[e._v("点击上传")])])],2),i("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:e.multipleUploadFile}})])},f=[],p=(i("ac6a"),i("5df3"),i("1c4c"),i("96cf"),i("3b8d")),g={props:{group_id:{type:[String,Number],required:!0},type:{type:[String,Number],required:!0},group_type:{type:[String,Number],required:!0}},data:function(){return{}},methods:{multipleUploadFile:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,i,n,o,r,a,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Array.from(this.$refs.fileUpload.files),i=0,n=t.length,o="",r=regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o||(o=u.$notify({title:"上传中",duration:0,iconClass:"el-icon-loading",showClose:!1})),o.message="正在上传（".concat(r+1,"/").concat(n,"）"),a=t[r],e.next=5,u.upload(a).then((function(e){i+=e})).finally((function(){u.active=r+1}));case 5:case"end":return e.stop()}}),e)})),a=0;case 6:if(!(a<t.length)){e.next=11;break}return e.delegateYield(r(a),"t0",8);case 8:a++,e.next=6;break;case 11:o.close(),0!=t.length&&this.$notify({title:"提示",message:"上传".concat(t.length,"个资源，成功").concat(i,"个"),type:"success"}),this.$emit("after-upload"),this.$refs.fileUpload.value="";case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),upload:function(){var e=this,t=this.$refs.fileUpload.files[0],i=this.type,n={};Object(r["x"])({file:t,type:i}).then((function(e){if(0==e.code){var t=e.data,i=t.file_name;t.file_size,t.url;n=i}}),(function(e){console.log(e)})).finally((function(){if(e.$refs.fileUpload.value="",3==e.group_type){var t=n,i=t.url;getVideoCover({file_url:i}).then((function(e){console.log(Object.assign(n,e.data))})).finally((function(){}))}else if(2==e.group_type){var o=n,r=o.url;getAudioDuration({audio_file:r}).then((function(e){console.log(Object.assign(n,e.data))})).finally((function(){}))}}))}}},m=g,h=Object(s["a"])(m,d,f,!1,null,"7756d439",null),v=h.exports;i.d(t,"a",(function(){return y}));t["b"]=c;var y=v},c5f6:function(e,t,i){"use strict";var n=i("7726"),o=i("69a8"),r=i("2d95"),a=i("5dbc"),u=i("6a99"),s=i("79e5"),l=i("9093").f,c=i("11e9").f,d=i("86cc").f,f=i("aa77").trim,p="Number",g=n[p],m=g,h=g.prototype,v=r(i("2aeb")(h))==p,y="trim"in String.prototype,b=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var i,n,o,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var a,s=t.slice(2),l=0,c=s.length;l<c;l++)if(a=s.charCodeAt(l),a<48||a>o)return NaN;return parseInt(s,n)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof g&&(v?s((function(){h.valueOf.call(i)})):r(i)!=p)?a(new m(b(t)),i,g):b(t)};for(var _,I=i("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;I.length>A;A++)o(m,_=I[A])&&!o(g,_)&&d(g,_,c(m,_));g.prototype=h,h.constructor=g,i("2aba")(n,p,g)}},d1eb:function(e,t,i){"use strict";i.d(t,"n",(function(){return r})),i.d(t,"l",(function(){return a})),i.d(t,"r",(function(){return u})),i.d(t,"m",(function(){return s})),i.d(t,"o",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"i",(function(){return d})),i.d(t,"v",(function(){return f})),i.d(t,"a",(function(){return p})),i.d(t,"f",(function(){return g})),i.d(t,"s",(function(){return m})),i.d(t,"j",(function(){return h})),i.d(t,"t",(function(){return v})),i.d(t,"g",(function(){return y})),i.d(t,"e",(function(){return b})),i.d(t,"w",(function(){return _})),i.d(t,"b",(function(){return I})),i.d(t,"h",(function(){return A})),i.d(t,"x",(function(){return F})),i.d(t,"k",(function(){return V})),i.d(t,"q",(function(){return N})),i.d(t,"u",(function(){return R})),i.d(t,"c",(function(){return w})),i.d(t,"p",(function(){return x}));var n=i("365c"),o={getImgList:"getImgList",getAudioList:"getAudioList",getVideoList:"getVideoList",getFileList:"getFileList",getResGroups:"getResGroups",addResGroup:"addResGroup",delResGroup:"delResGroup",modResGroup:"modResGroup",addAudio:"addAudio",addVideo:"addVideo",addFile:"addFile",modFile:"modFile",modAudio:"modAudio",modVideo:"modVideo",modImage:"modImage",delAudio:"delAudio",delVideo:"delVideo",delFile:"delFile",delImage:"delImage",getAudioDuration:"getAudioDuration",getVideoCover:"getVideoCover",uploadFile:"uploadFile",addImage:"addImage",getResSize:"resSize"};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getImgList,e,"api/res")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getAudioList,e,"api/res")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getVideoList,e,"api/res")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getFileList,e,"api/res")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getResGroups,e,"api/res")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.addResGroup,e,"api/res")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.delResGroup,e,"api/res")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.modResGroup,e,"api/res")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.addAudio,e,"api/res")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.delAudio,e,"api/res")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.modAudio,e,"api/res")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.delVideo,e,"api/res")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.modFile,e,"api/res")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.delFile,e,"api/res")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.addVideo,e,"api/res")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.modVideo,e,"api/res")}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.addFile,e,"api/res")}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.delImage,e,"api/res")}function F(e){return n["a"].post(o.uploadFile,e,"api/res")}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getAudioDuration,e,"api/res")}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getVideoCover,e,"api/res")}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.modImage,e,"api/res")}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.addImage,e,"api/res")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(o.getResSize,e,"api/res")}},f1ae:function(e,t,i){"use strict";var n=i("86cc"),o=i("4630");e.exports=function(e,t,i){t in e?n.f(e,t,o(0,i)):e[t]=i}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);