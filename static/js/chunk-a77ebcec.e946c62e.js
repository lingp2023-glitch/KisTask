(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a77ebcec","chunk-57af284d"],{"03ed":function(e,t,i){"use strict";var o=i("7424"),a=i.n(o);a.a},"10ac":function(e,t,i){"use strict";var o=i("555e"),a=i.n(o);a.a},3459:function(e,t,i){},"41af":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"head"},[i("static-group",{attrs:{group_type:e.group_type,groupList:e.groupList,group_id:e.group_id}})],1),i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"tabWrap"},[i("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[i("el-tab-pane",{attrs:{name:"0"}},[i("span",{staticClass:"label",attrs:{slot:"label"},on:{click:e.removeRe},slot:"label"},[e._v("未分组")])]),e._l(e.groupList,(function(t){return i("el-tab-pane",{key:t.group_id,attrs:{name:t.group_id}},[i("div",{staticClass:"tabItem",attrs:{slot:"label"},on:{click:function(i){return e.mouseOver(t.group_id)}},slot:"label"},[i("span",{staticClass:"label"},[e._v(e._s(t.group_name))]),i("el-popover",{ref:"labPop",refInFor:!0,attrs:{placement:"right",width:"190",trigger:"click","v-model":e.activeId==t.group_id}},[i("div",{staticClass:"setBtnClass"},[i("el-popover",{ref:"setPop",refInFor:!0,attrs:{placement:"right",width:"300",trigger:"click","v-model":e.activeId==t.group_id},on:{show:e.operateChange,hide:e.operateChange}},[i("div",{staticClass:"modGroup"},[i("div",{staticClass:"addGroupTitle"},[e._v("分组标题")]),i("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入新组名"},model:{value:e.group_name,callback:function(t){e.group_name=t},expression:"group_name"}}),i("div",{staticClass:"mod-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.modResGroup(t.group_id)}}},[e._v("修改")])],1)],1),i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editTab(t.group_name)}},slot:"reference"},[e._v(e._s(e.controlOperate))])],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(i){return e.removeTab(t.group_id)}}},[e._v("删除")])],1),i("i",{directives:[{name:"show",rawName:"v-show",value:e.activeId==t.group_id,expression:"activeId == item.group_id"}],staticClass:"el-icon-setting settingIcon",attrs:{slot:"reference"},nativeOn:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1)])}))],2)],1),i(e.PageComponent,{tag:"component",attrs:{pageData:e.pageData,group_type:e.group_type,groupList:e.groupList}})],1),i("pagination",{attrs:{data:e.pageData},on:{change:e.getPageData}})],1)},a=[],s=(i("20d6"),i("4632")),r=i("d1eb"),n=i("81e8"),c=i("905a"),l=i("aaf0"),u={components:{ImgPage:n["default"],AudioPage:c["default"],StaticGroup:l["default"],pagination:s["a"]},provide:function(){return{getPageData:this.getPageData,refreshPage:this.refreshPage,getResGroups:this.getResGroups,selectArr:this.selectArr,selectVArr:this.selectVArr,selectAArr:this.selectAArr,selectFArr:this.selectFArr,selectDArr:this.selectDArr,pageData:this.pageData}},props:{group_type:{type:String,required:!0},active:{required:!0,default:function(){return 0}}},data:function(){return{group_id:"0",frist:!0,groupList:[],pageData:{},selectArr:[],selectVArr:[],selectAArr:[],selectFArr:[],selectDArr:[],activeId:"",setDisabled:!1,group_name:"",operate:!0}},computed:{controlOperate:function(){return this.operate?"编辑":"取消"},PageComponent:function(){switch(this.active){case"1":return"ImgPage";default:return"AudioPage"}}},watch:{active:{handler:function(e){this.frist&&e==this.group_type&&(this.frist=!1,this.getResGroups())},immediate:!0}},created:function(){},beforeDestroy:function(){console.log("销毁finishAdd"),this.$bus.$off("finishAddView")},mounted:function(){var e=this;this.$bus.$on("finishAddView",(function(t){e.activeId=t}))},methods:{operateChange:function(){console.log("1112"),this.operate=!this.operate},modResGroup:function(e){var t=this;console.log(this.group_name,e,"提交新组名"),Object(r["v"])({group_name:this.group_name,group_id:e}).then((function(i){t.$message({message:"修改成功",type:"success"}),t.setDisabled=!1,t.group_name="",t.$refs.setPop.map((function(e,i){e.doClose(),t.$refs.labPop[i].doClose()})),t.activeId=e,t.group_id=e,t.getResGroups(e),console.log(e,"group_id")}))},editTab:function(e){console.log("点击了编辑功能"),this.group_name=e},mouseOver:function(e){console.log(e),this.activeId=e},removeRe:function(){this.activeId=""},handleClick:function(){this.getPageData(1)},removeTab:function(e){var t=this,i=this.groupList.findIndex((function(t){return t.group_id==e}));this.$confirm("此操作将删除 ".concat(this.groupList[i].group_name," 分组, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["i"])({group_id:e}).then((function(e){0==e.code&&(t.groupList.splice(i,1),t.$message({type:"success",message:"删除成功!"}),t.group_id="0",t.handleClick())}))}))},getResGroups:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",i=this.group_type;Object(r["o"])({group_type:i}).then((function(i){0==i.code&&(e.groupList=i.data,e.group_id=t+"",e.handleClick())}),(function(e){console.log(res)}))},getPageData:function(e){switch(this.active){case"1":this.getImgList(e);break;case"2":this.getAudioList(e);break;case"3":this.getVideoList(e);break;case"4":this.getFileList(e);break;default:break}},refreshPage:function(){this.getPageData(this.pageData.page)},getImgList:function(e){var t=this,i=this.group_id;Object(r["n"])({group_id:i,page:e}).then((function(e){0==e.code&&(t.pageData=e.data)}),(function(e){console.log(e)}))},getAudioList:function(e){var t=this,i=this.group_id;Object(r["l"])({group_id:i,page:e}).then((function(e){0==e.code&&(t.pageData=e.data||{})}),(function(e){console.log(e)}))},getVideoList:function(e){var t=this,i=this.group_id;Object(r["r"])({group_id:i,page:e}).then((function(e){0==e.code&&(t.pageData=e.data||{})}),(function(e){console.log(e)}))},getFileList:function(e){var t=this,i=this.group_id;Object(r["m"])({group_id:i,page:e}).then((function(e){0==e.code&&(t.pageData=e.data||{})}),(function(e){console.log(e)}))}}},d=u,p=(i("57d5"),i("03ed"),i("2877")),g=Object(p["a"])(d,o,a,!1,null,"75b22742",null);t["default"]=g.exports},4632:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.data.total_count,"page-count":e.data.page_count,"page-size":e.data.page_size},on:{"current-change":e.change}})],1)},a=[],s={props:{data:{type:Object,default:function(){return{}}}},computed:{},methods:{change:function(e){this.$emit("change",e)}}},r=s,n=(i("10ac"),i("2877")),c=Object(n["a"])(r,o,a,!1,null,null,null),l=c.exports;t["a"]=l},"555e":function(e,t,i){},"57d5":function(e,t,i){"use strict";var o=i("f5a7"),a=i.n(o);a.a},"635a":function(e,t,i){},7424:function(e,t,i){},"81e8":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imgWrap"},[e.showViewer?i("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":[e.viewSrc]}}):e._e(),e.pageData.list&&0!=e.pageData.list.length?e._l(e.pageData.list,(function(t){return i("div",{key:t.image_id,staticClass:"box-card",class:{"border-gray":e.checkSelect(t.image_id)},on:{click:function(i){return e.select(t)}}},[i("div",{staticClass:"pic"},[i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.base_img+t.min_file,fit:"cover"}})],1),i("div",{staticClass:"name"},[i("i",{staticClass:"el-icon-zoom-in preview",on:{click:function(i){return i.stopPropagation(),e.onPreview(t)}}}),i("div",{staticClass:"file_name"},[e._v(e._s(t.file_name))])]),i("div",{staticClass:"controlBtn"},[i("i",{staticClass:"el-icon-edit iconStyel",on:{click:function(i){return i.stopPropagation(),e.edit(t)}}}),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t)}}},[i("i",{staticClass:"el-icon-delete iconStyel",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1),i("div",{staticClass:"checked",class:{"opacity-toggle":e.checkSelect(t.image_id)}},[i("i",{staticClass:"el-icon-check icon"})])])})):void 0,i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"auto"}},[i("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:e.ruleForm.group_id,callback:function(t){e.$set(e.ruleForm,"group_id",t)},expression:"ruleForm.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,(function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})}))],2)],1),i("el-form-item",{attrs:{label:"名称",prop:"file_name"}},[i("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.file_name,callback:function(t){e.$set(e.ruleForm,"file_name",t)},expression:"ruleForm.file_name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确 定")])],1)],1)],2)},a=[],s=(i("20d6"),i("cebc")),r=i("2f62"),n=i("d1eb"),c=i("08a9"),l={components:{ElImageViewer:c["a"]},inject:["selectArr","getPageData"],props:["pageData","groupList"],data:function(){return{showViewer:!1,viewSrc:"",dialogVisible:!1,ruleForm:{image_id:"",group_id:"0",file_name:""}}},computed:Object(s["a"])({},Object(r["b"])(["base_img"]),{supplement:function(){return this.pageData.page_count==this.pageData.page?10-this.pageData.list.length%10:0}}),methods:{edit:function(e){console.log(e),this.ruleForm.image_id=e.image_id,this.ruleForm.file_name=e.file_name,this.ruleForm.group_id=e.group_id,this.dialogVisible=!0},close:function(){},editSubmit:function(){var e=this,t=this.ruleForm,i=t.image_id,o=t.file_name,a=t.group_id,s={image_id:i,file_name:o,group_id:a};Object(n["u"])(s).then((function(t){e.$message({type:"success",message:"修改成功!"}),e.getPageData(1),e.ruleForm={},e.dialogVisible=!1}))},del:function(e){var t=this,i=[];i.push(e.image_id);var o=JSON.stringify(i);Object(n["h"])({imgs:o}).then((function(e){0==e.code&&(t.$message({type:"success",message:"删除成功!"}),t.getPageData(1))}))},onPreview:function(e){this.viewSrc=this.base_img+e.src_file,this.showViewer=!0},closeViewer:function(){this.showViewer=!1,this.viewSrc=""},checkSelect:function(e){return this.selectArr.some((function(t){return t.image_id==e}))},select:function(e){var t=this.selectArr.findIndex((function(t){return t.image_id==e.image_id}));-1==t?this.selectArr.push(e):this.selectArr.splice(t,1)},getImgList:function(e){var t=this,i=this.group_id;Object(n["n"])({group_id:i,page:e}).then((function(e){0==e.code&&(t.imgData=e.data)}),(function(e){console.log(e)}))}}},u=l,d=(i("a3a3"),i("2877")),p=Object(d["a"])(u,o,a,!1,null,"5b82802b",null);t["default"]=p.exports},8347:function(e,t,i){"use strict";var o=i("3459"),a=i.n(o);a.a},"905a":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pageContent"},[e._l(e.pageData.list,(function(t,o){return i("div",{key:o,staticClass:"box-card",class:{"border-gray":e.checkSelect(t.video_id)||e.checkASelect(t.audio_id)||e.checkFSelect(t.file_id)},on:{click:function(i){return e.select(t)}}},[i("div",{staticClass:"pic"},[3==e.group_type?i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.base_img+t.cover,fit:"cover"}}):2==e.group_type?i("div",{staticClass:"default",staticStyle:{width:"90%",height:"100%"}},[i("i",{staticClass:"el-icon-microphone"})]):4==e.group_type?i("div",{staticClass:"default",staticStyle:{width:"90%",height:"100%"}},[i("i",{staticClass:"el-icon-document"})]):e._e()],1),i("div",{staticClass:"name"},[4==e.group_type?i("i",{staticClass:"el-icon-download preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),3==e.group_type?i("i",{staticClass:"el-icon-video-play preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),2==e.group_type?i("i",{staticClass:"el-icon-headset preview",on:{click:function(i){return i.stopPropagation(),e.toPre(t.file)}}}):e._e(),i("div",{staticClass:"file_name"},[e._v(e._s(t.file_name))])]),i("div",{staticClass:"controlBtn"},[4==e.group_type?i("i",{staticClass:"el-icon-document-copy iconStyel",on:{click:function(i){return i.stopPropagation(),e.copy(t.file)}}}):e._e(),i("i",{staticClass:"el-icon-edit iconStyel",on:{click:function(i){return i.stopPropagation(),e.edit(t)}}}),i("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(i){return e.del(t)}}},[i("i",{staticClass:"el-icon-delete iconStyel",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})])],1),i("div",{staticClass:"checked",class:{"opacity-toggle":e.checkSelect(t.video_id)||e.checkASelect(t.audio_id)||e.checkFSelect(t.file_id)}},[i("i",{staticClass:"el-icon-check icon"})])])})),i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"auto"}},[i("el-form-item",{attrs:{label:"分组",prop:"group_id"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:e.ruleForm.group_id,callback:function(t){e.$set(e.ruleForm,"group_id",t)},expression:"ruleForm.group_id"}},[i("el-option",{attrs:{label:"未分组",value:"0"}}),e._l(e.groupList,(function(e){return i("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})}))],2)],1),i("el-form-item",{attrs:{label:"名称",prop:"file_name"}},[i("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.file_name,callback:function(t){e.$set(e.ruleForm,"file_name",t)},expression:"ruleForm.file_name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确 定")])],1)],1),i("picture-library",{ref:"pic",on:{getData:e.setCover}})],2)},a=[],s=(i("20d6"),i("cebc")),r=i("2f62"),n=i("0bba"),c=i("d1eb"),l={delAudio:c["f"],modAudio:c["s"],modVideo:c["w"],delVideo:c["j"],modFile:c["t"],delFile:c["g"]},u={inject:["selectVArr","selectAArr","selectFArr","getPageData"],props:["pageData","group_type","groupList"],components:{PictureLibrary:n["a"]},data:function(){return{selectArr:[],dialogVisible:!1,ruleForm:{group_id:"",file_name:""}}},computed:Object(s["a"])({},Object(r["b"])(["base_img"]),{row_id:function(){switch(this.group_type){case"2":return"audio_id";case"3":return"video_id";case"4":return"file_id";default:return""}},mtd:function(){switch(this.group_type){case"2":return{del:"delAudio",mod:"modAudio"};case"3":return{del:"delVideo",mod:"modVideo"};case"4":return{del:"delFile",mod:"modFile"};default:return""}}}),methods:{checkSelect:function(e){return this.selectVArr.some((function(t){return t.video_id==e}))},checkASelect:function(e){return this.selectAArr.some((function(t){return t.audio_id==e}))},checkFSelect:function(e){return this.selectFArr.some((function(t){return t.file_id==e}))},select:function(e){if(console.log(e),e.video_id){var t=this.selectVArr.findIndex((function(t){return t.video_id==e.video_id}));-1==t?this.selectVArr.push(e):this.selectVArr.splice(t,1)}if(e.audio_id){var i=this.selectAArr.findIndex((function(t){return t.audio_id==e.audio_id}));-1==i?this.selectAArr.push(e):this.selectAArr.splice(i,1)}if(e.file_id){var o=this.selectFArr.findIndex((function(t){return t.file_id==e.file_id}));-1==o?this.selectFArr.push(e):this.selectFArr.splice(o,1)}},copy:function(e){var t=document.createElement("input");t.value=this.base_img+e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},setCover:function(e){console.log(e),this.ruleForm.cover=e.src_file},toPre:function(e){window.open(this.base_img+e,"_blank")},edit:function(e){this.ruleForm=Object(s["a"])({},e),this.dialogVisible=!0},editSubmit:function(){var e=this,t=this.ruleForm,i=t.group_id,o=t.file_name,a={group_id:i,file_name:o};a[this.row_id]=this.ruleForm[this.row_id],l[this.mtd.mod](a).then((function(t){0==t.code&&(e.$message({message:"修改成功",duration:1e3,type:"success"}),e.$refs.ruleForm.resetFields(),e.getPageData(1),e.dialogVisible=!1)}))},close:function(){},del:function(e){var t=this,i=[];if(i.push(e[this.row_id]),2==this.group_type){var o=JSON.stringify(i);Object(c["f"])({audios:o}).then((function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)}))}if(3==this.group_type){var a=JSON.stringify(i);Object(c["j"])({videos:a}).then((function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)}))}if(4==this.group_type){var s=JSON.stringify(i);Object(c["g"])({files:s}).then((function(e){0==e.code&&(t.$message({message:"删除成功",duration:1e3,type:"success"}),t.getPageData(1),t.dialogVisible=!1)}))}}}},d=u,p=(i("8347"),i("2877")),g=Object(p["a"])(d,o,a,!1,null,"25e80270",null);t["default"]=g.exports},a3a3:function(e,t,i){"use strict";var o=i("635a"),a=i.n(o);a.a},f5a7:function(e,t,i){}}]);