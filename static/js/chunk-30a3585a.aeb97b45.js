(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30a3585a"],{4299:function(t,a,o){"use strict";o.r(a);var n=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasAttrs,expression:"hasAttrs"}],attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.showAddStandardAttr}},[t._v('"参数选择"定义属性')]),o("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.ShowAdd,callback:function(a){t.ShowAdd=a},expression:"ShowAdd"}},[o("div",{staticClass:"addAttrWrap"},[o("el-input",{attrs:{size:"mini",width:"100px",placeholder:"请输入规格名称"},model:{value:t.attr_item.attr_name,callback:function(a){t.$set(t.attr_item,"attr_name",a)},expression:"attr_item.attr_name"}}),o("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.addAttrItem}},[t._v("添加")])],1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-plus",type:"primary",size:"mini"},slot:"reference"},[t._v('"文字描述"定义属性')])],1),o("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.attr,border:""}},[o("el-table-column",{attrs:{prop:"attr_name",label:"规格名称",width:"200"}}),o("el-table-column",{attrs:{prop:"attr_value",label:"规格值"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.values,function(n,r){return o("el-tag",{key:n.attr_value,staticClass:"tag",attrs:{name:n.attr_value,"disable-transitions":!0,closable:""},on:{click:function(o){return t.editAttrValue(n,a.$index,r)},close:function(o){return t.delAttrValue(a.$index,r)}}},[t._v("\n          "+t._s(n.attr_value)+"\n        ")])}),t.haveStandardValue(a.row.attr_name)?o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(o){return t.addStandardValueDialog(a.$index,a.row.attr_name)}}},[t._v('"参数选择"定义属性值')]):t._e(),o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(o){return t.addAttrDialog(a.$index)}}},[t._v('"文字描述"定义属性值')])]}}])}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[o("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(o){return t.delAttr(a.$index)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{"append-to-body":"",title:"属性值",visible:t.addAttrValueShow,width:"30%"},on:{"update:visible":function(a){t.addAttrValueShow=a},closed:t.closed}},[o("el-form",{ref:"addAttrValueData",attrs:{"label-width":"auto",model:t.attr_value,rules:t.rules}},[o("el-form-item",{attrs:{label:"规格值",prop:"attr_value"}},[o("el-input",{model:{value:t.attr_value.attr_value,callback:function(a){t.$set(t.attr_value,"attr_value",a)},expression:"attr_value.attr_value"}})],1)],1),o("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getPic}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(a){t.addAttrValueShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.setAttrValue}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{"append-to-body":"",title:"标准属性值",visible:t.addStandardAttrShow},on:{"update:visible":function(a){t.addStandardAttrShow=a},closed:t.closed}},[o("el-checkbox-group",{model:{value:t.standardAttrList,callback:function(a){t.standardAttrList=a},expression:"standardAttrList"}},t._l(t.attrsData,function(a,n){return o("el-checkbox",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{label:a.name},on:{change:function(o){return t.handleCheckChange(o,a.name)}}},[1!=a.name.length?o("div",[o("el-radio-group",{model:{value:t.standardRadio[a.name],callback:function(o){t.$set(t.standardRadio,a.name,o)},expression:"standardRadio[item.name]"}},t._l(a.name,function(n,r){return o("el-radio",{key:r,attrs:{label:n},on:{change:function(o){return t.handleRadioChange(n,a.name)}}},[t._v(t._s(n))])}),1)],1):o("div",[t._v("\n          "+t._s(a.name[0])+"\n        ")])])}),1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(a){t.standardRadio={},t.standardAttrList=[],t.addStandardAttrShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addStandardAttr}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{"append-to-body":"",title:'"参数选择"定义属性值',visible:t.addStandardValueShow},on:{"update:visible":function(a){t.addStandardValueShow=a},closed:t.closed}},[o("el-checkbox-group",{model:{value:t.standardValueList,callback:function(a){t.standardValueList=a},expression:"standardValueList"}},t._l(t.valueData,function(t,a){return o("el-checkbox",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(a){t.standardValueList=[],t.addStandardValueShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addStandardValue}},[t._v("确 定")])],1)],1)],1)},r=[],e=o("cebc"),i=(o("7514"),o("7f7f"),o("ac6a"),o("0bba")),d=o("c40e"),s={components:{PictureLibrary:i["a"]},watch:{group_id:{handler:function(t){t&&this.getAttrs()},immediate:!0}},props:{attr:{type:[Array,String],required:!0,default:function(){return[]}},group_id:{type:String,default:function(){return""}}},data:function(){return{ShowAdd:!1,addAttrValueShow:!1,data:[],rowIndex:"",rowIdx:"",attr_item:{attr_name:"",values:[]},attr_value:{attr_value:"",attr_img:"",min_img:""},rules:{attr_value:[{required:!0,message:"请输入规格值",trigger:"blur"}]},addStandardAttrShow:!1,standardAttrList:[],standardRadio:{},attrsData:[],hasAttrs:!1,addStandardValueShow:!1,standardRowName:"",standardValueList:[],valueData:[]}},methods:{getAttrs:function(){var t=this;Object(d["i"])({group_id:this.group_id}).then(function(a){a.data?(t.hasAttrs=!0,t.attrsData=a.data):t.hasAttrs=!1,t.$emit("changeRim",a.msg)})},handleCheckChange:function(t,a){if(console.log(this.standardRadio[a],!this.standardRadio[a]),1!=a.length)if(t){if(!this.standardRadio[a]){var o=this.standardAttrList.indexOf(a);console.log(o,"下标"),this.standardAttrList.splice(o,1)}}else this.standardRadio[a]=null},handleRadioChange:function(t,a){this.standardAttrList.some(function(t){return t==a})||this.standardAttrList.push(a)},addStandardValue:function(){var t=this;this.standardValueList.map(function(a,o){t.attr[t.rowIndex].values.push({attr_value:a})}),this.standardValueList=[],this.addStandardValueShow=!1},haveStandardValue:function(t){var a=this.attrsData.some(function(a){return Array.isArray(a.name)?a.name.some(function(a){return a==t})?a:void 0:a.name==t});return a},addStandardValueDialog:function(t,a){var o=this;this.standardRowName=a,this.rowIndex=t;var n=this.attrsData.find(function(t){return Array.isArray(t.name)?t.name.some(function(t){return t==o.standardRowName})?t:void 0:t.name==o.standardRowName});console.log(n),n?(this.valueData=n.value,this.addStandardValueShow=!0):this.$message({message:'此规格无"参数选择"定义属性值',type:"warning"})},addStandardAttr:function(){var t=this;this.standardAttrList.map(function(a,o){1!=a.length?t.standardRadio[a]&&t.attr.push({attr_name:t.standardRadio[a],values:[]}):t.attr.push({attr_name:a[0],values:[]})}),this.standardAttrList=[],this.standardRadio={},this.addStandardAttrShow=!1},showAddStandardAttr:function(){this.addStandardAttrShow=!0,this.ShowAdd=!1,console.log(this.group_id)},closed:function(){this.rowIndex="",this.rowIdx="",this.attr_value.min_img="",this.attr_value.attr_img="",this.attr_value.attr_value=""},addAttrItem:function(){this.attr_item.attr_name&&(this.attr.push(Object(e["a"])({},this.attr_item)),this.attr_item={attr_name:"",values:[]},this.ShowAdd=!1,this.updateAttr())},addAttrDialog:function(t){this.rowIndex=t,this.addAttrValueShow=!0},editAttrValue:function(t,a,o){this.attr_value=Object(e["a"])({},t),this.rowIndex=a,this.rowIdx=o,this.addAttrValueShow=!0},selectPic:function(){this.$refs.pic.open()},getPic:function(t){this.attr_value.attr_img=t.src_file,this.attr_value.min_img=t.min_file},setAttrValue:function(){var t=!1;if(this.$refs["addAttrValueData"].validate(function(a){t=a}),t){var a=this.attr_value,o=a.attr_value,n=a.attr_img;"string"==typeof this.rowIdx?this.attr[this.rowIndex].values.push({attr_value:o,attr_img:n}):this.$set(this.attr[this.rowIndex].values,this.rowIdx,{attr_value:o,attr_img:n}),this.updateAttr(),this.addAttrValueShow=!1}},delAttr:function(t){this.attr.splice(t,1),this.updateAttr()},delAttrValue:function(t,a){this.attr[t].values.splice(a,1),this.updateAttr()},updateAttr:function(){this.$emit("update:attr",this.attr)}}},u=s,l=(o("6f4d"),o("2877")),c=Object(l["a"])(u,n,r,!1,null,"a6bdf2f8",null);a["default"]=c.exports},"6f4d":function(t,a,o){"use strict";var n=o("c131"),r=o.n(n);r.a},c131:function(t,a,o){},c40e:function(t,a,o){"use strict";o.d(a,"c",function(){return e}),o.d(a,"m",function(){return i}),o.d(a,"i",function(){return d}),o.d(a,"J",function(){return s}),o.d(a,"G",function(){return u}),o.d(a,"I",function(){return l}),o.d(a,"F",function(){return c}),o.d(a,"w",function(){return p}),o.d(a,"t",function(){return g}),o.d(a,"r",function(){return f}),o.d(a,"u",function(){return h}),o.d(a,"s",function(){return v}),o.d(a,"o",function(){return m}),o.d(a,"v",function(){return _}),o.d(a,"x",function(){return S}),o.d(a,"q",function(){return A}),o.d(a,"p",function(){return w}),o.d(a,"A",function(){return b}),o.d(a,"z",function(){return y}),o.d(a,"y",function(){return k}),o.d(a,"B",function(){return x}),o.d(a,"n",function(){return L}),o.d(a,"K",function(){return V}),o.d(a,"L",function(){return G}),o.d(a,"g",function(){return D}),o.d(a,"h",function(){return R}),o.d(a,"a",function(){return C}),o.d(a,"b",function(){return I}),o.d(a,"f",function(){return $}),o.d(a,"j",function(){return P}),o.d(a,"H",function(){return M}),o.d(a,"d",function(){return T}),o.d(a,"e",function(){return z}),o.d(a,"l",function(){return j}),o.d(a,"k",function(){return N}),o.d(a,"C",function(){return O}),o.d(a,"E",function(){return q}),o.d(a,"D",function(){return J});var n=o("365c"),r={groupList:"groupList",groupAdd:"groupAdd",groupMod:"groupMod",groupDel:"groupDel",goodsGroupList:"groupList",goodsGroupAdd:"groupAdd",goodsGroupMod:"groupMod",goodsGroupDel:"groupDel",goodsGroupTree:"groupTree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList",setGoodsTop:"topSet",draftGet:"draftGet",draftSet:"draftSet",profitList:"profitList",imgGet:"imgsGet",setImgs:"imgsSet",serveGet:"serviceGet",setServe:"serviceSet",getAttrs:"attrs",getSkuShops:"skuShops",checkGoods:"check"};function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.checkGoods,t,"api/goods")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.getSkuShops,t,"api/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.getAttrs,t,"api/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.setServe,t,"api/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.serveGet,t,"api/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.setImgs,t,"api/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.imgGet,t,"api/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsList,t,"api/goods")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsGroupList,t,"api/goods")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsGroupAdd,t,"api/goods")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsGroupMod,t,"api/goods")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsGroupDel,t,"api/goods")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsAdd,t,"api/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsGroupTree,t,"api/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsMod,t,"api/goods")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsDel,t,"api/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsAttrSet,t,"api/goods")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsSkuSet,t,"api/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsSkuGet,t,"api/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsRun,t,"api/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.goodsStop,t,"api/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(r.topList,t,"api/goods")}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(r.setTop,t,"api/goods")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].get(r.topCancel,t,"api/goods")}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.applyList,t,"api/goods")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.applyPool,t,"api/goods")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.applyCalc,t,"api/goods")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.applyPut,t,"api/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.fixPut,t,"api/goods")}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.fixList,t,"api/goods")}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.setGoodsTop,t,"api/goods")}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.draftGet,t,"api/goods")}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.draftSet,t,"api/goods")}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.profitList,t,"api/goods")}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.groupList,t,"api/goods")}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.groupAdd,t,"api/goods")}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.groupMod,t,"api/goods")}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.groupDel,t,"api/goods")}}}]);