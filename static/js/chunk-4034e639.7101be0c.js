(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4034e639","chunk-612451b0","chunk-26d5a02b","chunk-20c53bc6","chunk-2bbd0f10","chunk-0060c4cb","chunk-0ac63e04","chunk-1dd3b970","chunk-1829ac85"],{"0067":function(e,t,o){"use strict";var s=o("e013"),i=o.n(s);i.a},"163a":function(e,t,o){"use strict";var s=o("e719"),i=o.n(s);i.a},"167a":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"addOrModStaff"},[o("el-dialog",{attrs:{title:1==e.dialogType?"编辑员工":"新增员工",visible:e.dialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[o("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"姓名",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[o("el-input",{attrs:{type:"tel",placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),0==e.dialogType?o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),o("el-form-item",{attrs:{label:"角色",prop:"role"}},[o("el-radio",{attrs:{label:1},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("店长")]),o("el-radio",{attrs:{label:2},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("店员")])],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],n=(o("7f7f"),o("e692")),a=o("b4ea"),r={data:function(){return{dialogType:0,dialog:!1,staff_id:null,form:{name:"",phone:"",password:"",role:1},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"blur"}]},checkAll:!1,checkedShops:[],shops:[],isIndeterminate:!0,shopData:[]}},props:{shopId:{type:String,default:function(){return""}}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{handleCheckAllChange:function(e){var t=this;console.log(e),this.checkedShops=[],e&&this.shops.map(function(e,o){t.checkedShops.push(e.shop_id)}),this.isIndeterminate=!1},handleCheckedShopsChange:function(e){console.log(e);var t=e.length;this.checkAll=t===this.shops.length,this.isIndeterminate=t>0&&t<this.shops.length},getShopList:function(){var e=this;Object(n["j"])().then(function(t){0==t.code&&(console.log(t.data),e.shops=t.data.list)})},open:function(e,t){console.log(t),"mod"==e&&(this.dialogType=1,this.staff_id=t.staff_id,this.form.name=t.name,this.form.phone=t.phone,this.form.role=t.role,console.log(this.form)),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={name:"",phone:"",password:"",role:1},this.dialogType=0,this.staff_id=null},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate(function(t){if(t){console.log("验证通过");var o={};o.name=e.form.name,o.phone=e.form.phone,o.password=e.form.password,o.role=e.form.role,1==e.dialogType?(o.staff_id=e.staff_id,e.modStaff(o)):(o.shop_id=e.shopId,e.addStaff(o))}else console.log("验证失败")})},modStaff:function(e){var t=this;Object(a["f"])(e).then(function(e){0==e.code&&t.$message({message:"修改员工成功",type:"success"}),t.dialog=!1,t.$parent.refresh()})},addStaff:function(e){var t=this;Object(a["a"])(e).then(function(e){0==e.code&&t.$message({message:"新增员工成功",type:"success"}),t.dialog=!1,t.$parent.refresh()})}}},l=r,c=o("2877"),d=Object(c["a"])(l,s,i,!1,null,"1310b6a9",null);t["default"]=d.exports},"2aec":function(e,t,o){},"354d":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"addOrModStaff"},[o("el-dialog",{attrs:{title:e.修改密码,visible:e.dialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[o("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],n=o("b4ea"),a={data:function(){return{dialog:!1,staff_id:null,form:{password:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},props:{},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{open:function(e){console.log(e),this.staff_id=e.staff_id,this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={password:""},this.staff_id=null},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate(function(t){if(t){console.log("验证通过");var o={};o.password=e.form.password,o.staff_id=e.staff_id,e.modPassword(o)}else console.log("验证失败")})},modPassword:function(e){var t=this;Object(n["modPassword"])(e).then(function(e){0==e.code&&t.$message({message:"修改密码成功",type:"success"}),t.dialog=!1,t.$parent.refresh()})}}},r=a,l=o("2877"),c=Object(l["a"])(r,s,i,!1,null,"d1ffbce4",null);t["default"]=c.exports},"37c7":function(e,t,o){},"467d":function(e,t,o){"use strict";var s=o("2aec"),i=o.n(s);i.a},"63cb":function(e,t,o){"use strict";o.r(t);var s=o("da09");t["default"]=s["default"]},"87f8":function(e,t,o){},9501:function(e,t,o){"use strict";var s=o("37c7"),i=o.n(s);i.a},a7c6:function(e,t,o){"use strict";var s=o("87f8"),i=o.n(s);i.a},b4ea:function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"c",function(){return a}),o.d(t,"b",function(){return r}),o.d(t,"g",function(){return l}),o.d(t,"f",function(){return c}),o.d(t,"d",function(){return d});var s=o("365c"),i={addStaff:"add",getStaffList:"list",delStaff:"del",unbindStaff:"unbind",modStaff:"mod",getWxBind:"wxbind",staffActive:"active"};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.addStaff,e,"gm/staff")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.getStaffList,e,"gm/staff")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.delStaff,e,"gm/staff")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.unbindStaff,e,"gm/staff")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.modStaff,e,"gm/staff")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(i.getWxBind,e,"gm/staff")}},c020:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"className"},[o("el-card",{staticClass:"anoCard"},[o("div",{staticClass:"anoCard-header",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("机构管理")]),o("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:e.add}},[e._v("新增机构")])],1),o("div",{staticClass:"box"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingList,expression:"loadingList"}],staticStyle:{width:"100%"},attrs:{data:e.shopData.list,border:"","header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[o("el-table-column",{attrs:{prop:"shop_id",label:"id",width:"50"}}),o("el-table-column",{attrs:{prop:"shop_name",label:"商户名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.shop_name))])]}}])}),o("el-table-column",{attrs:{prop:"province",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.address)+"\n          ")]}}])}),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.mod(t.row)}}},[e._v("编辑")]),o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.openStaff(t.row.shop_id)}}},[e._v("员工")]),o("el-link",{attrs:{type:"danger"},on:{click:function(o){return e.showDel(t.row.shop_id)}}},[e._v("删除")])],1)]}}])})],1)],1),e.showViewer?o("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":[e.url]}}):e._e(),o("pagination",{attrs:{data:e.shopData},on:{change:e.getShopList}})],1),o("add-or-mod-shop-dia",{ref:"addOrModShopDia"}),o("el-dialog",{attrs:{title:"提示",visible:e.delControl,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){e.delControl=t}}},[o("span",{staticStyle:{"font-size":"18px"}},[o("i",{staticClass:"el-icon-warning",staticStyle:{color:"#f56c6c"}}),e._v(" 确认删除？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.delControl=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.del()}}},[e._v("确 定")])],1)]),o("sch-rule-dia",{ref:"schRuleDia"}),o("staff",{ref:"staff"})],1)},i=[],n=o("cebc"),a=o("c226"),r=o("ec6a"),l=o("d76e"),c=o("4632"),d=o("2f62"),f=o("e692"),u=o("08a9"),m={name:"douyin",components:{addOrModShopDia:a["default"],pagination:c["a"],ElImageViewer:u["a"],schRuleDia:r["default"],staff:l["default"]},data:function(){return{loadingList:!1,delControl:!1,delShopId:null,shopData:{},showViewer:!1,url:""}},computed:Object(n["a"])({},Object(d["b"])(["base_img"])),created:function(){this.getShopList()},filters:{},methods:{openStaff:function(e){this.$refs["staff"].open(e)},setSchRule:function(e,t){this.$refs["schRuleDia"].open(e,t)},refresh:function(){this.getShopList()},onPreview:function(e){this.url=this.base_img+e,this.showViewer=!0},closeViewer:function(){this.showViewer=!1},add:function(){console.log("点击了新增商户"),this.$refs["addOrModShopDia"].open()},del:function(){var e=this;console.log("点击了删除商户");var t=this.delShopId;Object(f["d"])({shop_id:t}).then(function(t){0==t.code&&(e.$message({type:"success",message:"删除成功!"}),e.getShopList(),e.delControl=!1)})},mod:function(e){console.log("点击了编辑商户"),this.$refs["addOrModShopDia"].open(e)},showDel:function(e){this.delShopId=e,this.delControl=!0},handleClose:function(){this.delControl=!1},getShopList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loadingList=!0,Object(f["j"])({page:t}).then(function(t){0==t.code&&(console.log(t.data),e.shopData=t.data)}).finally(function(){e.loadingList=!1})}}},p=m,h=(o("9501"),o("2877")),g=Object(h["a"])(p,s,i,!1,null,"06f86904",null);t["default"]=g.exports},c226:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"addOrModShop"},[o("el-dialog",{attrs:{top:"10px",title:0==e.formType?"新增机构":"编辑机构",visible:e.dialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules,"element-loading-text":"获取位置中，请稍后~"}},[o("el-form-item",{attrs:{label:"机构名称",prop:"shop_name"}},[o("el-input",{model:{value:e.form.shop_name,callback:function(t){e.$set(e.form,"shop_name",t)},expression:"form.shop_name"}})],1),o("el-form-item",{attrs:{label:"地址",prop:"address"}},[o("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),o("div",{staticClass:"btn_group"},[o("el-button",{on:{click:function(t){return e.getLocation(!1)}}},[e._v("自动定位")]),o("el-button",{on:{click:e.openMap}},[e._v("手动定位")])],1)],1),o("el-form-item",{attrs:{label:"经度",prop:"lng"}},[o("el-input",{model:{value:e.form.lng,callback:function(t){e.$set(e.form,"lng",t)},expression:"form.lng"}})],1),o("el-form-item",{attrs:{label:"纬度",prop:"lat"}},[o("el-input",{model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{width:"50%",title:"高德地图",visible:e.inner,"append-to-body":""},on:{"update:visible":function(t){e.inner=t}}},[o("div",[o("el-amap",{ref:"map",staticClass:"amapClass",attrs:{center:e.center,"map-style":"amap://styles/62009be025f187dd3eafe327d2e55b8e",zoom:12,"extra-options":{vectorMapForeign:"style_zh_cn"}},on:{click:e.mapClick}},e._l(e.markers,function(e,t){return o("el-amap-marker",{key:t,attrs:{position:e.position,visible:e.visible,vid:t}})}),1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.selectPosition}},[e._v("确 定")])],1)]),o("div",{attrs:{id:"container"}})],1)},i=[],n=o("63cb"),a=o("e692"),r=(o("3022"),{data:function(){return{typeName:null,typeData:{1:"线下零售",2:"美食餐饮",3:"婚庆摄影",4:"美容美发",5:"休闲娱乐",6:"教育医疗",7:"交通运输",8:"其他"},shopType:[{id:1,name:"线下零售"},{id:2,name:"美食餐饮"},{id:3,name:"婚庆摄影"},{id:4,name:"美容美发"},{id:5,name:"休闲娱乐"},{id:6,name:"教育医疗"},{id:7,name:"交通运输"},{id:8,name:"其他"}],loading:!1,inner:!1,markers:[{position:[0,0],visible:!0,draggable:!1,template:""}],map:null,loadingMap:!1,center:[],dialog:!1,formType:0,shop_id:null,shopCover:null,form:{shop_name:"",address:"",lng:"",lat:""},rules:{shop_name:[{required:!0,message:"请输入商户名称",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],lng:[{required:!0,message:"请输入经度",trigger:"blur"}],lat:[{required:!0,message:"请输入纬度",trigger:"blur"}]}}},components:{formCover:n["default"]},activated:function(){},watch:{},created:function(){},mounted:function(){},methods:{selectChange:function(e){this.form.shop_type=e,this.$refs["form"].validateField("shop_type")},finishChoose:function(e){this.form.shop_logo=e,this.$refs["form"].validateField("shop_logo")},getLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log(e),this.map=new AMap.Map("container",{}),e){if(this.form.lng&&this.form.lat)this.markers[0].position=[this.form.lng,this.form.lat],this.center=[this.form.lng,this.form.lat];else{var t=this.map.getCenter();this.form.lng=t.lng,this.form.lat=t.lat,this.markers[0].position=[t.lng,t.lat],this.center=[t.lng,t.lat],this.codeToAddress()}this.inner=!0}else""==this.form.address?this.$refs["form"].validateField("address"):this.addressToCode()},addressToCode:function(){var e=this;this.formatAddress(this.form.address),console.log(this.form.address),this.map.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({});t.getLocation(e.form.address,function(t,o){"complete"===t&&"OK"===o.info&&(console.log(o),e.form.lng=o.geocodes[0].location.lng,e.form.lat=o.geocodes[0].location.lat,e.$refs["form"].validateField("lng"),e.$refs["form"].validateField("lat"))})})},codeToAddress:function(){var e=this;this.map.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({});t.getAddress([e.form.lng,e.form.lat],function(t,o){"complete"===t&&"OK"===o.info&&(console.log(o),e.form.address=o.regeocode.formattedAddress,e.$refs["form"].validateField("address"))})})},mapClick:function(e){this.form.lng=e.lnglat.lng,this.form.lat=e.lnglat.lat,this.markers[0].position=[e.lnglat.lng,e.lnglat.lat]},openMap:function(){this.loadingMap=!0,this.getLocation(!0)},selectPosition:function(){var e=this;this.map.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({});t.getAddress([e.form.lng,e.form.lat],function(t,o){if("complete"===t&&"OK"===o.info){var s=o.regeocode.formattedAddress;e.formatAddress(s),e.$refs["form"].validateField("address")}})}),this.inner=!1},formatAddress:function(e){this.form.address=e},open:function(e){e&&(this.formType=1,this.shop_id=e.shop_id,this.shopCover=e.min_logo,this.form.shop_name=e.shop_name,this.form.address=e.address,this.form.lng=e.lng,this.form.lat=e.lat),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={shop_name:"",address:"",lng:"",lat:""},this.formType=0,this.shopCover=null},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate(function(t){if(t){var o={};o.shop_name=e.form.shop_name,o.address=e.form.address,1==e.formType&&(o.shop_id=e.shop_id),o.lng=e.form.lng,o.lat=e.form.lat,0==e.formType?(console.log("新增机构"),e.addShop(o)):(console.log("编辑机构"),e.modShop(o)),e.dialog=!1}})},addShop:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["a"])(t).then(function(t){0==t.code&&(e.$message({message:"新增店铺成功！",type:"success"}),e.$parent.getShopList(1))})},modShop:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["k"])(t).then(function(t){0==t.code&&(e.$message({message:"编辑店铺成功！",type:"success"}),e.$parent.getShopList(1))})}}}),l=r,c=(o("0067"),o("2877")),d=Object(c["a"])(l,s,i,!1,null,"758361a8",null);t["default"]=d.exports},d76e:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{top:"10px",width:"80%",visible:e.dialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[o("el-card",{staticClass:"anoCard"},[o("div",{staticClass:"anoCard-header",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("员工管理")]),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:e.addStaff}},[e._v("\n          添加员工\n        ")])],1),o("div",{staticClass:"box"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.staffData.list,border:"","header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[o("el-table-column",{attrs:{prop:"name",label:"姓名"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),o("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),o("el-table-column",{attrs:{prop:"title",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.openid?"正常":"待激活")+"\n            ")]}}])}),o("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),o("el-table-column",{attrs:{prop:"status",label:"操作",width:"200px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-link",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(o){return e.modStaff(t.row)}}},[e._v("编辑")]),o("el-link",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(o){return e.modPassword(t.row)}}},[e._v("修改密码")]),o("el-popconfirm",{attrs:{title:"你确定要删除吗？",confirmButtonType:"danger"},on:{confirm:function(o){return e.delStaff(t.row.staff_id)}}},[o("el-link",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)])],1),o("add-or-mod-staff",{ref:"addOrModStaff",attrs:{shopId:e.shop_id}}),o("wx-bind-dia",{ref:"wxBindDia"}),o("mod-password",{ref:"modPassword"})],1)},i=[],n=o("b4ea"),a=o("167a"),r=o("e4b4"),l=o("354d"),c={data:function(){return{shop_id:"",staffData:{},dialog:!1}},components:{addOrModStaff:a["default"],wxBindDia:r["default"],modPassword:l["default"]},filters:{},created:function(){},onShow:function(){},mounted:function(){},computed:{},methods:{open:function(e){this.shop_id=e,this.getStaffList(),this.dialog=!0},closedDialog:function(){},wxBind:function(e){this.$refs["wxBindDia"].open(e)},shopsList:function(e){return e.shops_name?e.shops_name:[]},modPassword:function(e){this.$refs["modPassword"].open(e)},modStaff:function(e){this.$refs["addOrModStaff"].open("mod",e)},unbindStaff:function(e){var t=this;Object(n["g"])({staff_id:e}).then(function(e){0==e.code&&(t.$message({message:"员工解绑成功",type:"success"}),t.refresh())})},delStaff:function(e){var t=this;Object(n["b"])({staff_id:e}).then(function(e){0==e.code&&(t.$message({message:"员工删除成功",type:"success"}),t.refresh())})},refresh:function(e){this.getStaffList(e||this.staffData.page)},getStaffList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(n["c"])({shop_id:this.shop_id,page:t}).then(function(t){0==t.code&&(e.staffData=t.data)},function(e){console.log(e)})},addStaff:function(){this.$refs["addOrModStaff"].open("add")}}},d=c,f=o("2877"),u=Object(f["a"])(d,s,i,!1,null,"d345c998",null);t["default"]=u.exports},da09:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("media-library",{ref:"mediaLibrary",attrs:{active:"1",title:"图片库"}}),e.cover?o("div",{staticClass:"img-wrap"},[o("div",{staticClass:"img-item"},[o("i",{staticClass:"el-icon-close img-close",on:{click:e.del_cover}}),o("BaseElImage",{attrs:{custom_src:e.cover,previewList:[e.cover],fit:"cover"}})],1)]):o("div",{staticClass:"img-add",on:{click:function(t){return e.$refs.mediaLibrary.open()}}},[o("i",{staticClass:"el-icon-plus img-add-icon"})])],1)},i=[],n=o("daf4"),a={components:{mediaLibrary:n["a"]},props:{cover:{type:[Object,String],default:function(){return""}}},data:function(){return{}},mounted:function(){var e=this;this.$bus.$on("finishCoverSelectMed",function(t){e.getData(t)})},beforeDestroy:function(){this.$bus.$off("finishCoverSelectMed")},methods:{getData:function(e){this.$emit("update:cover",e.src_file),this.$emit("finishChoose",e.image_id),this.$refs.mediaLibrary.handleClose()},del_cover:function(){this.$emit("update:cover",""),this.$emit("finishChoose","")}}},r=a,l=(o("a7c6"),o("2877")),c=Object(l["a"])(r,s,i,!1,null,"6a2d2254",null);t["default"]=c.exports},e013:function(e,t,o){},e4b4:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wxBindDia"},[o("el-dialog",{attrs:{title:"员工激活",visible:e.dialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[o("div",{staticClass:"qrCode"},[o("el-image",{staticStyle:{width:"300px",height:"300px"},attrs:{src:e.qrCode}}),o("div",{staticStyle:{"margin-top":"10px"}},[e._v("请用微信扫码激活")])],1)])],1)},i=[],n=o("b4ea"),a={data:function(){return{dialog:!1,staff_id:null,qrCode:null}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{closedDialog:function(){this.staff_id=null,this.qrCode=""},open:function(e){this.staff_id=e,this.getWxBind(),this.dialog=!0},getWxBind:function(){var e=this;Object(n["d"])({staff_id:this.staff_id}).then(function(t){0==t.code?e.qrCode=t.data.qrurl:e.$message({message:t.msg?t.msg:"二维码获取失败",type:"error"})})}}},r=a,l=(o("163a"),o("2877")),c=Object(l["a"])(r,s,i,!1,null,"122e53d6",null);t["default"]=c.exports},e719:function(e,t,o){},ec6a:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"schRuleDia"},[o("el-dialog",{attrs:{title:"配置档期规则",visible:e.show,width:"70%",top:"10px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},closed:e.handleClose}},[o("div",{staticClass:"diaHeader",attrs:{slot:"title"},slot:"title"},[o("div",[e._v("\n        配置档期规则 （"+e._s(e.shop_name)+"）\n      ")])]),o("div",[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form",{ref:"form",staticClass:"form",attrs:{rules:e.rules,model:e.rule_info,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"营业开始时间",prop:"btime"}},[o("el-time-select",{attrs:{placeholder:"开始时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"}},model:{value:e.rule_info.btime,callback:function(t){e.$set(e.rule_info,"btime",t)},expression:"rule_info.btime"}})],1),o("el-form-item",{attrs:{label:"营业结束时间",prop:"etime"}},[o("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.rule_info.btime}},model:{value:e.rule_info.etime,callback:function(t){e.$set(e.rule_info,"etime",t)},expression:"rule_info.etime"}})],1),o("el-form-item",{attrs:{label:"档期时长",prop:"unit_time"}},[o("el-input-number",{staticStyle:{"margin-right":"10px"},attrs:{min:0},model:{value:e.rule_info.unit_time,callback:function(t){e.$set(e.rule_info,"unit_time",t)},expression:"rule_info.unit_time"}}),e._v("分钟\n            ")],1),o("el-form-item",{attrs:{label:"档期间隔",prop:"space_time"}},[o("el-input-number",{staticStyle:{"margin-right":"10px"},attrs:{min:0},model:{value:e.rule_info.space_time,callback:function(t){e.$set(e.rule_info,"space_time",t)},expression:"rule_info.space_time"}}),e._v("分钟\n            ")],1),o("el-form-item",{attrs:{label:"默认工位",prop:"work_num"}},[o("el-input-number",{attrs:{min:0},model:{value:e.rule_info.work_num,callback:function(t){e.$set(e.rule_info,"work_num",t)},expression:"rule_info.work_num"}})],1)],1),o("el-alert",{attrs:{title:"规则说明",type:"info"}},[e._v("\n            在 "),o("span",{staticStyle:{color:"#e53f31"}},[e._v(e._s(e.rule_info.btime))]),e._v(" - "),o("span",{staticStyle:{color:"#e53f31"}},[e._v(e._s(e.rule_info.etime))]),e._v(" 时间段内，每间隔 "),o("span",{staticStyle:{color:"#e53f31"}},[e._v(e._s(e.rule_info.space_time))]),e._v(" 分钟生成一个档期，档期时长为 "),o("span",{staticStyle:{color:"#e53f31"}},[e._v(e._s(e.rule_info.unit_time))]),e._v(" 分钟，默认每个档期拥有 "),o("span",{staticStyle:{color:"#e53f31"}},[e._v(e._s(e.rule_info.work_num))]),e._v(" 个工位(可修改 )，状态为开启(可修改 )\n          ")]),o("div",{staticClass:"controlBtn"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v("确认规则")])],1)],1),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"scrollBox"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.schedule_work,border:""}},[o("el-table-column",{attrs:{prop:"work_time",label:"显示名称"}}),o("el-table-column",{attrs:{label:"时间跨度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.work_btime)+" - "+e._s(t.row.work_etime)+"\n                ")]}}])}),o("el-table-column",{attrs:{prop:"work_num",label:"工位"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{size:"mini",min:0},on:{change:function(t){e.cantRun=!1}},model:{value:t.row.work_num,callback:function(o){e.$set(t.row,"work_num",o)},expression:"scope.row.work_num"}})]}}])}),o("el-table-column",{attrs:{prop:"is_work",label:"是否开启",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){e.cantRun=!1}},model:{value:t.row.is_work,callback:function(o){e.$set(t.row,"is_work",o)},expression:"scope.row.is_work"}})]}}])})],1)],1)])],1),o("span",{staticClass:"dialog-footer"},[o("el-button",{attrs:{type:e.cantRun?"info":"primary",disabled:e.cantRun},on:{click:e.scheduleRuleRun}},[e._v("生成档期")])],1)],1)])],1)},i=[],n=o("e692"),a={data:function(){return{show:!1,shop_id:"",shop_name:"",rule_info:{btime:"",etime:"",unit_time:30,space_time:"",work_num:1},rules:{btime:[{required:!0,message:"请选择营业开始时间",trigger:"blur"}],etime:[{required:!0,message:"请选择营业结束时间",trigger:"blur"}],unit_time:[{required:!0,message:"请输入档期时长",trigger:"blur"}],space_time:[{required:!0,message:"请输入档期间隔",trigger:"blur"}],work_num:[{required:!0,message:"请输入默认工时",trigger:"blur"}]},schedule_work:[],cantRun:!0}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{scheduleRuleRun:function(){var e=this,t=this.$loading();Object(n["l"])({shop_id:this.shop_id,rule_info:JSON.stringify(this.rule_info),work_info:JSON.stringify(this.schedule_work)}).then(function(t){0==t.code?(e.$message({message:"修改成功",type:"success"}),e.$parent.getScheduleList&&e.$parent.getScheduleList(!0)):e.$message({message:t.msg?t.msg:"修改失败",type:"error"})}).finally(function(){t.close()})},handleClose:function(){console.log("123123"),this.$refs["form"].clearValidate(),this.show=!1,this.cantRun=!0,this.rule_info={btime:"",etime:"",unit_time:30,space_time:"",work_num:1}},submitRule:function(){var e=this;this.$refs.form.validate(function(t){if(t){var o=JSON.stringify(e.rule_info),s=e.$loading();Object(n["m"])({shop_id:e.shop_id,rule_info:o}).then(function(t){e.$message({message:"保存成功",type:"success"}),e.schedule_work=t.data,e.cantRun=!1}).finally(function(){s.close()})}})},open:function(e,t){this.show=!0,this.shop_id=e,this.shop_name=t,this.getSchRule()},getSchRule:function(){var e=this;Object(n["g"])({shop_id:this.shop_id}).then(function(t){console.log(t),0==t.code&&(t.data.schedule_rule?e.rule_info=JSON.parse(t.data.schedule_rule):e.rule_info={btime:"",etime:"",unit_time:30,space_time:"",work_num:1},t.data.schedule_work?e.schedule_work=JSON.parse(t.data.schedule_work):e.schedule_work=[])})}}},r=a,l=(o("467d"),o("2877")),c=Object(l["a"])(r,s,i,!1,null,"4a4dc579",null);t["default"]=c.exports}}]);