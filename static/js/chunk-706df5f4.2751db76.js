(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-706df5f4","chunk-26ca71cf","chunk-520c4f38","chunk-0d4f791e","chunk-3446e7a4"],{"0ba8":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addGoods"},[o("el-dialog",{attrs:{title:"增购商品",visible:t.show,top:"20px",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"goodsList"},t._l(t.goodsList,function(e,s){return o("div",{key:s,staticClass:"goodsItem",class:{activeGoods:e.goods_id==t.activedId},on:{click:function(o){return t.selectGoods(e.goods_id)}}},[o("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.cover}}),o("div",{staticClass:"goodsInfo"},[o("div",[t._v("\n                  "+t._s(e.goods_name)+"\n                  "),o("span",{style:{color:1==e.is_run?"#55aaff":"#777"}},[t._v(t._s(1==e.is_run?"已上线":"未上线"))])]),o("div",[t._v("\n                  ￥"+t._s(t._f("formatMoney")(e.sale_price))+"\n                ")])])],1)}),0)]),o("el-col",{directives:[{name:"show",rawName:"v-show",value:t.activedId,expression:"activedId"}],attrs:{span:12}},[o("div",{staticClass:"attrsList"},t._l(t.attrsList,function(e,s){return o("div",{key:s,staticClass:"attrsItem"},[o("div",{staticClass:"attrsTitle"},[t._v("\n              "+t._s(e.attr_name)+"\n            ")]),o("div",{staticClass:"attrsValue"},t._l(e.values,function(e,n){return o("div",{key:n,staticClass:"valueItem",class:e.attr_value_id==(t.selectAttrs[s]?t.selectAttrs[s].attr_value_id:"")?"activeAttr":"",on:{click:function(e){return t.selectAttr(s,n)}}},[t._v("\n                "+t._s(e.attr_value)+"\n              ")])}),0)])}),0),o("div",{staticClass:"cell"},[o("div",[t._v("单价：")]),o("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price:0))+"\n          ")])]),o("div",{staticClass:"cell"},[o("div",[t._v("数量：")]),o("div",[o("el-input-number",{attrs:{size:"small",min:1},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1)]),o("div",{staticClass:"cell"},[o("div",[t._v("总价：")]),o("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price*t.num:0))+"\n          ")])])])],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closed}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},n=[],r=(o("ac6a"),o("f8b7")),i={data:function(){return{show:!1,goodsList:[],goodsObj:{},order_id:"",num:1,activedId:"",selectAttrs:[],hasSelect:[],attrs:[],skuMap:{}}},watch:{activedId:function(){var t=this;console.log(this.goodsObj[this.activedId]),this.num=1,this.skuMap={},this.goodsObj[this.activedId].sku.map(function(e,o){t.skuMap[e.attr_value_items]=e})}},components:{},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{goods_sku:function(){if(console.log(this.selectAll),this.selectAll){var t=this.selectAttrs.map(function(t){return t?t.attr_value_id:""});return this.skuMap[JSON.stringify(t)]}return this.goodsObj[this.activedId]},attrsList:function(){return this.activedId?this.goodsObj[this.activedId].attrs:[]},selectAll:function(){var t=!0;return this.hasSelect.map(function(e,o){-1==e&&(t=!1)}),t},tipText:function(){for(var t="",e=0;e<this.hasSelect.length;e++){var o=this.hasSelect[e];if(-1==o){t=this.attrs[e].attr_name;break}}return t}},methods:{submit:function(){var t=this;if(this.selectAll){var e=[];this.selectAttrs.map(function(t,o){e.push(t.attr_value_id)}),Object(r["k"])({order_id:this.order_id,goods_id:this.activedId,attrs:JSON.stringify(e),num:this.num}).then(function(e){0==e.code&&(t.$message({message:"增购成功",type:"success"}),t.show=!1,t.$parent.getOrderInfo())})}else this.$message({message:"请选择".concat(this.tipText),type:"error"})},selectAttr:function(t,e){JSON.stringify(this.selectAttrs[t])==JSON.stringify(this.attrs[t].values[e])?(this.$set(this.selectAttrs,t,void 0),this.$set(this.hasSelect,t,-1)):(this.$set(this.selectAttrs,t,this.attrs[t].values[e]),this.$set(this.hasSelect,t,e))},selectGoods:function(t){var e=this;this.activedId=t,this.attrs=[],this.selectAttrs=[],this.attrs=this.goodsObj[this.activedId].attrs,this.hasSelect=[],this.attrs.map(function(t,o){e.hasSelect.push(-1)})},getOGoodsList:function(){var t=this;Object(r["g"])().then(function(e){console.log(e,1),t.goodsList=e.data,t.goodsList.map(function(e,o){t.goodsObj[e.goods_id]=e}),console.log(t.goodsObj)})},open:function(t){this.show=!0,this.order_id=t,this.getOGoodsList()},closed:function(){this.activedId="",this.goodsObj={},this.order_id="",this.selectAttrs=[],this.attrs=[],this.hasSelect=[],this.show=!1}}},a=i,c=(o("cf6c"),o("2877")),d=Object(c["a"])(a,s,n,!1,null,"2fe88a5e",null);e["default"]=d.exports},"0ea8":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"reducePrice"},[o("el-dialog",{attrs:{title:"收款金额",visible:t.show,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[o("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rules,model:t.form,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"收款金额",prop:"money"}},[o("el-input",{attrs:{placeholder:"请输入收款金额",type:"number"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1),o("el-form-item",{attrs:{label:"收款途径",prop:"channel"}},[o("el-select",{attrs:{placeholder:"请选择收款途径"},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closed}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},n=[],r=o("f8b7"),i={data:function(){return{show:!1,order_id:"",form:{money:"",channel:""},options:[{value:"美团点评",label:"美团点评"},{value:"微信",label:"微信"},{value:"支付宝",label:"支付宝"},{value:"现金",label:"现金"},{value:"POS机",label:"POS机"},{value:"定金",label:"定金"},{value:"其他",label:"其他"}],rules:{money:[{required:!0,message:"请输入减免金额",trigger:"blur"}],channel:[{required:!0,message:"请选择收款途径",trigger:"blur"}]}}},components:{},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{submit:function(){var t=this;this.$refs.form.validate(function(e){e&&Object(r["o"])({channel:t.form.channel,money:100*t.form.money,order_id:t.order_id}).then(function(e){0==e.code?(t.$message({message:"收款成功",type:"success"}),t.$parent.getOrderInfo(),t.closed()):t.$message({message:e.msg?e.msg:"收款失败",type:"error"})})})},open:function(t){this.show=!0,this.order_id=t},closed:function(){this.form={money:""},this.order_id="",this.$refs["form"].clearValidate(),this.show=!1}}},a=i,c=o("2877"),d=Object(c["a"])(a,s,n,!1,null,"17d6be9a",null);e["default"]=d.exports},"857a":function(t,e,o){},9292:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modContact"},[o("el-dialog",{attrs:{title:"修改客户信息",visible:t.show,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[o("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rules,model:t.user_info,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"姓名",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.user_info.name,callback:function(e){t.$set(t.user_info,"name",e)},expression:"user_info.name"}})],1),o("el-form-item",{attrs:{label:"性别",prop:"gender"}},[o("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.user_info.gender,callback:function(e){t.$set(t.user_info,"gender",e)},expression:"user_info.gender"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),o("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[o("el-input",{attrs:{placeholder:"请输入联系手机"},model:{value:t.user_info.phone,callback:function(e){t.$set(t.user_info,"phone",e)},expression:"user_info.phone"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closed}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},n=[],r=(o("7f7f"),o("cebc")),i=o("f8b7"),a={data:function(){return{options:[{value:"1",label:"男"},{value:"0",label:"女"}],show:!1,order_id:"",user_info:{name:"",gender:"",phone:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],phone:[{required:!0,message:"请输入联系手机",trigger:"blur"}]}}},components:{},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{submit:function(){var t=this;this.$refs.form.validate(function(e){if(e){var o=Object(r["a"])({},t.user_info);o.order_id=t.order_id,Object(i["b"])(o).then(function(e){0==e.code&&(t.$message({message:"修改成功",type:"success"}),t.$parent.getOrderInfo(),t.closed())})}})},open:function(t,e){this.show=!0,this.user_info.name=t.name,this.user_info.gender=t.gender,this.user_info.phone=t.phone,this.order_id=e},closed:function(){this.rule_info={name:"",gender:"",phone:""},this.order_id="",this.$refs["form"].clearValidate(),this.show=!1}}},c=a,d=o("2877"),l=Object(d["a"])(c,s,n,!1,null,"235332e8",null);e["default"]=l.exports},b8e38:function(t,e,o){},c0fe:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"reducePrice"},[o("el-dialog",{attrs:{title:"减免金额",visible:t.show,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[o("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rules,model:t.form,"label-width":"auto"}},[o("el-form-item",{attrs:{label:"减免金额",prop:"money"}},[o("el-input",{attrs:{placeholder:"请输入减免金额",type:"number"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1),o("el-form-item",{attrs:{label:"减免方式",prop:"channel"}},[o("el-select",{attrs:{placeholder:"请选择减免方式"},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closed}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},n=[],r=o("f8b7"),i={data:function(){return{show:!1,order_id:"",form:{money:"",channel:""},options:[{value:"退订金",label:"退订金"},{value:"折扣",label:"折扣"},{value:"优惠券",label:"优惠券"},{value:"其他",label:"其他"}],rules:{money:[{required:!0,message:"请输入减免金额",trigger:"blur"}],channel:[{required:!0,message:"请选择减免方式",trigger:"blur"}]}}},components:{},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{submit:function(){var t=this;this.$refs.form.validate(function(e){e&&Object(r["o"])({channel:t.form.channel,money:100*t.form.money,order_id:t.order_id,in_out:-1}).then(function(e){0==e.code?(t.$message({message:"减免成功",type:"success"}),t.$parent.getOrderInfo(),t.closed()):t.$message({message:e.msg?e.msg:"减免失败",type:"error"})})})},open:function(t){this.show=!0,this.order_id=t},closed:function(){this.form={money:""},this.order_id="",this.$refs["form"].clearValidate(),this.show=!1}}},a=i,c=o("2877"),d=Object(c["a"])(a,s,n,!1,null,"60a98299",null);e["default"]=d.exports},c7db:function(t,e,o){"use strict";var s=o("b8e38"),n=o.n(s);n.a},cf6c:function(t,e,o){"use strict";var s=o("857a"),n=o.n(s);n.a},ed4e:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"editOrder"},[o("el-dialog",{attrs:{title:"修改订单",visible:t.show,width:"80%",top:"10px","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[o("div",{staticClass:"scrollBox"},[o("el-card",{staticClass:"box-card"},[o("div",{staticStyle:{"padding-bottom":"5px"},attrs:{slot:"header"},slot:"header"},[o("span",[t._v("订单信息")])]),o("el-row",[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              订单编号："+t._s(t.orderInfo.trade_no)+"\n            ")]),o("div",{staticClass:"boxItem"},[t._v("\n              下单时间："+t._s(t.orderInfo.create_time)+"\n            ")]),o("div",{staticClass:"boxItem"},[t._v("\n              所属门店："+t._s(t.orderInfo.shop.shop_name)+"\n            ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              订单来源："+t._s(t.handleOrderType)+"\n            ")]),o("div",{staticClass:"boxItem"},[t._v("\n              到店时间："+t._s(t.orderInfo.book_day+" "+t.orderInfo.book_time)+"\n            ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              占用工时："+t._s(t.orderInfo.goods.work_num)+"\n            ")]),o("div",{staticClass:"boxItem"},[t._v("\n              预计耗时："+t._s(t.orderInfo.goods.work_time)+"\n            ")])])],1)],1),o("el-card",{staticClass:"box-card"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("下单人信息")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.openModContact}},[t._v("修改客户信息")])],1),o("el-row",[o("el-col",{attrs:{span:2}},[o("el-avatar",{attrs:{src:t.orderInfo.user.headimg}})],1),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"boxItem"},[t._v("\n              客户姓名："+t._s(t.orderInfo.append_data.name)+" （"+t._s(1==t.orderInfo.append_data.gender?"先生":"女士")+"）\n            ")]),o("div",{staticClass:"boxItem"},[t._v("\n              手机："+t._s(t.orderInfo.append_data.phone)+"\n            ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              微信昵称："+t._s(t.orderInfo.user.nickname)+"\n            ")])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"boxItem"},[t._v("\n              预约订单购买次数："+t._s(t.orderInfo.user.buy_num)+"\n            ")])])],1)],1),o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"headerBox",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("产品信息")]),o("div",[o("el-button",{attrs:{type:"text"},on:{click:t.showAddGoods}},[t._v("加购产品")])],1)]),o("el-row",[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[o("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.orderInfo.goods.cover}}),o("div",{staticClass:"goodsInfo"},[o("div",[t._v("\n                  "+t._s(t.orderInfo.goods.goods_name)+"\n                ")]),o("div",{staticStyle:{display:"flex","margin-top":"5px"}},t._l(t.orderInfo.attrs_value,function(e,s){return o("div",{key:s,staticStyle:{"margin-right":"5px"}},[t._v("\n                    "+t._s(e)+"\n                  ")])}),0)])],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              占用工时："+t._s(t.orderInfo.goods.work_num)+"\n            ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n              ￥"+t._s(t._f("formatMoney")(t.orderInfo.goods.sale_price))+"\n            ")]),o("div",{staticClass:"boxItem"})])],1),o("div",{staticStyle:{borderBottom:"1px solid #ebeef5",margin:"5px 0"}}),o("el-row",[o("el-col",{directives:[{name:"show",rawName:"v-show",value:0!=t.orderInfo.attach_goods.length,expression:"orderInfo.attach_goods.length != 0"}],attrs:{span:12}},[o("div",{staticStyle:{margin:"18px 0"}},[t._v("\n              新加购产品\n            ")]),t._l(t.orderInfo.attach_goods,function(e){return o("el-row",{key:e.order_goods_id,staticStyle:{"margin-top":"10px"}},[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[o("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.cover}}),o("div",{staticClass:"goodsInfo"},[o("div",[t._v("\n                      "+t._s(e.goods_name)+" × "+t._s(e.num)+"\n                    ")])])],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n                  占用工时："+t._s(e.work_num)+"\n                ")]),o("div",{staticClass:"boxItem"},[t._v("\n                  数量："+t._s(e.num)+"\n                ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n                  ￥"+t._s(t._f("formatMoney")(e.order_money))+"\n                ")]),o("div",{staticClass:"boxItem"},[o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"删除该产品？"},on:{confirm:function(o){return t.goodsDel(e.order_goods_id)}}},[o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)],1)])],1)})],2),o("el-col",{directives:[{name:"show",rawName:"v-show",value:0!=t.orderInfo.append_goods.length,expression:"orderInfo.append_goods.length != 0"}],attrs:{span:24}},[o("div",{staticStyle:{margin:"18px 0"}},[t._v("\n              新加购产品\n            ")]),t._l(t.orderInfo.append_goods,function(e){return o("el-row",{key:e.order_goods_id,staticStyle:{"margin-top":"10px"}},[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[o("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.cover}}),o("div",{staticClass:"goodsInfo"},[o("div",[t._v("\n                      "+t._s(e.goods_name)+"\n                    ")]),o("div",{staticStyle:{display:"flex","margin-top":"5px"}},t._l(e.attrs_value?JSON.parse(e.attrs_value):[],function(e,s){return o("div",{key:s,staticStyle:{"margin-right":"5px"}},[t._v("\n                        "+t._s(e)+"\n                      ")])}),0)])],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n                  占用工时："+t._s(e.work_num)+"\n                ")]),o("div",{staticClass:"boxItem"},[t._v("\n                  数量："+t._s(e.num)+"\n                ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"boxItem"},[t._v("\n                  ￥"+t._s(t._f("formatMoney")(e.order_money))+"\n                ")]),o("div",{staticClass:"boxItem"},[o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"删除该产品？"},on:{confirm:function(o){return t.goodsDel(e.order_goods_id)}}},[o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)],1)])],1)})],2)],1)],1),o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"headerBox",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("收款/退款 信息")])]),o("el-row",[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{visibility:"hidden"}},[t._v("\n              1\n            ")])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"priceInfo"},[o("div",{staticClass:"priceOption"},[t._v("\n                订单金额\n              ")]),o("div",[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.orderInfo.order_money))+"\n              ")])]),o("el-divider"),o("div",{staticClass:"priceInfo"},[o("div",{staticClass:"priceOption"},[t._v("\n                预付定金\n              ")]),o("div",[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.orderInfo.book_money))+"\n              ")])]),o("div",{staticClass:"priceInfo",staticStyle:{"justify-content":"space-between"}},[o("div",{staticStyle:{display:"flex"}},[o("div",{staticClass:"priceOption"},[t._v("\n                  收款金额\n                ")]),o("div",[o("el-popover",{attrs:{placement:"bottom",title:"收款列表",width:"200",trigger:"click"},on:{show:t.getCreditList}},[o("div",[t._l(t.creditList,function(e,s){return o("div",{key:s,staticClass:"cListItem"},[o("div",[t._v(t._s(e.channel)+" ￥"+t._s(t._f("formatMoney")(e.money)))]),o("div",[o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"删除该收款记录？"},on:{confirm:function(o){return t.creditDel(e)}}},[o("el-button",{staticStyle:{color:"#e43d30"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)],1)])}),0==t.creditList.length?o("div",{staticStyle:{color:"#777"}},[t._v("\n                        无收款记录\n                      ")]):t._e()],2),o("el-button",{staticStyle:{padding:"0 0"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("￥"+t._s(t._f("formatMoney")(t.orderInfo.credit_money)))])],1)],1)]),o("el-button",{staticStyle:{padding:"0 0"},attrs:{type:"text"},on:{click:t.openCredit}},[t._v("收款")])],1),o("div",{staticClass:"priceInfo",staticStyle:{"justify-content":"space-between"}},[o("div",{staticStyle:{display:"flex"}},[o("div",{staticClass:"priceOption"},[t._v("\n                  减免金额\n                ")]),o("div",[o("el-popover",{attrs:{placement:"bottom",title:"收款列表",width:"200",trigger:"click"},on:{show:t.getReduceList}},[o("div",[t._l(t.reduceList,function(e,s){return o("div",{key:s,staticClass:"cListItem"},[o("div",[t._v(t._s(e.channel)+" ￥"+t._s(t._f("formatMoney")(e.money)))]),o("div",[o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"删除该减免记录？"},on:{confirm:function(o){return t.creditDel(e)}}},[o("el-button",{staticStyle:{color:"#e43d30"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)],1)])}),0==t.reduceList.length?o("div",{staticStyle:{color:"#777"}},[t._v("\n                        无减免记录\n                      ")]):t._e()],2),o("el-button",{staticStyle:{padding:"0 0"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("￥"+t._s(t._f("formatMoney")(t.orderInfo.reduce_money)))])],1)],1)]),o("el-button",{staticStyle:{padding:"0 0"},attrs:{type:"text"},on:{click:t.openReduce}},[t._v("减免")])],1),o("el-divider"),o("div",{staticClass:"priceInfo"},[o("div",{staticClass:"priceOption"},[t._v("\n                实收金额\n              ")]),o("div",[t._v("\n                ￥"+t._s(t._f("formatMoney")(Number(t.orderInfo.book_money)+Number(t.orderInfo.credit_money)-Number(t.orderInfo.reduce_money)))+"\n              ")])])],1)],1)],1),o("el-card",{staticClass:"box-card"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("订单备注")]),o("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:t.openShowMod}},[t._v("编辑备注")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.orderInfo.notice,expression:"orderInfo.notice"}],staticStyle:{color:"#777"}},[t._v("\n          "+t._s(t.orderInfo.notice)+"\n        ")])]),o("span",{staticClass:"dialog-footer"},[o("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"完成该订单？"},on:{confirm:t.finishOrder}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.orderInfo.order_status,expression:"orderInfo.order_status == 1"}],staticStyle:{float:"right","margin-top":"20px"},attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v("完成服务")])],1)],1)],1)]),o("mod-contact",{ref:"modContact"}),o("reduce-price",{ref:"reducePrice"}),o("credit-price",{ref:"creditPrice"}),o("add-goods",{ref:"addGoods"}),o("el-dialog",{attrs:{title:"订单备注",visible:t.showMod,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.showMod=e}}},[o("el-input",{attrs:{type:"textarea",rows:4,placeholder:"订单备注内容"},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}}),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.showMod=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.noticeMod}},[t._v("确 定")])],1)],1)],1)},n=[],r=o("f8b7"),i=o("9292"),a=o("c0fe"),c=o("0ea8"),d=o("0ba8"),l={data:function(){return{show:!1,order_id:"",orderInfo:{},creditList:[],reduceList:[],showMod:!1,notice:""}},components:{modContact:i["default"],reducePrice:a["default"],creditPrice:c["default"],addGoods:d["default"]},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{handleOrderType:function(){switch(this.orderInfo.order_type){case"1":return"公众号下单";case"2":return"到店下单";default:return"到店下单"}},handlePayMoney:function(){return this.orderInfo.order_money-this.orderInfo.book_money}},methods:{finishOrder:function(){var t=this;console.log("123"),Object(r["d"])({order_id:this.orderInfo.order_id}).then(function(e){0==e.code&&(t.$message({message:"订单已完成",type:"success"}),t.getOrderInfo(),t.$parent.refresh())})},goodsDel:function(t){var e=this;Object(r["l"])({order_goods_id:t}).then(function(t){0==t.code&&(e.$message({message:"删除成功",type:"success"}),e.getOrderInfo())})},showAddGoods:function(){this.$refs["addGoods"].open(this.order_id)},creditDel:function(t){var e=this;Object(r["c"])({credit_id:t.credit_id}).then(function(o){console.log(o),0==o.code&&(e.$message({message:"删除成功",type:"success"}),1==t.in_out?e.getCreditList():e.getReduceList(),e.getOrderInfo())})},getReduceList:function(){var t=this;Object(r["e"])({order_id:this.order_id,in_out:-1}).then(function(e){t.reduceList=e.data?e.data:[]})},getCreditList:function(){var t=this;Object(r["e"])({order_id:this.order_id}).then(function(e){t.creditList=e.data?e.data:[]})},openReduce:function(){this.$refs["reducePrice"].open(this.order_id)},openCredit:function(){this.$refs["creditPrice"].open(this.order_id)},openShowMod:function(){this.notice=this.orderInfo.notice,this.showMod=!0},noticeMod:function(){var t=this;Object(r["m"])({order_id:this.order_id,notice:this.notice}).then(function(e){0==e.code&&(t.$message({message:"修改成功",type:"success"}),t.orderInfo.notice=t.notice,t.showMod=!1)})},openModContact:function(){this.$refs["modContact"].open(this.orderInfo.append_data,this.order_id)},getOrderInfo:function(){var t=this;Object(r["h"])({order_id:this.order_id}).then(function(e){console.log(e),t.orderInfo=e.data,t.orderInfo.append_data=JSON.parse(t.orderInfo.append_data),t.orderInfo.attrs_value=JSON.parse(t.orderInfo.attrs_value)})},open:function(t){this.show=!0,this.order_id=t,this.getOrderInfo()},closed:function(){}}},u=l,f=(o("c7db"),o("2877")),p=Object(f["a"])(u,s,n,!1,null,"40d0cf73",null);e["default"]=p.exports},f8b7:function(t,e,o){"use strict";o.d(e,"i",function(){return r}),o.d(e,"h",function(){return i}),o.d(e,"b",function(){return a}),o.d(e,"m",function(){return c}),o.d(e,"o",function(){return d}),o.d(e,"e",function(){return l}),o.d(e,"c",function(){return u}),o.d(e,"g",function(){return f}),o.d(e,"k",function(){return p}),o.d(e,"l",function(){return v}),o.d(e,"d",function(){return h}),o.d(e,"f",function(){return m}),o.d(e,"n",function(){return _}),o.d(e,"p",function(){return g}),o.d(e,"a",function(){return b}),o.d(e,"j",function(){return y}),o.d(e,"q",function(){return I});var s=o("365c"),n={list:"list",setAddress:"setAddress",getShipComs:"getShipComs",setShip:"setShip",getOrderInfo:"info",contactMod:"contactMod",noticeMod:"noticeMod",priceReduce:"reduce",priceCredit:"credit",getCreditList:"creditList",creditDel:"creditDel",getOGoodsList:"goodsList",goodsAdd:"goodsAdd",goodsDel:"goodsDel",finishOrder:"finish",listWork:"listWork",orderAdd:"add",reBook:"reBook",cancelOrder:"cancel",getShipList:"express",setShiping:"setShiping"};function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.list,t,"api/order")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getOrderInfo,t,"api/order")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.contactMod,t,"api/order")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.noticeMod,t,"api/order")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.priceCredit,t,"api/order")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getCreditList,t,"api/order")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.creditDel,t,"api/order")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getOGoodsList,t,"api/order")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.goodsAdd,t,"api/order")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.goodsDel,t,"api/order")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.finishOrder,t,"api/order")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.listWork,t,"api/order")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.orderAdd,t,"api/order")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.reBook,t,"api/order")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.cancelOrder,t,"api/order")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getShipList,t,"api/order")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.setShiping,t,"api/order")}}}]);