(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d9182c8","chunk-31905c06","chunk-c11905c8","chunk-f6102e1c"],{6070:function(t,a,e){"use strict";e.r(a);var r=e("d553");a["default"]=r["default"]},a3ab:function(t,a,e){"use strict";e.r(a);var r=e("ed85");a["default"]=r["default"]},c40e:function(t,a,e){"use strict";e.d(a,"c",function(){return o}),e.d(a,"m",function(){return i}),e.d(a,"i",function(){return s}),e.d(a,"J",function(){return d}),e.d(a,"G",function(){return u}),e.d(a,"I",function(){return l}),e.d(a,"F",function(){return c}),e.d(a,"w",function(){return p}),e.d(a,"t",function(){return f}),e.d(a,"r",function(){return h}),e.d(a,"u",function(){return g}),e.d(a,"s",function(){return v}),e.d(a,"o",function(){return m}),e.d(a,"v",function(){return _}),e.d(a,"x",function(){return A}),e.d(a,"q",function(){return S}),e.d(a,"p",function(){return b}),e.d(a,"A",function(){return w}),e.d(a,"z",function(){return y}),e.d(a,"y",function(){return k}),e.d(a,"B",function(){return x}),e.d(a,"n",function(){return V}),e.d(a,"K",function(){return L}),e.d(a,"L",function(){return D}),e.d(a,"g",function(){return G}),e.d(a,"h",function(){return $}),e.d(a,"a",function(){return C}),e.d(a,"b",function(){return I}),e.d(a,"f",function(){return R}),e.d(a,"j",function(){return P}),e.d(a,"H",function(){return N}),e.d(a,"d",function(){return M}),e.d(a,"e",function(){return O}),e.d(a,"l",function(){return j}),e.d(a,"k",function(){return z}),e.d(a,"C",function(){return T}),e.d(a,"E",function(){return E}),e.d(a,"D",function(){return J});var r=e("365c"),n={groupList:"groupList",groupAdd:"groupAdd",groupMod:"groupMod",groupDel:"groupDel",goodsGroupList:"list",goodsGroupAdd:"add",goodsGroupMod:"mod",goodsGroupDel:"del",goodsGroupTree:"tree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList",setGoodsTop:"topSet",draftGet:"draftGet",draftSet:"draftSet",profitList:"profitList",imgGet:"imgsGet",setImgs:"imgsSet",serveGet:"serviceGet",setServe:"serviceSet",getAttrs:"attrs",getSkuShops:"skuShops",checkGoods:"check"};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.checkGoods,t,"api/goods")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getSkuShops,t,"api/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getAttrs,t,"api/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.setServe,t,"api/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.serveGet,t,"api/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.setImgs,t,"api/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.imgGet,t,"api/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsList,t,"api/goods")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsGroupList,t,"api/group")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsGroupAdd,t,"api/group")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsGroupMod,t,"api/group")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsGroupDel,t,"api/group")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsAdd,t,"api/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsGroupTree,t,"api/group")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsMod,t,"api/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsDel,t,"api/goods")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsAttrSet,t,"api/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsSkuSet,t,"api/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsSkuGet,t,"api/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsRun,t,"api/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.goodsStop,t,"api/goods")}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(n.topList,t,"api/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(n.setTop,t,"api/goods")}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].get(n.topCancel,t,"api/goods")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.applyList,t,"api/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.applyPool,t,"api/goods")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.applyCalc,t,"api/goods")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.applyPut,t,"api/goods")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.fixPut,t,"api/goods")}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.fixList,t,"api/goods")}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.setGoodsTop,t,"api/goods")}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.draftGet,t,"api/goods")}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.draftSet,t,"api/goods")}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.profitList,t,"api/goods")}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.groupList,t,"api/goods")}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.groupAdd,t,"api/goods")}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.groupMod,t,"api/goods")}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.groupDel,t,"api/goods")}},c68a:function(t,a,e){},c933:function(t,a,e){"use strict";var r=e("c68a"),n=e.n(r);n.a},d553:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{title:"规格设置",visible:t.show,width:"70%"},on:{"update:visible":function(a){t.show=a}}},[e("div",[e("formAttr",{attrs:{attr:t.data.attrs,group_id:t.data.group_id},on:{"update:attr":function(a){return t.$set(t.data,"attrs",a)}}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.show=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])},n=[],o=(e("ac6a"),e("a3ab")),i=e("c40e"),s={components:{formAttr:o["default"]},data:function(){return{data:{},show:!1}},methods:{open:function(t){this.data=t,this.show=!0},submit:function(){var t=this,a=this.data,e=a.attrs,r=a.goods_id;e.forEach(function(a){if(!a||0==a.values.length)throw t.$message({message:"规格名称 ".concat(a.attr_name," ，缺少规格值"),type:"warning"}),"规格名称 ".concat(a.attr_name," ，缺少规格值");delete a.attr_id,delete a.create_time,delete a.goods_id,a.values.forEach(function(t){delete t.attr_id,delete t.attr_value_id,delete t.create_time})}),e=JSON.stringify(e),Object(i["p"])({attrs:e,goods_id:r}).then(function(a){0==a.code&&(t.$message({message:"重置成功",type:"success"}),t.show=!1,t.$parent.refresh())})}}},d=s,u=e("2877"),l=Object(u["a"])(d,r,n,!1,null,"5de83fa3",null);a["default"]=l.exports},ed85:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasAttrs,expression:"hasAttrs"}],attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.showAddStandardAttr}},[t._v('"参数选择"定义属性')]),e("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.ShowAdd,callback:function(a){t.ShowAdd=a},expression:"ShowAdd"}},[e("div",{staticClass:"addAttrWrap"},[e("el-input",{attrs:{size:"mini",width:"100px",placeholder:"请输入规格名称"},model:{value:t.attr_item.attr_name,callback:function(a){t.$set(t.attr_item,"attr_name",a)},expression:"attr_item.attr_name"}}),e("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.addAttrItem}},[t._v("添加")])],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-plus",type:"primary",size:"mini"},slot:"reference"},[t._v('"文字描述"定义属性')])],1),e("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.attr,border:""}},[e("el-table-column",{attrs:{prop:"attr_name",label:"规格名称",width:"200"}}),e("el-table-column",{attrs:{prop:"attr_value",label:"规格值"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.values,function(r,n){return e("el-tag",{key:r.attr_value,staticClass:"tag",attrs:{name:r.attr_value,type:"info","disable-transitions":!0,closable:""},on:{click:function(e){return t.editAttrValue(r,a.$index,n)},close:function(e){return t.delAttrValue(a.$index,n)}}},[t._v("\n          "+t._s(r.attr_value)+"\n        ")])}),t.haveStandardValue(a.row.attr_name)?e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(e){return t.addStandardValueDialog(a.$index,a.row.attr_name)}}},[t._v('"参数选择"定义属性值')]):t._e(),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(e){return t.addAttrDialog(a.$index)}}},[t._v('"文字描述"定义属性值')])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(e){return t.delAttr(a.$index)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{"append-to-body":"",title:"属性值",visible:t.addAttrValueShow,width:"30%"},on:{"update:visible":function(a){t.addAttrValueShow=a},closed:t.closed}},[e("el-form",{ref:"addAttrValueData",attrs:{"label-width":"auto",model:t.attr_value,rules:t.rules}},[e("el-form-item",{attrs:{label:"规格值",prop:"attr_value"}},[e("el-input",{model:{value:t.attr_value.attr_value,callback:function(a){t.$set(t.attr_value,"attr_value",a)},expression:"attr_value.attr_value"}})],1)],1),e("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getPic}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.addAttrValueShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.setAttrValue}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{"append-to-body":"",top:"20px",title:"标准属性值",visible:t.addStandardAttrShow},on:{"update:visible":function(a){t.addStandardAttrShow=a},closed:t.closed}},[e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-radio-group",{model:{value:t.group_id,callback:function(a){t.group_id=a},expression:"group_id"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("绿植类")]),e("el-radio-button",{attrs:{label:"2"}},[t._v("非绿植类")])],1)],1),e("el-row",[e("el-col",{staticStyle:{"border-right":"1px solid #ddd"},attrs:{span:6}},[e("div",{staticClass:"scrollBox"},[e("el-radio-group",{model:{value:t.standarAttr,callback:function(a){t.standarAttr=a},expression:"standarAttr"}},t._l(t.attrsNames,function(a,r){return e("el-radio",{key:r,attrs:{label:a},on:{change:t.attrsNameChange}},[t._v(t._s(a))])}),1)],1)]),e("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:18}},[e("el-checkbox-group",{model:{value:t.standardValueList,callback:function(a){t.standardValueList=a},expression:"standardValueList"}},t._l(t.valueData,function(t,a){return e("el-checkbox",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.standarAttr="",t.standardValueList=[],t.valueData=[],t.addStandardAttrShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addStandardAttrAndValue}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{"append-to-body":"",title:'"参数选择"定义属性值',visible:t.addStandardValueShow},on:{"update:visible":function(a){t.addStandardValueShow=a},closed:t.closed}},[e("el-checkbox-group",{model:{value:t.standardValueList,callback:function(a){t.standardValueList=a},expression:"standardValueList"}},t._l(t.valueData,function(t,a){return e("el-checkbox",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.standardValueList=[],t.addStandardValueShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addStandardValue}},[t._v("确 定")])],1)],1)],1)},n=[],o=e("cebc"),i=(e("ac6a"),e("7f7f"),e("7514"),e("0bba")),s=e("c40e"),d={components:{PictureLibrary:i["a"]},watch:{group_id:{handler:function(t){t&&this.getAttrs()},immediate:!0}},props:{attr:{type:[Array,String],required:!0,default:function(){return[]}}},data:function(){return{group_id:"1",ShowAdd:!1,addAttrValueShow:!1,data:[],rowIndex:"",rowIdx:"",attr_item:{attr_name:"",values:[]},attr_value:{attr_value:"",attr_img:"",min_img:""},rules:{attr_value:[{required:!0,message:"请输入规格值",trigger:"blur"}]},addStandardAttrShow:!1,standardAttrList:[],standardRadio:{},attrsData:[],hasAttrs:!1,addStandardValueShow:!1,standardRowName:"",standardValueList:[],valueData:[],attrsNames:[],standarAttr:""}},methods:{addStandardAttrAndValue:function(){if(""!=this.standarAttr)if(0!=this.standardValueList.length){var t=[];this.standardValueList.map(function(a,e){t.push({attr_value:a})}),this.attr.push({attr_name:this.standarAttr,values:t}),this.standarAttr="",this.standardValueList=[],this.valueData=[],this.addStandardAttrShow=!1}else this.$message({message:"请选择属性值",type:"warning"});else this.$message({message:"请选择属性",type:"warning"})},attrsNameChange:function(){var t=this;this.standardValueList=[];var a=this.attrsData.find(function(a){return Array.isArray(a.name)?a.name.some(function(a){return a==t.standarAttr})?a:void 0:a.name==t.standarAttr});this.valueData=a.value},getAttrs:function(){var t=this;Object(s["i"])({group_id:this.group_id}).then(function(a){a.data?(t.hasAttrs=!0,t.attrsData=a.data,t.attrsNames=t.attrsData.flatMap(function(t){return t.name})):t.hasAttrs=!1,t.$emit("changeRim",a.msg)})},handleCheckChange:function(t,a){if(console.log(this.standardRadio[a],!this.standardRadio[a]),1!=a.length)if(t){if(!this.standardRadio[a]){var e=this.standardAttrList.indexOf(a);console.log(e,"下标"),this.standardAttrList.splice(e,1)}}else this.standardRadio[a]=null},handleRadioChange:function(t,a){this.standardAttrList.some(function(t){return t==a})||this.standardAttrList.push(a)},addStandardValue:function(){var t=this;this.standardValueList.map(function(a,e){t.attr[t.rowIndex].values.push({attr_value:a})}),this.standardValueList=[],this.addStandardValueShow=!1},haveStandardValue:function(t){var a=this.attrsData.some(function(a){return Array.isArray(a.name)?a.name.some(function(a){return a==t})?a:void 0:a.name==t});return a},addStandardValueDialog:function(t,a){var e=this;this.standardRowName=a,this.rowIndex=t;var r=this.attrsData.find(function(t){return Array.isArray(t.name)?t.name.some(function(t){return t==e.standardRowName})?t:void 0:t.name==e.standardRowName});console.log(r),r?(this.valueData=r.value,this.addStandardValueShow=!0):this.$message({message:'此规格无"参数选择"定义属性值',type:"warning"})},addStandardAttr:function(){var t=this;this.standardAttrList.map(function(a,e){1!=a.length?t.standardRadio[a]&&t.attr.push({attr_name:t.standardRadio[a],values:[]}):t.attr.push({attr_name:a[0],values:[]})}),this.standardAttrList=[],this.standardRadio={},this.addStandardAttrShow=!1},showAddStandardAttr:function(){this.addStandardAttrShow=!0,this.ShowAdd=!1,console.log(this.group_id)},closed:function(){this.rowIndex="",this.rowIdx="",this.attr_value.min_img="",this.attr_value.attr_img="",this.attr_value.attr_value=""},addAttrItem:function(){this.attr_item.attr_name&&(this.attr.push(Object(o["a"])({},this.attr_item)),this.attr_item={attr_name:"",values:[]},this.ShowAdd=!1,this.updateAttr())},addAttrDialog:function(t){this.rowIndex=t,this.addAttrValueShow=!0},editAttrValue:function(t,a,e){this.attr_value=Object(o["a"])({},t),this.rowIndex=a,this.rowIdx=e,this.addAttrValueShow=!0},selectPic:function(){this.$refs.pic.open()},getPic:function(t){this.attr_value.attr_img=t.src_file,this.attr_value.min_img=t.min_file},setAttrValue:function(){var t=!1;if(this.$refs["addAttrValueData"].validate(function(a){t=a}),t){var a=this.attr_value,e=a.attr_value,r=a.attr_img;"string"==typeof this.rowIdx?this.attr[this.rowIndex].values.push({attr_value:e,attr_img:r}):this.$set(this.attr[this.rowIndex].values,this.rowIdx,{attr_value:e,attr_img:r}),this.updateAttr(),this.addAttrValueShow=!1}},delAttr:function(t){this.attr.splice(t,1),this.updateAttr()},delAttrValue:function(t,a){this.attr[t].values.splice(a,1),this.updateAttr()},updateAttr:function(){this.$emit("update:attr",this.attr)}}},u=d,l=(e("c933"),e("2877")),c=Object(l["a"])(u,r,n,!1,null,"848b9326",null);a["default"]=c.exports}}]);