(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62ddd954","chunk-366ba38c"],{"243b":function(e,t,i){"use strict";i.r(t);var r=i("8379");t["default"]=r["default"]},"525b":function(e,t,i){"use strict";var r=i("d2f2"),n=i.n(r);n.a},8379:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mainInfo"},[i("div",{staticClass:"formContent"},[i("div",{staticClass:"pageTitle"},[e._v("\n      主体信息\n    ")]),i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[i("div",{staticClass:"subTitle"},[e._v("\n        主体身份 "),i("span",{staticStyle:{color:"#aaa","margin-left":"20px"}},[e._v('请上传"营业执照"，需年检章齐全，当年注册除外')])]),i("div",{staticClass:"formBox"},[i("el-form-item",{attrs:{label:"营业执照照片",prop:"license_copy"}},[i("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadPhoto,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.licenseCopyList}},[e.form.license_copy?i("img",{staticClass:"avatar",attrs:{src:e.form.license_copy}}):i("i",{staticClass:"el-icon-plus"})]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),i("div",{staticClass:"formBox"},[i("el-form-item",{attrs:{label:"注册号",prop:"license_number"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.license_number,callback:function(t){e.$set(e.form,"license_number",t)},expression:"form.license_number"}}),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n              请依据营业执照，填写18位的统一社会信用代码\n            ")])],1),i("el-form-item",{attrs:{label:"商户名称",prop:"merchant_name"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.merchant_name,callback:function(t){e.$set(e.form,"merchant_name",t)},expression:"form.merchant_name"}})],1),i("el-form-item",{attrs:{label:"注册地址",prop:"license_address"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.license_address,callback:function(t){e.$set(e.form,"license_address",t)},expression:"form.license_address"}})],1),i("el-form-item",{attrs:{label:"营业期限",prop:"period_begin"}},[i("div",{staticStyle:{display:"flex"}},[i("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.period_begin,callback:function(t){e.$set(e.form,"period_begin",t)},expression:"form.period_begin"}}),e.longTime?e._e():i("div",[i("span",{staticStyle:{margin:"0 20px"}},[e._v("至")]),i("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.period_end,callback:function(t){e.$set(e.form,"period_end",t)},expression:"form.period_end"}})],1),i("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.longTime,callback:function(t){e.longTime=t},expression:"longTime"}},[e._v("长期有效")])],1)])],1),i("el-form-item",{attrs:{label:"经营者姓名/法定代表人",prop:"legal_person"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.legal_person,callback:function(t){e.$set(e.form,"legal_person",t)},expression:"form.legal_person"}})],1)],1),i("div",{staticClass:"subTitle"},[e._v("\n        法定代表人证件 "),i("span",{staticStyle:{color:"#aaa","margin-left":"20px"}},[e._v("请上传法定代表人的证件信息")])]),i("div",{staticClass:"formBox"},[i("el-form-item",{attrs:{label:"身份证人像面照片",prop:"id_card_copy"}},[i("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadIdCopy,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.idCardCopyList}},[e.form.id_card_copy?i("img",{staticClass:"avatar",attrs:{src:e.form.id_card_copy}}):i("i",{staticClass:"el-icon-plus"})]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),i("div",{staticClass:"formBox"},[i("el-form-item",{attrs:{label:"证件持有人姓名",prop:"id_card_name"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_name,callback:function(t){e.$set(e.form,"id_card_name",t)},expression:"form.id_card_name"}})],1),i("el-form-item",{attrs:{label:"证件号码",prop:"id_card_number"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_number,callback:function(t){e.$set(e.form,"id_card_number",t)},expression:"form.id_card_number"}})],1),i("el-form-item",{attrs:{label:"证件持有人住址",prop:"id_card_address"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.id_card_address,callback:function(t){e.$set(e.form,"id_card_address",t)},expression:"form.id_card_address"}})],1)],1),i("el-form-item",{attrs:{label:"身份证国徽面照片",prop:"id_card_national"}},[i("el-upload",{attrs:{action:"","list-type":"picture-card","http-request":e.uploadIdNational,"show-file-list":!1,limit:1,accept:"image/png, image/jpeg, image/bmp","on-exceed":e.handleExceed,"file-list":e.idCardNationalList}},[e.form.id_card_national?i("img",{staticClass:"avatar",attrs:{src:e.form.id_card_national}}):i("i",{staticClass:"el-icon-plus"})]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            1.请上传彩色照片 or 彩色扫描件 or 加盖公章鲜章的复印件，要求正面拍摄，露出证件四角且清晰、完整，所有字符清晰可识别，不得反光或遮挡。不得翻拍、截图、镜像、PS。\n          ")]),i("div",{staticStyle:{color:"#aaa"}},[e._v("\n            2.图片只支持JPG、BMP、PNG格式，文件大小不能超过2M。\n          ")])],1),i("div",{staticClass:"formBox"},[i("el-form-item",{attrs:{label:"证件有效期",prop:"card_period_begin"}},[i("div",{staticStyle:{display:"flex"}},[i("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.card_period_begin,callback:function(t){e.$set(e.form,"card_period_begin",t)},expression:"form.card_period_begin"}}),e.longIdTime?e._e():i("div",[i("span",{staticStyle:{margin:"0 20px"}},[e._v("至")]),i("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.card_period_end,callback:function(t){e.$set(e.form,"card_period_end",t)},expression:"form.card_period_end"}})],1),i("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.longIdTime,callback:function(t){e.longIdTime=t},expression:"longIdTime"}},[e._v("长期有效")])],1)])],1)],1)]),i("div",{staticStyle:{"margin-top":"40px"}},[i("el-button",{staticStyle:{width:"120px"},on:{click:e.toDataFill}},[e._v("返回")]),i("el-button",{staticStyle:{width:"120px"},on:{click:e.mchInfoSave}},[e._v("保存草稿")]),i("el-button",{staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(t){return e.mchInfoSave("next")}}},[e._v("下一步")])],1)],1)])},n=[],o=i("9add"),a=i("d1eb"),d={data:function(){return{licenseCopyList:[],idCardCopyList:[],idCardNationalList:[],form:{license_copy:"",license_number:"",merchant_name:"",license_address:"",legal_person:"",period_begin:"",period_end:"",id_card_copy:"",id_card_national:"",id_card_name:"",id_card_number:"",id_card_address:"",card_period_begin:"",card_period_end:""},value:"",longTime:!1,longIdTime:!1,rules:{license_number:[{required:!0,message:"请输入注册号",trigger:"change"}],merchant_name:[{required:!0,message:"请输入商户名称",trigger:"change"}],license_address:[{required:!0,message:"请输入注册地址",trigger:"change"}],legal_person:[{required:!0,message:"请输入经营者姓名/法定代表人",trigger:"change"}],period_begin:[{required:!0,message:"请输入营业期限",trigger:"change"}],id_card_name:[{required:!0,message:"请输入身份证姓名",trigger:"change"}],id_card_number:[{required:!0,message:"请输入身份证号码",trigger:"change"}],id_card_address:[{required:!0,message:"请输入身份证居住地址",trigger:"change"}],card_period_begin:[{required:!0,message:"请输入身份证有效期",trigger:"change"}]},step:1}},components:{},filters:{},created:function(){this.brandId=this.$route.params.brandId,this.mchInfoStepGet()},onShow:function(){},mounted:function(){},computed:{},methods:{toDataFill:function(){this.$router.push({path:"/dataFill/".concat(this.brandId),replace:!0})},mchInfoStepGet:function(){var e=this;Object(o["l"])({brand_id:this.brandId,step:this.step}).then((function(t){if(console.log(t),0==t.code&&t.data.step1){var i=JSON.parse(t.data.step1);e.form.license_copy=i.subject_info.license_copy,e.form.license_number=i.subject_info.license_number,e.form.merchant_name=i.subject_info.merchant_name,e.form.license_address=i.subject_info.license_address,e.form.legal_person=i.subject_info.legal_person,e.form.period_begin=i.subject_info.period_begin,e.form.period_end=i.subject_info.period_end,e.form.id_card_copy=i.id_card_info.id_card_copy,e.form.id_card_national=i.id_card_info.id_card_national,e.form.id_card_name=i.id_card_info.id_card_name,e.form.id_card_number=i.id_card_info.id_card_number,e.form.id_card_address=i.id_card_info.id_card_address,e.form.card_period_begin=i.id_card_info.card_period_begin,e.form.card_period_end=i.id_card_info.card_period_end}}))},mchInfoSave:function(e){var t=this;if("next"==e)this.$refs["form"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.form.license_copy)if(t.longTime||""!=t.form.period_end)if(t.form.id_card_copy)if(t.form.id_card_national)if(t.longIdTime||""!=t.form.card_period_end){var i=JSON.stringify(t.formatData());Object(o["k"])({brand_id:t.brandId,data:i,step:t.step,is_submit:1}).then((function(e){0==e.code&&t.$router.push({path:"/manageInfo/".concat(t.brandId),replace:!0})}))}else t.$message({message:"请输入身份证有效期结束时间",type:"error"});else t.$message({message:"请上传身份证人像面照片",type:"error"});else t.$message({message:"请上传身份证人像面照片",type:"error"});else t.$message({message:"请输入营业结束期限",type:"error"});else t.$message({message:"请上传营业执照照片",type:"error"})}));else{var i=JSON.stringify(this.formatData());Object(o["k"])({brand_id:this.brandId,data:i,step:this.step,is_submit:0}).then((function(e){0==e.code&&t.$message({message:"保存草稿成功",type:"success"})}))}},formatData:function(){var e={subject_info:{},id_card_info:{}};return e.subject_info.license_copy=this.form.license_copy,e.subject_info.license_number=this.form.license_number,e.subject_info.merchant_name=this.form.merchant_name,e.subject_info.license_address=this.form.license_address,e.subject_info.legal_person=this.form.legal_person,e.subject_info.period_begin=this.form.period_begin,e.subject_info.period_end=this.form.period_end,e.id_card_info.id_card_copy=this.form.id_card_copy,e.id_card_info.id_card_national=this.form.id_card_national,e.id_card_info.id_card_name=this.form.id_card_name,e.id_card_info.id_card_number=this.form.id_card_number,e.id_card_info.id_card_address=this.form.id_card_address,e.id_card_info.card_period_begin=this.form.card_period_begin,e.id_card_info.card_period_end=this.form.card_period_end,console.log(e),e},uploadPhoto:function(e){console.log(e),this.uploadPic(e.file,"licenseCopy")},uploadIdCopy:function(e){this.uploadPic(e.file,"idCardCopy")},uploadIdNational:function(e){this.uploadPic(e.file,"idCardNational")},uploadPic:function(e,t){var i=this;this.notify||(this.notify=this.$notify({title:"请不要离开页面",duration:0,iconClass:"el-icon-loading",showClose:!1})),this.notify.message="正在上传",Object(a["x"])({file:e,type:0}).then((function(e){console.log(e,t),"licenseCopy"==t&&(i.form.license_copy=e.data.file),"idCardCopy"==t&&(i.form.id_card_copy=e.data.file),"idCardNational"==t&&(i.form.id_card_national=e.data.file),i.notify.close(),i.$notify({title:"提示",message:"上传成功",type:"success",duration:1e3})}),(function(e){console.log(e)}))},handleRemove:function(e){this.form.license_copy.splice(delIndex,1)},handleExceed:function(e){this.$message({type:"error",message:"当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件")})}}},s=d,c=(i("525b"),i("2877")),l=Object(c["a"])(s,r,n,!1,null,"10f8a3ec",null);t["default"]=l.exports},"9add":function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return a})),i.d(t,"n",(function(){return d})),i.d(t,"p",(function(){return s})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return u})),i.d(t,"o",(function(){return p})),i.d(t,"g",(function(){return f})),i.d(t,"f",(function(){return m})),i.d(t,"h",(function(){return _})),i.d(t,"j",(function(){return g})),i.d(t,"l",(function(){return h})),i.d(t,"k",(function(){return v})),i.d(t,"m",(function(){return b})),i.d(t,"i",(function(){return y}));var r=i("365c"),n={brandList:"list",addBrand:"add",runBrand:"run",stopBrand:"stop",editBrand:"mod",getAppBindUrl:"getAppBindUrl",getGhMes:"getAppBindInfo",setBookConfig:"bookConfig",brandMod:"mod",getBookConfig:"getBookConfig",getWorkData:"workData",getReport:"report",setTemplate:"setTemplate",mchInfoAdd:"mchInfoAdd",mchInfoMod:"mchInfoMod",mchInfoStepGet:"mchInfoStepGet",mchInfoSave:"mchInfoSave",mchInfoSubmit:"mchInfoSubmit",mchInfoGet:"mchInfoGet"};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.brandList,e,"api/brand")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addBrand,e,"api/brand")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.runBrand,e,"api/brand")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.stopBrand,e,"api/brand")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.editBrand,e,"api/brand")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getAppBindUrl,e,"api/brand")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getGhMes,e,"api/brand")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.setBookConfig,e,"api/brand")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getWorkData,e,"api/brand")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getReport,e,"api/brand")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoAdd,e,"api/brand")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoMod,e,"api/brand")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoStepGet,e,"api/brand")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoSave,e,"api/brand")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoSubmit,e,"api/brand")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.mchInfoGet,e,"api/brand")}},d1eb:function(e,t,i){"use strict";i.d(t,"n",(function(){return o})),i.d(t,"l",(function(){return a})),i.d(t,"r",(function(){return d})),i.d(t,"m",(function(){return s})),i.d(t,"o",(function(){return c})),i.d(t,"d",(function(){return l})),i.d(t,"i",(function(){return u})),i.d(t,"v",(function(){return p})),i.d(t,"a",(function(){return f})),i.d(t,"f",(function(){return m})),i.d(t,"s",(function(){return _})),i.d(t,"j",(function(){return g})),i.d(t,"t",(function(){return h})),i.d(t,"g",(function(){return v})),i.d(t,"e",(function(){return b})),i.d(t,"w",(function(){return y})),i.d(t,"b",(function(){return I})),i.d(t,"h",(function(){return x})),i.d(t,"x",(function(){return S})),i.d(t,"k",(function(){return C})),i.d(t,"q",(function(){return k})),i.d(t,"u",(function(){return G})),i.d(t,"c",(function(){return M})),i.d(t,"p",(function(){return j}));var r=i("365c"),n={getImgList:"getImgList",getAudioList:"getAudioList",getVideoList:"getVideoList",getFileList:"getFileList",getResGroups:"getResGroups",addResGroup:"addResGroup",delResGroup:"delResGroup",modResGroup:"modResGroup",addAudio:"addAudio",addVideo:"addVideo",addFile:"addFile",modFile:"modFile",modAudio:"modAudio",modVideo:"modVideo",modImage:"modImage",delAudio:"delAudio",delVideo:"delVideo",delFile:"delFile",delImage:"delImage",getAudioDuration:"getAudioDuration",getVideoCover:"getVideoCover",uploadFile:"uploadFile",addImage:"addImage",getResSize:"resSize"};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getImgList,e,"api/res")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getAudioList,e,"api/res")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getVideoList,e,"api/res")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getFileList,e,"api/res")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getResGroups,e,"api/res")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addResGroup,e,"api/res")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.delResGroup,e,"api/res")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.modResGroup,e,"api/res")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addAudio,e,"api/res")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.delAudio,e,"api/res")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.modAudio,e,"api/res")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.delVideo,e,"api/res")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.modFile,e,"api/res")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.delFile,e,"api/res")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addVideo,e,"api/res")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.modVideo,e,"api/res")}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addFile,e,"api/res")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.delImage,e,"api/res")}function S(e){return r["a"].post(n.uploadFile,e,"api/res")}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getAudioDuration,e,"api/res")}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getVideoCover,e,"api/res")}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.modImage,e,"api/res")}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.addImage,e,"api/res")}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(n.getResSize,e,"api/res")}},d2f2:function(e,t,i){}}]);