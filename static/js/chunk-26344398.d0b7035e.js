(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26344398","chunk-40be7dfc","chunk-4ce5e01f","chunk-2527049e","chunk-89b727f2"],{"10ac":function(t,e,o){"use strict";var n=o("555e"),r=o.n(n);r.a},"23e4":function(t,e,o){},"24d2":function(t,e,o){"use strict";o.d(e,"g",(function(){return a})),o.d(e,"m",(function(){return i})),o.d(e,"h",(function(){return s})),o.d(e,"f",(function(){return c})),o.d(e,"j",(function(){return l})),o.d(e,"i",(function(){return d})),o.d(e,"d",(function(){return u})),o.d(e,"e",(function(){return f})),o.d(e,"k",(function(){return p})),o.d(e,"l",(function(){return m})),o.d(e,"a",(function(){return h})),o.d(e,"c",(function(){return g})),o.d(e,"n",(function(){return v})),o.d(e,"b",(function(){return w}));var n=o("365c"),r={addProject:"add",editProject:"mod",getProjectList:"list",delProject:"del",flowStautsMod:"flowStautsMod",flowStatus:"flowStatus",flowActions:"flowActions",flowActionMod:"flowActionMod",flowInfo:"flowInfo",flowMod:"flowMod",flowAdd:"flowAdd",flowDel:"flowDel",flowList:"flowList",flowChartMod:"flowChartMod"};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowChartMod,t,"api/project")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowList,t,"api/project")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowDel,t,"api/project")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowAdd,t,"api/project")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowMod,t,"api/project")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowInfo,t,"api/project")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowActionMod,t,"api/project")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowActions,t,"api/project")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowStatus,t,"api/project")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.flowStautsMod,t,"api/project")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.addProject,t,"api/project")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.editProject,t,"api/project")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.getProjectList,t,"api/project")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["a"].post(r.delProject,t,"api/project")}},4632:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.data.total_count,"page-count":t.data.page_count,"page-size":t.data.page_size},on:{"current-change":t.change}})],1)},r=[],a={props:{data:{type:Object,default:function(){return{}}}},computed:{},methods:{change:function(t){this.$emit("change",t)}}},i=a,s=(o("10ac"),o("2877")),c=Object(s["a"])(i,n,r,!1,null,null,null),l=c.exports;e["a"]=l},"4f1d":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addOrModDialog"},[o("el-dialog",{attrs:{width:"30vw",title:"mod"==t.formType?"修改项目":"新增项目",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialog=e},closed:t.closedDialog}},[o("el-form",{ref:"form",attrs:{"label-width":"auto",model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"描述",prop:"intro"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}})],1),o("el-form-item",{attrs:{label:"logo",prop:"logo"}},[o("formCover",{attrs:{needBase:t.startsWithHttp,cover:t.form.logo},on:{"update:cover":function(e){return t.$set(t.form,"logo",e)}}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},r=[],a=(o("7f7f"),o("ceed")),i=o("24d2"),s={data:function(){return{dialog:!1,formType:"",id:"",form:{name:"",intro:"",logo:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},components:{formCover:a["default"]},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{startsWithHttp:function(){var t=/^http/;return!t.test(this.form.logo)}},methods:{open:function(t,e){this.formType=t,"mod"==this.formType&&(this.id=e.id,this.form.name=e.name,this.form.intro=e.intro,this.form.logo=e.logo),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={name:"",intro:"",logo:""},this.formType=""},submit:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var o={};o.name=t.form.name,o.intro=t.form.intro,o.logo=t.form.logo,"mod"==t.formType&&(o.id=t.id),console.log(o),"mod"==t.formType?t.editProject(o):t.addProject(o)}}))},editProject:function(t){var e=this;Object(i["c"])(t).then((function(t){0==t.code&&(e.$message({message:"修改项目成功！",type:"success"}),e.$emit("freshList"),e.dialog=!1)}))},addProject:function(t){var e=this;Object(i["a"])(t).then((function(t){0==t.code&&(e.$message({message:"新增项目成功！",type:"success"}),e.$emit("freshList"),e.dialog=!1)}))}}},c=s,l=o("2877"),d=Object(l["a"])(c,n,r,!1,null,"59fcb0eb",null);e["default"]=d.exports},"52a0":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getData}}),t.cover?o("div",{staticClass:"img-wrap"},[o("div",{staticClass:"img-item"},[o("i",{staticClass:"el-icon-close img-close",on:{click:t.del_cover}}),o("BaseElImage",{attrs:{custom_src:t.cover,previewList:[t.cover],needBase:t.needBase,fit:"cover"}})],1)]):o("div",{staticClass:"img-add",on:{click:function(e){return t.$refs.pic.open(!1)}}},[o("i",{staticClass:"el-icon-plus img-add-icon"})])],1)},r=[],a=o("0bba"),i={components:{PictureLibrary:a["a"]},props:{cover:{type:[Object,String],default:function(){return""}},needBase:{type:Boolean,default:function(){return!1}}},data:function(){return{}},methods:{getData:function(t){console.log(t),this.$emit("update:cover",t.src_file)},del_cover:function(){this.$emit("update:cover","")}}},s=i,c=(o("e323"),o("2877")),l=Object(c["a"])(s,n,r,!1,null,"6bcd37a9",null);e["default"]=l.exports},"555e":function(t,e,o){},"8a09":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addOrModDialog"},[o("el-dialog",{attrs:{width:"30vw",title:"新增流程",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialog=e},closed:t.closedDialog}},[o("el-form",{ref:"baseInfoForm",attrs:{"label-width":"auto",model:t.baseInfoForm,rules:t.rules}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.baseInfoForm.name,callback:function(e){t.$set(t.baseInfoForm,"name",e)},expression:"baseInfoForm.name"}})],1),o("el-form-item",{attrs:{label:"描述",prop:"intro"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:t.baseInfoForm.intro,callback:function(e){t.$set(t.baseInfoForm,"intro",e)},expression:"baseInfoForm.intro"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},r=[],a=(o("7f7f"),o("24d2")),i={data:function(){return{dialog:!1,project_id:"",baseInfoForm:{name:"",intro:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},components:{},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{open:function(t){this.project_id=t,this.dialog=!0},closedDialog:function(){this.$refs["baseInfoForm"].clearValidate(),this.baseInfoForm={name:"",intro:""}},submit:function(){var t=this;this.$refs["baseInfoForm"].validate((function(e){if(e){var o={};o.project_id=t.project_id,o.name=t.baseInfoForm.name,o.intro=t.baseInfoForm.intro,t.flowAdd(o)}}))},flowAdd:function(t){var e=this;Object(a["f"])(t).then((function(t){0==t.code&&(e.$message({message:"新增流程成功！",type:"success"}),e.$emit("freshList"),e.dialog=!1,e.$router.push({name:"setFlow",params:{flow_id:t.data.flow_id,project_id:e.project_id,type:"mod"}}))}))}}},s=i,c=o("2877"),l=Object(c["a"])(s,n,r,!1,null,"67c398de",null);e["default"]=l.exports},a8fd:function(t,e,o){},cdab:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"className"},[o("el-card",{staticClass:"anoCard"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("项目列表")])]),o("div",{staticClass:"searchDiv"},[o("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.add}},[t._v("添加")])],1),o("div",{staticClass:"box"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projectData.list,border:""}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[o("BaseElImage",{directives:[{name:"show",rawName:"v-show",value:e.row.logo,expression:"scope.row.logo"}],attrs:{custom_style:{width:"60px",height:"60px"},custom_src:e.row.logo,needBase:!1,fit:"cover"}}),o("div",[t._v("\n                "+t._s(e.row.name)+"\n              ")])],1)]}}])}),o("el-table-column",{attrs:{prop:"intro",label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[t._v("\n              "+t._s(e.row.intro?e.row.intro:"/")+"\n            ")])]}}])}),o("el-table-column",{attrs:{prop:"flows",label:"流程",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.flows,(function(n,r){return o("div",{key:r},[o("el-link",{attrs:{type:"primary"},on:{click:function(o){return t.toSetFlow(e.row.id,n.flow_id)}}},[t._v(t._s(n.name))]),o("el-popconfirm",{attrs:{title:"你确定要删除吗？",confirmButtonType:"danger"},on:{confirm:function(e){return t.delFlow(n.flow_id)}}},[o("el-button",{staticStyle:{"margin-left":"10px",color:"#e53e31"},attrs:{slot:"reference",type:"text",icon:"el-icon-delete"},slot:"reference"})],1)],1)})),o("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.addFlow(e.row.id)}}},[t._v("新增")])]}}])}),o("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"200"}}),o("el-table-column",{attrs:{prop:"status",label:"操作",width:"250px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.edit(e.row)}}},[t._v("编辑")]),o("el-popconfirm",{attrs:{title:"你确定要删除吗？",confirmButtonType:"danger"},on:{confirm:function(o){return t.del(e.row)}}},[o("el-button",{staticStyle:{"margin-left":"8px"},attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),o("pagination",{attrs:{data:t.projectData},on:{change:t.getProjectList}})],1),o("add-or-mod-dialog",{ref:"addOrModDialog",on:{freshList:t.getProjectList}}),o("add-or-mod-flow",{ref:"addOrModFlow",on:{freshList:t.getProjectList}})],1)},r=[],a=(o("96cf"),o("3b8d")),i=o("4f1d"),s=o("8a09"),c=o("4632"),l=o("24d2"),d={data:function(){return{projectData:{}}},components:{addOrModDialog:i["default"],addOrModFlow:s["default"],pagination:c["a"]},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProjectList();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{delFlow:function(t){var e=this;Object(l["h"])({flow_id:t}).then((function(t){0==t.code&&(e.getProjectList(),e.$message({message:"删除成功",type:"success"}))}))},addFlow:function(t){this.$refs["addOrModFlow"].open(t)},toSetFlow:function(t,e){var o=e?"mod":"add";this.$router.push({name:"setFlow",params:{flow_id:e,project_id:t,type:o}})},add:function(){this.$refs["addOrModDialog"].open()},edit:function(t){this.$refs["addOrModDialog"].open("mod",t)},del:function(t){var e=this;Object(l["b"])({id:t.id}).then((function(t){0==t.code&&(e.getProjectList(),e.$message({message:"删除成功",type:"success"}))}))},getProjectList:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["n"])().then((function(t){0==t.code&&(e.projectData=t.data)}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}},u=d,f=(o("e3da"),o("2877")),p=Object(f["a"])(u,n,r,!1,null,"6fd01315",null);e["default"]=p.exports},ceed:function(t,e,o){"use strict";o.r(e);var n=o("52a0");e["default"]=n["default"]},e323:function(t,e,o){"use strict";var n=o("23e4"),r=o.n(n);r.a},e3da:function(t,e,o){"use strict";var n=o("a8fd"),r=o.n(n);r.a}}]);