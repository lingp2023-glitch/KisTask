(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7466b08c","chunk-213076e5","chunk-4a2031b8","chunk-f4ab512a"],{"0719":function(e,t,a){"use strict";a.r(t);var o=a("97a1");t["default"]=o["default"]},"10ac":function(e,t,a){"use strict";var o=a("555e"),n=a.n(o);n.a},1942:function(e,t,a){"use strict";var o=a("c12a"),n=a.n(o);n.a},"1b96":function(e,t,a){"use strict";var o=a("a209"),n=a.n(o);n.a},"1e08":function(e,t,a){"use strict";var o=a("6b33"),n=a.n(o);n.a},4632:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.data.total_count,"page-count":e.data.page_count,"page-size":e.data.page_size},on:{"current-change":e.change}})],1)},n=[],s={props:{data:{type:Object,default:function(){return{}}}},computed:{},methods:{change:function(e){this.$emit("change",e)}}},r=s,i=(a("10ac"),a("2877")),l=Object(i["a"])(r,o,n,!1,null,null,null),c=l.exports;t["a"]=c},"555e":function(e,t,a){},"6b33":function(e,t,a){},"97a1":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.show,width:"30%"},on:{"update:visible":function(t){e.show=t},close:e.closed}},[a("div",[a("el-form",{ref:"form",staticClass:"form",attrs:{rules:e.rules,model:e.data,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"应用名称",prop:"app_name"}},[a("el-input",{model:{value:e.data.app_name,callback:function(t){e.$set(e.data,"app_name",t)},expression:"data.app_name"}})],1),a("el-form-item",{attrs:{label:"应用简介",prop:"intro"}},[a("el-input",{model:{value:e.data.intro,callback:function(t){e.$set(e.data,"intro",t)},expression:"data.intro"}})],1),a("el-form-item",{attrs:{label:"应用logo"}},[a("div",{staticClass:"form-logo",on:{click:e.openPic}},[e.data.min_logo||e.data.logo?a("base-img",{attrs:{custom_style:{width:"100px",height:"100px"},custom_src:e.data.logo,fit:"cover"}}):a("i",{staticClass:"el-icon-plus"})],1)])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)])},n=[],s=a("86d8"),r=a("365c"),i={appList:"list",appAdd:"add",appMod:"mod",appDel:"del"};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.appAdd,e,"gm/app")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].post(i.appMod,e,"gm/app")}var u={components:{baseImg:s["a"]},props:{data:{type:Object,required:!0},title:{type:String,default:function(){return"新增"}},type:{type:String,default:function(){return"add"}}},data:function(){return{show:!1,rules:{app_name:[{required:!0,message:"请输入应用名称",trigger:"blur"}],intro:[{required:!0,message:"请输入应用简介",trigger:"blur"}],logo:[{required:!0,message:"请选择应用logo",trigger:"blur"}]}}},methods:{closed:function(){this.$emit("update:data",{})},openPic:function(){this.$parent.openPic()},open:function(){this.show=!0},submit:function(){var e=!1;if(this.$refs["form"].validate(function(t){return e=t,t}),e)switch(this.type){case"add":this.appAdd();break;case"edit":this.appMod();break}},appAdd:function(){var e=this,t=this.data,a=t.app_name,o=t.logo,n=t.intro;l({app_name:a,logo:o,intro:n}).then(function(t){0==t.code?(e.$message({message:"新增成功",type:"success"}),e.$parent.appList()):e.$message({message:t.msg||"新增失败",type:"error"})}).finally(function(){e.show=!1})},appMod:function(){var e=this,t=this.data,a=t.app_name,o=t.logo,n=t.intro,s=t.app_code;c({app_name:a,logo:o,intro:n,app_code:s}).then(function(t){0==t.code?(e.$message({message:"修改成功",type:"success"}),e.$parent.appList()):e.$message({message:t.msg||"新增失败",type:"error"})}).finally(function(){e.show=!1})}}},d=u,p=(a("1e08"),a("2877")),f=Object(p["a"])(d,o,n,!1,null,"5059b344",null);t["default"]=f.exports},a209:function(e,t,a){},b843:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"className"},[a("el-card",{staticClass:"anoCard"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表")])]),a("div",{staticClass:"searchDiv"},[a("div",{staticClass:"search-name"},[a("el-input",{attrs:{placeholder:"查询字符"},model:{value:e.searchData.query_str,callback:function(t){e.$set(e.searchData,"query_str",t)},expression:"searchData.query_str"}})],1),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"success"},on:{click:e.getUserList}},[e._v("搜索")])],1)]),a("div",{staticClass:"box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userData.list,border:"","header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"userid",label:"用户ID"}}),a("el-table-column",{attrs:{label:"用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("BaseElImage",{attrs:{custom_style:{width:"60px",height:"60px"},custom_src:t.row.headimg,needBase:!1,fit:"cover"}}),a("br"),e._v("\n              "+e._s(t.row.nickname)+"  "+e._s(t.row.real_name)+"\n            ")],1)]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"balance",label:"余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(e._f("formatMoney")(t.row.balance))+"\n            ")])]}}])}),a("el-table-column",{attrs:{prop:"close_balance",label:"待提现金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(e._f("formatMoney")(t.row.cash_money))+"\n            ")])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"create_time",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{staticClass:"dropdown",attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.chargeMoney(t.row)}}},[e._v("\n                  充值余额\n                ")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.modMoney(t.row)}}},[e._v("\n                  修改余额\n                ")])],1)],1)]}}])})],1)],1),a("el-dialog",{attrs:{visible:e.dialog,width:"30vw"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"用户类型",prop:"userId"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"修改用户类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.setType}},[e._v("确定")])],1)],1),a("charge-or-mod-dia",{ref:"chargeOrModDia",on:{freshList:e.getUserList}}),a("pagination",{attrs:{data:e.userData},on:{change:e.getUserList}})],1)],1)},n=[],s=(a("be4f"),a("450d"),a("896a")),r=a.n(s),i=a("c24f"),l=a("0719"),c=a("0bba"),u=a("4632"),d=a("d6f7"),p={name:"user",components:{appDialog:l["default"],picLib:c["a"],pagination:u["a"],chargeOrModDia:d["default"]},data:function(){return{searchData:{query_str:""},options:{background:"rgba(0,0,0, 0.7)"},userData:{},typeList:[],dialog:!1,value:"",userId:""}},filters:{formatMoney:function(e){return(e/100).toFixed(2)}},computed:{page:function(){return this.userData.page}},created:function(){this.getUserList()},methods:{chargeMoney:function(e){this.$refs["chargeOrModDia"].open(e,0)},modMoney:function(e){this.$refs["chargeOrModDia"].open(e,1)},getUserList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this.searchData.query_str;Object(i["d"])({page:t,query_str:a}).then(function(t){0==t.code&&(e.userData=t.data)})},open:function(e){this.userId=e,this.dialog=!0},setType:function(){var e=this,t={};t.userid=this.userId,t.user_type=this.value;var a=r.a.service(this.options);Object(i["c"])(t).then(function(t){0==t.code&&(e.$message({message:"设置成功",type:"success"}),e.getUserList())},function(e){console.log(e)}).finally(function(){e.dialog=!1,a.close()})}}},f=p,m=(a("1942"),a("2877")),g=Object(m["a"])(f,o,n,!1,null,null,null);t["default"]=g.exports},c12a:function(e,t,a){},c24f:function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l});var o=a("365c"),n={userList:"list",typeList:"userTypeList",setType:"setUserType",chargeMoney:"charge",modBalance:"modBalance"};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(n.userList,e,"gm/user")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].get(n.setType,e,"gm/user")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(n.chargeMoney,e,"gm/user")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(n.modBalance,e,"gm/user")}},d6f7:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addOrModShop"},[a("el-dialog",{attrs:{title:0==e.formType?"充值余额":"修改余额",visible:e.dialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[a("el-form",{ref:"form",attrs:{"label-width":"auto",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:0==e.formType?"金额":"余额",prop:"money",required:""}},[a("el-input",{attrs:{placeholder:"请输入金额(单位元)",type:"number"},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("c24f"),r={data:function(){return{dialog:!1,formType:0,userid:null,form:{money:""},rules:{money:[{required:!0,message:"请输入金额(单位元)",trigger:"blur"}]}}},components:{},created:function(){},mounted:function(){},methods:{open:function(e,t){this.userid=e.userid,this.formType=t,1==this.formType&&(this.form.money=e.balance/100),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={money:""},this.userid="",this.formType=0},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate(function(t){if(t){var a={};a.userid=e.userid,a.money=100*e.form.money,console.log(a),0==e.formType?(console.log("充值余额"),e.chargeMoney(a)):(console.log("修改余额"),e.modBalance(a))}})},chargeMoney:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["a"])(t).then(function(t){0==t.code&&(e.$message({message:"充值余额成功！",type:"success"}),e.$emit("freshList")),e.dialog=!1})},modBalance:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["b"])(t).then(function(t){0==t.code&&(e.$message({message:"修改余额成功！",type:"success"}),e.$emit("freshList")),e.dialog=!1})}}},i=r,l=(a("1b96"),a("2877")),c=Object(l["a"])(i,o,n,!1,null,"40dba818",null);t["default"]=c.exports}}]);