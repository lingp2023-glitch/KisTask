(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1eafa70"],{"30a9":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editDia"},[a("el-dialog",{attrs:{title:t.title,width:"90vw",top:"3vh",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("picture-library",{ref:"pic",on:{getData:t.setCover}}),a("el-card",{staticClass:"anoCard"},[a("div",{staticClass:"box"},[a("div",{staticClass:"cover",on:{click:function(e){return t.$refs.pic.open(!1)}}},[t.docData.cover?[a("BaseElImage",{attrs:{custom_style:{width:"100%",height:"100%"},custom_src:t.docData.cover,fit:"cover"}})]:[a("div",{staticClass:"coverTips"},[a("i",{staticClass:"el-icon-picture"}),t._v("\n            点击选择封面\n          ")])]],2),a("div",{staticClass:"doc-form"},[a("el-form",{attrs:{"label-position":"right","label-width":"0",model:t.docData}},[a("el-form-item",{attrs:{label:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.docData.title,expression:"docData.title"}],staticClass:"my-input title",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.docData.title},on:{input:function(e){e.target.composing||t.$set(t.docData,"title",e.target.value)}}})]),a("el-form-item",{attrs:{label:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.docData.author,expression:"docData.author"}],staticClass:"my-input author",attrs:{type:"text",placeholder:"请输入作者"},domProps:{value:t.docData.author},on:{input:function(e){e.target.composing||t.$set(t.docData,"author",e.target.value)}}})]),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticClass:"my-input summary",attrs:{type:"textarea",rows:4,placeholder:"请输入摘要"},model:{value:t.docData.summary,callback:function(e){t.$set(t.docData,"summary",e)},expression:"docData.summary"}})],1),a("el-form-item",{attrs:{label:""}},[a("u-e",{ref:"quill",on:{senHtml:t.getHtml,UECover:t.UECover}})],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"submitWrap"},[a("div",{staticStyle:{"margin-right":"20px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.docData.group_id,callback:function(e){t.$set(t.docData,"group_id",e)},expression:"docData.group_id"}},[a("el-option",{attrs:{label:"未分组",value:"0"}}),t._l(t.groupList,function(t){return a("el-option",{key:t.group_id,attrs:{label:t.group_name,value:t.group_id}})})],2)],1),this.doc_id?a("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary"},on:{click:t.check_docData}},[t._v("编辑")]):a("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary"},on:{click:t.check_docData}},[t._v("发布")])],1)])],1)],1)])])],1)],1)},i=[],s=a("cebc"),c=a("cf2d"),n=a("0bba"),r=a("e475"),l=(a("3022"),{name:"media.edit",components:{UE:c["a"],PictureLibrary:n["a"]},data:function(){return{dialogVisible:!1,videoSelectModal:!1,groupList:[],doc_id:"",docData:{author:"",title:"",summary:"",cover:"",content:"",group_id:"0"}}},computed:{title:function(){return this.doc_id?"编辑图文消息":"新增图文消息"}},created:function(){this.getResGroups()},filters:{},methods:{open:function(t){t?(this.doc_id=t,this.getDoc()):this.doc_id="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.docData={author:"",title:"",summary:"",cover:"",content:"",group_id:"0"},console.log("关闭弹窗")},UECover:function(t){this.docData.cover||(this.docData.cover=t)},getResGroups:function(){var t=this;Object(r["e"])({group_type:4}).then(function(e){0==e.code&&(t.groupList=e.data)})},setCover:function(t){console.log(t),this.docData.cover=t.src_file},getHtml:function(t){this.docData.content=t},check_docData:function(){""!==this.docData.title?""!==this.docData.author?""!==this.docData.content?""!==this.docData.summary?""!==this.docData.cover?this.doc_id?this.modDoc():this.addDoc():this.$message({message:"请选择封面",type:"warning"}):this.$message({message:"请输入摘要",type:"warning"}):this.$message({message:"请输入内容",type:"warning"}):this.$message({message:"请输入作者",type:"warning"}):this.$message({message:"请输入标题",type:"warning"})},addDoc:function(){var t=this;Object(r["a"])(Object(s["a"])({},this.docData)).then(function(e){0==e.code&&t.$message({message:"发布成功",type:"success",duration:1e3}),t.dialogVisible=!1,t.$parent.getDocList()},function(t){})},modDoc:function(){var t=this;Object(r["f"])(Object(s["a"])({},this.docData)).then(function(e){t.$message({message:"编辑成功",type:"success",duration:1e3}),t.dialogVisible=!1,t.$parent.getDocList()},function(t){})},getDoc:function(){var t=this;Object(r["c"])({doc_id:this.doc_id}).then(function(e){0==e.code&&(t.docData=e.data,t.$refs.quill.setContent(e.data.content))},function(t){console.log(t)})}}}),d=l,u=(a("976b"),a("2877")),m=Object(u["a"])(d,o,i,!1,null,"f8902c5a",null);e["default"]=m.exports},"976b":function(t,e,a){"use strict";var o=a("ce51"),i=a.n(o);i.a},ce51:function(t,e,a){}}]);