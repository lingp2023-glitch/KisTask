(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b032676","chunk-65ee155c"],{"3b3a":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"workInfo"},[e("el-dialog",{attrs:{title:"订单信息",visible:t.show,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(s){t.show=s},closed:t.closed}},[e("div",{staticClass:"workLists"},[t._l(t.listWorkData,function(s,o){return e("div",{key:o,staticClass:"workItem"},[e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            订单号：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.trade_no)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            产品名：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.goods_name)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            商品属性：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.attrs)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            客户名：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.append_data.name)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            客户手机号：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.append_data.phone)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            订单金额：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            ￥"+t._s((s.order_money/100).toFixed(2))+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            工时数：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.work_num)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            支付状态：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.pay_status_name)+"\n          ")])]),e("div",{staticClass:"workCell"},[e("div",{staticClass:"workOption"},[t._v("\n            订单状态：\n          ")]),e("div",{staticClass:"workValue"},[t._v("\n            "+t._s(s.status_name)+"\n          ")])])])}),0==t.listWorkData.length?e("div",{staticStyle:{textAlign:"center",marginTop:"30px"}},[t._v("\n        订单列表为空\n      ")]):t._e()],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.showAddGoods}},[t._v("补单")])],1)]),e("add-goods",{ref:"addGoods"})],1)},i=[],a=e("f0a9"),n=e("f8b7"),r={data:function(){return{show:!1,shop_id:"",work_id:"",listWorkData:[]}},props:{},components:{addGoods:a["default"]},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{refresh:function(){this.$parent.refreshPage(),this.getListWork()},showAddGoods:function(t){this.$refs["addGoods"].open(this.shop_id,this.work_id)},open:function(t,s){console.log(t,s),this.shop_id=t,this.work_id=s,this.getListWork(),this.show=!0},getListWork:function(){var t=this;Object(n["f"])({work_id:this.work_id}).then(function(s){console.log(s),t.listWorkData=s.data,t.listWorkData.map(function(t,s){t.append_data=t.append_data?JSON.parse(t.append_data):{},t.attrs=t.attrs?JSON.parse(t.attrs):[]})})},closed:function(){this.listWorkData=[],this.show=!1}}},d=r,l=(e("cedc"),e("2877")),c=Object(l["a"])(d,o,i,!1,null,"3fae20d2",null);s["default"]=c.exports},"763c":function(t,s,e){"use strict";var o=e("a429"),i=e.n(o);i.a},"9abe":function(t,s,e){},a429:function(t,s,e){},cedc:function(t,s,e){"use strict";var o=e("9abe"),i=e.n(o);i.a},f0a9:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"addGoods"},[e("el-dialog",{attrs:{title:"增购商品",visible:t.show,top:"20px",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(s){t.show=s},closed:t.closed}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"goodsList"},t._l(t.goodsList,function(s,o){return e("div",{key:o,staticClass:"goodsItem",class:{activeGoods:s.goods_id==t.activedId},on:{click:function(e){return t.selectGoods(s.goods_id)}}},[e("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:s.cover}}),e("div",{staticClass:"goodsInfo"},[e("div",[t._v("\n                  "+t._s(s.goods_name)+"\n                  "),e("span",{style:{color:1==s.is_run?"#55aaff":"#777"}},[t._v(t._s(1==s.is_run?"已上线":"未上线"))])]),e("div",[t._v("\n                  ￥"+t._s(t._f("formatMoney")(s.sale_price))+"\n                ")])])],1)}),0)]),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.activedId,expression:"activedId"}],attrs:{span:12}},[e("div",{staticClass:"attrsList"},t._l(t.attrsList,function(s,o){return e("div",{key:o,staticClass:"attrsItem"},[e("div",{staticClass:"attrsTitle"},[t._v("\n              "+t._s(s.attr_name)+"\n            ")]),e("div",{staticClass:"attrsValue"},t._l(s.values,function(s,i){return e("div",{key:i,staticClass:"valueItem",class:s.attr_value_id==(t.selectAttrs[o]?t.selectAttrs[o].attr_value_id:"")?"activeAttr":"",on:{click:function(s){return t.selectAttr(o,i)}}},[t._v("\n                "+t._s(s.attr_value)+"\n              ")])}),0)])}),0),e("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",rules:t.rules,model:t.append_data,"label-width":"auto"}},[e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入姓名"},model:{value:t.append_data.name,callback:function(s){t.$set(t.append_data,"name",s)},expression:"append_data.name"}})],1),e("el-form-item",{attrs:{label:"性别",prop:"gender"}},[e("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.append_data.gender,callback:function(s){t.$set(t.append_data,"gender",s)},expression:"append_data.gender"}},t._l(t.options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),e("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[e("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入联系手机"},model:{value:t.append_data.phone,callback:function(s){t.$set(t.append_data,"phone",s)},expression:"append_data.phone"}})],1),e("el-form-item",{attrs:{label:"订单状态"}},[e("el-radio-group",{model:{value:t.order_status,callback:function(s){t.order_status=s},expression:"order_status"}},[e("el-radio",{attrs:{label:1}},[t._v("待服务")]),e("el-radio",{attrs:{label:2}},[t._v("已完成")])],1)],1)],1),e("div",{staticClass:"cell"},[e("div",[t._v("单价：")]),e("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price:0))+"\n          ")])]),e("div",{staticClass:"cell"},[e("div",[t._v("总价：")]),e("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price*t.num:0))+"\n          ")])])],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closed}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},i=[],a=(e("ac6a"),e("f8b7")),n={data:function(){return{show:!1,goodsList:[],goodsObj:{},shop_id:"",work_id:"",num:1,append_data:{name:"",gender:"",phone:""},order_status:1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],phone:[{required:!0,message:"请输入联系手机",trigger:"blur"}]},options:[{value:"1",label:"男"},{value:"0",label:"女"}],activedId:"",selectAttrs:[],hasSelect:[],attrs:[],skuMap:{}}},watch:{activedId:function(){var t=this;console.log(this.goodsObj[this.activedId]),this.num=1,this.skuMap={},this.goodsObj[this.activedId].sku.map(function(s,e){t.skuMap[s.attr_value_items]=s})}},components:{},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{goods_sku:function(){if(console.log(this.selectAll),this.selectAll){var t=this.selectAttrs.map(function(t){return t?t.attr_value_id:""});return this.skuMap[JSON.stringify(t)]}return this.goodsObj[this.activedId]},attrsList:function(){return this.activedId?this.goodsObj[this.activedId].attrs:[]},selectAll:function(){var t=!0;return this.hasSelect.map(function(s,e){-1==s&&(t=!1)}),t},tipText:function(){for(var t="",s=0;s<this.hasSelect.length;s++){var e=this.hasSelect[s];if(-1==e){t=this.attrs[s].attr_name;break}}return t}},methods:{submit:function(){var t=this;this.selectAll?this.$refs.form.validate(function(s){if(s){var e=[];t.selectAttrs.map(function(t,s){e.push(t.attr_value_id)}),Object(a["n"])({work_id:t.work_id,shop_id:t.shop_id,goods_id:t.activedId,attrs:JSON.stringify(e),append_data:JSON.stringify(t.append_data),order_status:t.order_status}).then(function(s){0==s.code&&(t.$message({message:"补单成功",type:"success"}),t.show=!1,t.$parent.refresh())})}}):this.$message({message:"请选择".concat(this.tipText),type:"error"})},selectAttr:function(t,s){JSON.stringify(this.selectAttrs[t])==JSON.stringify(this.attrs[t].values[s])?(this.$set(this.selectAttrs,t,void 0),this.$set(this.hasSelect,t,-1)):(this.$set(this.selectAttrs,t,this.attrs[t].values[s]),this.$set(this.hasSelect,t,s))},selectGoods:function(t){var s=this;this.activedId=t,this.attrs=[],this.selectAttrs=[],this.attrs=this.goodsObj[this.activedId].attrs,this.hasSelect=[],this.attrs.map(function(t,e){s.hasSelect.push(-1)})},getOGoodsList:function(){var t=this;Object(a["g"])().then(function(s){console.log(s,1),t.goodsList=s.data,t.goodsList.map(function(s,e){t.goodsObj[s.goods_id]=s}),console.log(t.goodsObj)})},open:function(t,s){this.show=!0,this.shop_id=t,this.work_id=s,this.getOGoodsList()},closed:function(){this.activedId="",this.goodsObj={},this.shop_id="",this.work_id="",this.selectAttrs=[],this.attrs=[],this.hasSelect=[],this.show=!1,this.append_data={name:"",gender:"",phone:""},this.order_status=1,this.$refs["form"].clearValidate()}}},r=n,d=(e("763c"),e("2877")),l=Object(d["a"])(r,o,i,!1,null,"750ae2f6",null);s["default"]=l.exports},f8b7:function(t,s,e){"use strict";e.d(s,"i",function(){return a}),e.d(s,"h",function(){return n}),e.d(s,"b",function(){return r}),e.d(s,"m",function(){return d}),e.d(s,"o",function(){return l}),e.d(s,"e",function(){return c}),e.d(s,"c",function(){return u}),e.d(s,"g",function(){return v}),e.d(s,"k",function(){return h}),e.d(s,"l",function(){return p}),e.d(s,"d",function(){return f}),e.d(s,"f",function(){return _}),e.d(s,"n",function(){return g}),e.d(s,"p",function(){return m}),e.d(s,"a",function(){return k}),e.d(s,"j",function(){return w}),e.d(s,"q",function(){return C});var o=e("365c"),i={list:"list",setAddress:"setAddress",getShipComs:"getShipComs",setShip:"setShip",getOrderInfo:"info",contactMod:"contactMod",noticeMod:"noticeMod",priceReduce:"reduce",priceCredit:"credit",getCreditList:"creditList",creditDel:"creditDel",getOGoodsList:"goodsList",goodsAdd:"goodsAdd",goodsDel:"goodsDel",finishOrder:"finish",listWork:"listWork",orderAdd:"add",reBook:"reBook",cancelOrder:"cancel",getShipList:"express",setShiping:"setShiping"};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.list,t,"gm/order")}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getOrderInfo,t,"gm/order")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.contactMod,t,"gm/order")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.noticeMod,t,"gm/order")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.priceCredit,t,"gm/order")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getCreditList,t,"gm/order")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.creditDel,t,"gm/order")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getOGoodsList,t,"gm/order")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.goodsAdd,t,"gm/order")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.goodsDel,t,"gm/order")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.finishOrder,t,"gm/order")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.listWork,t,"gm/order")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.orderAdd,t,"gm/order")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.reBook,t,"gm/order")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.cancelOrder,t,"gm/order")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.getShipList,t,"gm/order")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(i.setShiping,t,"gm/order")}}}]);