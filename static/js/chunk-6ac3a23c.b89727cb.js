(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ac3a23c"],{"11e9":function(t,e,o){var a=o("52a7"),i=o("4630"),n=o("6821"),r=o("6a99"),s=o("69a8"),l=o("c69a"),c=Object.getOwnPropertyDescriptor;e.f=o("9e1e")?c:function(t,e){if(t=n(t),e=r(e,!0),l)try{return c(t,e)}catch(o){}if(s(t,e))return i(!a.f.call(t,e),t[e])}},"37c8":function(t,e,o){e.f=o("2b4c")},"3a72":function(t,e,o){var a=o("7726"),i=o("8378"),n=o("2d00"),r=o("37c8"),s=o("86cc").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=n?{}:a.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:r.f(t)})}},"67ab":function(t,e,o){var a=o("ca5a")("meta"),i=o("d3f4"),n=o("69a8"),r=o("86cc").f,s=0,l=Object.isExtensible||function(){return!0},c=!o("79e5")((function(){return l(Object.preventExtensions({}))})),d=function(t){r(t,a,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,a)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[a].i},h=function(t,e){if(!n(t,a)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[a].w},u=function(t){return c&&g.NEED&&l(t)&&!n(t,a)&&d(t),t},g=t.exports={KEY:a,NEED:!1,fastKey:f,getWeak:h,onFreeze:u}},6814:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flowchart-editor"},[o("div",{staticClass:"toolbar"},[o("div",{staticClass:"toolbar-left"},[o("button",{staticClass:"tool-btn",on:{click:t.addRectNode}},[t._v("æ·»åŠ çŸ©å½¢èŠ‚ç‚¹")]),o("button",{staticClass:"tool-btn",on:{click:t.addCircleNode}},[t._v("æ·»åŠ åœ†å½¢èŠ‚ç‚¹")]),o("button",{staticClass:"tool-btn",on:{click:t.addEdge}},[t._v("æ·»åŠ è¿žæŽ¥çº¿")]),o("button",{staticClass:"tool-btn",class:{active:t.edgeEditingEnabled},on:{click:t.enableEdgeEditing}},[t._v("\n        "+t._s(t.edgeEditingEnabled?"åœæ­¢ç¼–è¾‘è¿žçº¿":"ç¼–è¾‘è¿žçº¿")+"\n      ")]),o("button",{staticClass:"tool-btn",on:{click:t.straightenEdges}},[t._v("ç›´çº¿åŒ–è¿žçº¿")]),o("button",{staticClass:"tool-btn",on:{click:t.smoothEdges}},[t._v("å¹³æ»‘è¿žçº¿")]),o("button",{staticClass:"tool-btn",on:{click:t.zoomIn}},[t._v("æ”¾å¤§")]),o("button",{staticClass:"tool-btn",on:{click:t.zoomOut}},[t._v("ç¼©å°")]),o("button",{staticClass:"tool-btn",on:{click:t.resetZoom}},[t._v("é‡ç½®ç¼©æ”¾")]),o("button",{staticClass:"tool-btn delete-btn",on:{click:t.deleteSelected}},[t._v("åˆ é™¤é€‰ä¸­")]),o("button",{staticClass:"tool-btn delete-btn",on:{click:t.clearAll}},[t._v("æ¸…ç©ºç”»å¸ƒ")]),o("button",{staticClass:"tool-btn export-btn",on:{click:t.exportData}},[t._v("å¯¼å‡ºæ•°æ®")]),o("button",{staticClass:"tool-btn import-btn",on:{click:t.importData}},[t._v("å¯¼å…¥æ•°æ®")])]),t._m(0)]),o("div",{staticClass:"editor-container"},[o("div",{ref:"container",attrs:{id:"flowchart-container"}})]),t.editModalVisible?o("div",{staticClass:"modal-overlay"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h3",[t._v("ç¼–è¾‘èŠ‚ç‚¹å†…å®¹")]),o("button",{staticClass:"close-btn",on:{click:t.cancelEdit}},[t._v("Ã—")])]),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"edit-form"},[o("div",{staticClass:"form-item"},[o("label",[t._v("èŠ‚ç‚¹æ ‡ç­¾ï¼š")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.label,expression:"editingNodeData.label"}],staticClass:"form-input",attrs:{placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹æ ‡ç­¾"},domProps:{value:t.editingNodeData.label},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"label",e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("label",[t._v("èŠ‚ç‚¹å†…å®¹ï¼š")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.content,expression:"editingNodeData.content"}],staticClass:"form-textarea",attrs:{placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹å†…å®¹",rows:"4"},domProps:{value:t.editingNodeData.content},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"content",e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("label",[t._v("èƒŒæ™¯é¢œè‰²ï¼š")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editingNodeData.color,expression:"editingNodeData.color"}],staticClass:"color-input",attrs:{type:"color"},domProps:{value:t.editingNodeData.color},on:{input:function(e){e.target.composing||t.$set(t.editingNodeData,"color",e.target.value)}}}),o("span",{staticClass:"color-preview",style:{backgroundColor:t.editingNodeData.color}})])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-cancel",on:{click:t.cancelEdit}},[t._v("å–æ¶ˆ")]),o("button",{staticClass:"btn btn-save",on:{click:t.saveNodeContent}},[t._v("ä¿å­˜")])])])]):t._e(),t.importModalVisible?o("div",{staticClass:"modal-overlay"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h3",[t._v("å¯¼å…¥æµç¨‹å›¾æ•°æ®")]),o("button",{staticClass:"close-btn",on:{click:t.cancelImport}},[t._v("Ã—")])]),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"edit-form"},[o("div",{staticClass:"form-item"},[o("label",[t._v("JSONæ•°æ®ï¼š")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.importDataJson,expression:"importDataJson"}],staticClass:"form-textarea",attrs:{placeholder:"è¯·ç²˜è´´å¯¼å‡ºçš„JSONæ•°æ®",rows:"10"},domProps:{value:t.importDataJson},on:{input:function(e){e.target.composing||(t.importDataJson=e.target.value)}}})]),o("div",{staticClass:"form-item"},[o("button",{staticClass:"btn btn-example",on:{click:t.loadExampleData}},[t._v("åŠ è½½ç¤ºä¾‹æ•°æ®")])])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-cancel",on:{click:t.cancelImport}},[t._v("å–æ¶ˆ")]),o("button",{staticClass:"btn btn-save",on:{click:t.confirmImport}},[t._v("å¯¼å…¥")])])])]):t._e(),o("div",{staticClass:"node-panel"},[o("div",{staticClass:"panel-header"},[o("h3",[t._v("èŠ‚ç‚¹åˆ—è¡¨ ("+t._s(t.nodes.length)+")")]),o("div",{staticClass:"panel-actions"},[o("button",{staticClass:"icon-btn",attrs:{title:"åˆ·æ–°"},on:{click:t.refreshNodeList}},[t._v("ðŸ”„")])])]),o("div",{staticClass:"node-list"},[t._l(t.nodes,(function(e){return o("div",{key:e.id,staticClass:"node-item",class:{active:t.selectedNodeId===e.id},on:{click:function(o){return t.focusNode(e.id)}}},[o("div",{staticClass:"node-preview",style:{backgroundColor:e.color}},[t._v("\n          "+t._s("custom-rect"===e.shape?"â–¢":"â—")+"\n        ")]),o("div",{staticClass:"node-info"},[o("div",{staticClass:"node-label"},[t._v(t._s(e.label||"æœªå‘½åèŠ‚ç‚¹"))]),o("div",{staticClass:"node-content"},[t._v(t._s(e.content||"æ— å†…å®¹"))]),o("div",{staticClass:"node-id"},[t._v("ID: "+t._s(e.id.substring(0,8))+"...")])]),o("div",{staticClass:"node-actions"},[o("button",{staticClass:"icon-btn",attrs:{title:"ç¼–è¾‘"},on:{click:function(o){return o.stopPropagation(),t.editNode(e.id)}}},[t._v("âœï¸")]),o("button",{staticClass:"icon-btn delete",attrs:{title:"åˆ é™¤"},on:{click:function(o){return o.stopPropagation(),t.deleteNode(e.id)}}},[t._v("ðŸ—‘ï¸")])])])})),0===t.nodes.length?o("div",{staticClass:"empty-state"},[o("div",{staticClass:"empty-icon"},[t._v("ðŸ“‹")]),o("div",{staticClass:"empty-text"},[t._v("æš‚æ— èŠ‚ç‚¹")]),o("div",{staticClass:"empty-hint"},[t._v("ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ èŠ‚ç‚¹")])]):t._e()],2),o("div",{staticClass:"panel-footer"},[o("div",{staticClass:"stats"},[o("div",{staticClass:"stat-item"},[t._v("è¿žçº¿: "+t._s(t.edges.length))]),o("div",{staticClass:"stat-item"},[t._v("ç¼©æ”¾: "+t._s((100*t.zoom).toFixed(0))+"%")])])])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"toolbar-right"},[o("span",{staticClass:"hint"},[t._v("æç¤ºï¼šåŒå‡»èŠ‚ç‚¹ç¼–è¾‘å†…å®¹ï¼Œæ‹–æ‹½èŠ‚ç‚¹/è¿žçº¿è°ƒæ•´ä½ç½®")])])}],n=o("cebc"),r=o("a8db"),s=(o("ac4d"),o("8a81"),o("ac6a"),o("5728")),l={name:"FlowchartEditor",data:function(){return{graph:null,nodes:[],edges:[],selectedNodeId:null,editModalVisible:!1,importModalVisible:!1,zoom:1,editingNodeId:null,importDataJson:"",editingNodeData:{label:"",content:"",color:"#1890ff"},edgeEditingEnabled:!1}},mounted:function(){this.initGraph(),this.loadSampleData()},beforeDestroy:function(){this.graph&&this.graph.dispose()},methods:{initGraph:function(){var t=this,e=this;this.graph=new s["b"]({container:this.$refs.container,width:"100%",height:"100%",grid:{size:10,visible:!0},background:{color:"#fafafa"},panning:{enabled:!0,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:["ctrl","meta"]},connecting:{router:"manhattan",connector:"rounded",anchor:"center",connectionPoint:"boundary",allowBlank:!1,snap:{radius:20},allowMulti:!0,allowLoop:!1,allowNode:!1,allowEdge:!1,highlight:!0,validateMagnet:function(t){var e=t.magnet;return null!==e.getAttribute("port-group")},validateConnection:function(t){t.sourceView,t.targetView;var o=t.sourceMagnet,a=t.targetMagnet,i=t.sourceCell,n=t.targetCell;t.type;if(!a)return!1;if(i===n)return!1;var r=e.graph.getEdges(),s=!0,l=!1,c=void 0;try{for(var d,f=r[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var h=d.value,u=h.getSource(),g=h.getTarget();if(u.cell===i&&g.cell===n&&u.port===o.getAttribute("port")&&g.port===a.getAttribute("port"))return!1}}catch(p){l=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(l)throw c}}return!0},createEdge:function(){return new s["c"].Edge({connector:{name:"rounded"},router:{name:"manhattan"},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,strokeDasharray:"",targetMarker:{name:"block",width:12,height:8,fill:"#A2B1C3"}}},hover:{attrs:{line:{stroke:"#5F95FF",strokeWidth:2,targetMarker:{fill:"#5F95FF"}}}},selected:{attrs:{line:{stroke:"#1890ff",strokeWidth:3,targetMarker:{fill:"#1890ff"}}}},labels:[{position:.5,attrs:{text:{text:"è¿žæŽ¥çº¿",fill:"#666",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"},rect:{ref:"text",fill:"white",stroke:"#A2B1C3",strokeWidth:1,rx:3,ry:3,refWidth:"140%",refHeight:"140%",refX:"-20%",refY:"-20%"}}}],interaction:{edgeMovable:!0,edgeLabelMovable:!0,edgeVertexMovable:!0,edgeVertexAddable:!0,edgeVertexDeletable:!0},zIndex:0})}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}}}),s["b"].registerNode("custom-rect",{inherit:"rect",width:140,height:60,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"rgba(24, 144, 255, 0.1)",rx:6,ry:6},label:{text:"",refX:.5,refY:.3,fontSize:14,fontWeight:"bold",fill:"#262626",textAnchor:"middle",textVerticalAnchor:"middle"},content:{text:"",refX:.5,refY:.7,fontSize:12,fill:"#595959",textAnchor:"middle",textVerticalAnchor:"middle"}},markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"content"}],propHooks:function(t){var o=t.data,a=Object(r["a"])(t,["data"]);return o?Object(n["a"])({},a,{attrs:{label:{text:o.label||"èŠ‚ç‚¹"},content:{text:o.content||"åŒå‡»ç¼–è¾‘"},body:{fill:e.hexToRgba(o.color||"#1890ff",.1),stroke:o.color||"#1890ff"}},data:o}):t},ports:{groups:{top:{position:"top",attrs:{circle:{r:6,magnet:!0,stroke:"#5F95FF",strokeWidth:2,fill:"#fff",style:{visibility:"hidden",cursor:"crosshair"}}},zIndex:10},right:{position:"right",attrs:{circle:{r:6,magnet:!0,stroke:"#5F95FF",strokeWidth:2,fill:"#fff",style:{visibility:"hidden",cursor:"crosshair"}}},zIndex:10},bottom:{position:"bottom",attrs:{circle:{r:6,magnet:!0,stroke:"#5F95FF",strokeWidth:2,fill:"#fff",style:{visibility:"hidden",cursor:"crosshair"}}},zIndex:10},left:{position:"left",attrs:{circle:{r:6,magnet:!0,stroke:"#5F95FF",strokeWidth:2,fill:"#fff",style:{visibility:"hidden",cursor:"crosshair"}}},zIndex:10}},items:[{group:"top",id:"top-port"},{group:"right",id:"right-port"},{group:"bottom",id:"bottom-port"},{group:"left",id:"left-port"}]}}),s["b"].registerNode("custom-circle",{inherit:"circle",width:80,height:80,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"rgba(24, 144, 255, 0.1)",refCx:"50%",refCy:"50%",refR:"50%"},label:{text:"",refX:.5,refY:.4,fontSize:12,fontWeight:"bold",fill:"#262626",textAnchor:"middle",textVerticalAnchor:"middle"},content:{text:"",refX:.5,refY:.6,fontSize:10,fill:"#595959",textAnchor:"middle",textVerticalAnchor:"middle"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"content"}],propHooks:function(t){var o=t.data,a=Object(r["a"])(t,["data"]);return o?Object(n["a"])({},a,{attrs:{label:{text:o.label||"èŠ‚ç‚¹"},content:{text:o.content||"åŒå‡»ç¼–è¾‘"},body:{fill:e.hexToRgba(o.color||"#1890ff",.1),stroke:o.color||"#1890ff"}},data:o}):t},ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"top-port"},{group:"right",id:"right-port"},{group:"bottom",id:"bottom-port"},{group:"left",id:"left-port"}]}}),this.graph.enableRubberband(),this.graph.enableKeyboard(),this.graph.on("node:mouseenter",(function(){var e=t.graph.container.querySelectorAll(".x6-port-body");e.forEach((function(t){t.style.visibility="visible"}))})),this.graph.on("node:mouseleave",(function(){var e=t.graph.container.querySelectorAll(".x6-port-body");e.forEach((function(t){t.style.visibility="hidden"}))})),this.graph.on("node:dblclick",(function(e){var o=e.node;t.editNode(o.id)})),this.graph.on("node:selected",(function(e){var o=e.node;t.selectedNodeId=o.id})),this.graph.on("node:unselected",(function(){t.selectedNodeId=null})),this.graph.on("scale",(function(e){var o=e.sx;t.zoom=o})),this.graph.on("cell:added",(function(){t.updateLists()})),this.graph.on("cell:removed",(function(){t.updateLists()})),this.graph.on("cell:change:*",(function(){t.updateLists()})),this.graph.bindKey(["backspace","delete"],(function(){return t.deleteSelected(),!1})),this.graph.bindKey(["ctrl+c","cmd+c"],(function(){var e=t.graph.getSelectedCells();return e.length&&t.graph.copy(e),!1})),this.graph.bindKey(["ctrl+v","cmd+v"],(function(){if(!t.graph.isClipboardEmpty()){var e=t.graph.paste();t.graph.cleanSelection(),t.graph.select(e)}return!1})),this.graph.bindKey(["ctrl+z","cmd+z"],(function(){return t.graph.canUndo()&&t.graph.undo(),!1})),this.graph.bindKey(["ctrl+y","cmd+y"],(function(){return t.graph.canRedo()&&t.graph.redo(),!1})),this.graph.bindKey(["e"],(function(){return t.enableEdgeEditing(),!1})),this.graph.bindKey(["shift+d"],(function(){var e=t.graph.getSelectedCells().filter((function(t){return t.isEdge()}));return e.length>0&&e.forEach((function(t){var e=t.getSource(),o=t.getTarget();t.setSource(o),t.setTarget(e)})),!1})),this.graph.bindKey(["shift+v"],(function(){var e=t.graph.getSelectedCells().filter((function(t){return t.isEdge()}));return e.forEach((function(t){var e=t.getVertices();e.push({x:10*t.id.length,y:10*t.id.length}),t.setVertices(e)})),!1})),this.graph.on("edge:mouseenter",(function(t){var e=t.edge;e.addTools([{name:"vertices",args:{snap:!0,attrs:{fill:"#1890ff",stroke:"#1890ff",r:6}}},{name:"segments",args:{snap:!0,attrs:{fill:"#52c41a"}}},{name:"boundary",args:{padding:5,attrs:{fill:"transparent",stroke:"#1890ff",strokeWidth:1,strokeDasharray:"5,5"}}}])})),this.graph.on("edge:mouseleave",(function(t){var e=t.edge;e.removeTools()})),this.graph.on("edge:selected",(function(t){var e=t.edge;e.addTools([{name:"vertices",args:{snap:!0,attrs:{fill:"#1890ff",stroke:"#1890ff",r:6}}},{name:"source-anchor",args:{snap:!0,attrs:{fill:"#f5222d",stroke:"#f5222d",r:8}}},{name:"target-anchor",args:{snap:!0,attrs:{fill:"#52c41a",stroke:"#52c41a",r:8}}}])})),this.graph.on("edge:unselected",(function(t){var e=t.edge;e.removeTools()})),this.graph.on("edge:connected",(function(t){var e=t.edge;console.log("è¿žæŽ¥çº¿å·²è¿žæŽ¥:",e.id)})),this.graph.on("edge:change:source",(function(t){var e=t.edge,o=t.current;console.log("è¿žæŽ¥çº¿æºç«¯ç‚¹å·²æ›´æ”¹:",e.id,o)})),this.graph.on("edge:change:target",(function(t){var e=t.edge,o=t.current;console.log("è¿žæŽ¥çº¿ç›®æ ‡ç«¯ç‚¹å·²æ›´æ”¹:",e.id,o)})),this.zoom=this.graph.zoom()},updateLists:function(){var t=this.graph.getCells();this.nodes=t.filter((function(t){return t.isNode()})).map((function(t){var e=t.getData()||{},o=t.attr("label/text");return{id:t.id,label:e.label||o||"èŠ‚ç‚¹".concat(t.id.substring(0,4)),content:e.content||t.attr("content/text")||"",color:e.color||"#1890ff",shape:t.shape}})),this.edges=t.filter((function(t){return t.isEdge()}))},loadSampleData:function(){this.graph.clearCells();var t=this.graph.addNode({id:"start-node",shape:"custom-rect",x:100,y:100,data:{label:"å¼€å§‹",content:"æµç¨‹å¼€å§‹èŠ‚ç‚¹",color:"#52c41a"}}),e=this.graph.addNode({id:"process-node",shape:"custom-circle",x:300,y:100,data:{label:"å¤„ç†",content:"æ•°æ®å¤„ç†èŠ‚ç‚¹",color:"#1890ff"}}),o=this.graph.addNode({id:"decision-node",shape:"custom-rect",x:500,y:100,data:{label:"åˆ¤æ–­",content:"æ¡ä»¶åˆ¤æ–­èŠ‚ç‚¹",color:"#faad14"}}),a=this.graph.addNode({id:"end-node",shape:"custom-rect",x:500,y:250,data:{label:"ç»“æŸ",content:"æµç¨‹ç»“æŸèŠ‚ç‚¹",color:"#f5222d"}});this.graph.addEdge({source:{cell:t,port:"right-port"},target:{cell:e,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"å¼€å§‹å¤„ç†"}}}]}),this.graph.addEdge({source:{cell:e,port:"right-port"},target:{cell:o,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"è¿›è¡Œåˆ¤æ–­"}}}]}),this.graph.addEdge({source:{cell:o,port:"bottom-port"},target:{cell:a,port:"top-port"},labels:[{position:.5,attrs:{text:{text:"æ¡ä»¶æˆç«‹"}}}]}),this.updateLists()},addRectNode:function(){var t=100+400*Math.random(),e=100+300*Math.random(),o="rect-node-".concat(Date.now()),a=["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#13c2c2"],i=a[Math.floor(Math.random()*a.length)];this.graph.addNode({id:o,shape:"custom-rect",x:t,y:e,data:{label:"çŸ©å½¢èŠ‚ç‚¹".concat(this.nodes.length+1),content:"åŒå‡»ç¼–è¾‘èŠ‚ç‚¹å†…å®¹",color:i}}),this.updateLists()},addCircleNode:function(){var t=100+400*Math.random(),e=100+300*Math.random(),o="circle-node-".concat(Date.now()),a=["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#13c2c2"],i=a[Math.floor(Math.random()*a.length)];this.graph.addNode({id:o,shape:"custom-circle",x:t,y:e,data:{label:"åœ†å½¢èŠ‚ç‚¹".concat(this.nodes.length+1),content:"åŒå‡»ç¼–è¾‘èŠ‚ç‚¹å†…å®¹",color:i}}),this.updateLists()},addEdge:function(){var t=this.graph.getNodes();if(t.length>=2){var e=t[t.length-2],o=t[t.length-1];this.graph.addEdge({source:{cell:e,port:"right-port"},target:{cell:o,port:"left-port"},labels:[{position:.5,attrs:{text:{text:"è¿žæŽ¥çº¿"}}}]}),this.updateLists()}else alert("è¯·å…ˆæ·»åŠ è‡³å°‘ä¸¤ä¸ªèŠ‚ç‚¹")},zoomIn:function(){this.graph.zoom(.1)},zoomOut:function(){this.graph.zoom(-.1)},resetZoom:function(){this.graph.zoomTo(1)},deleteSelected:function(){var t=this.graph.getSelectedCells();t.length&&(this.graph.removeCells(t),this.updateLists())},clearAll:function(){confirm("ç¡®å®šè¦æ¸…ç©ºç”»å¸ƒå—ï¼Ÿæ‰€æœ‰èŠ‚ç‚¹å’Œè¿žçº¿å°†è¢«åˆ é™¤ã€‚")&&(this.graph.clearCells(),this.updateLists())},editNode:function(t){var e=this.graph.getCellById(t);if(e){var o=e.getData()||{};this.editingNodeId=t,this.editingNodeData={label:o.label||e.attr("label/text")||"æœªå‘½åèŠ‚ç‚¹",content:o.content||e.attr("content/text")||"",color:o.color||"#1890ff"},this.editModalVisible=!0}},saveNodeContent:function(){if(this.editingNodeId){var t=this.graph.getCellById(this.editingNodeId);t&&(t.setData(this.editingNodeData),t.attr("label/text",this.editingNodeData.label),t.attr("content/text",this.editingNodeData.content),t.attr("body/fill",this.hexToRgba(this.editingNodeData.color,.1)),t.attr("body/stroke",this.editingNodeData.color),this.updateLists()),this.editModalVisible=!1,this.editingNodeId=null}},cancelEdit:function(){this.editModalVisible=!1,this.editingNodeId=null},deleteNode:function(t){if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹å—ï¼Ÿç›¸å…³çš„è¿žæŽ¥çº¿ä¹Ÿä¼šè¢«åˆ é™¤ã€‚")){var e=this.graph.getCellById(t);e&&(this.graph.removeCell(e),this.updateLists())}},focusNode:function(t){var e=this.graph.getCellById(t);e&&(this.graph.cleanSelection(),this.graph.select(e),this.graph.centerCell(e))},refreshNodeList:function(){this.updateLists()},exportData:function(){var t=this.graph.toJSON(),e=JSON.stringify(t,null,2),o=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="flowchart-".concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),alert("æ•°æ®å¯¼å‡ºæˆåŠŸï¼")},importData:function(){this.importModalVisible=!0},cancelImport:function(){this.importModalVisible=!1,this.importDataJson=""},confirmImport:function(){try{var t=JSON.parse(this.importDataJson);this.graph.fromJSON(t),this.updateLists(),this.importModalVisible=!1,this.importDataJson="",alert("æ•°æ®å¯¼å…¥æˆåŠŸï¼")}catch(e){alert("å¯¼å…¥å¤±è´¥ï¼šJSONæ ¼å¼é”™è¯¯\n"+e.message)}},loadExampleData:function(){var t={cells:[{id:"node1",shape:"custom-rect",x:100,y:100,data:{label:"ç¤ºä¾‹èŠ‚ç‚¹1",content:"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹èŠ‚ç‚¹",color:"#1890ff"}},{id:"node2",shape:"custom-circle",x:300,y:100,data:{label:"ç¤ºä¾‹èŠ‚ç‚¹2",content:"å¦ä¸€ä¸ªç¤ºä¾‹èŠ‚ç‚¹",color:"#52c41a"}},{id:"edge1",shape:"edge",source:{cell:"node1",port:"right-port"},target:{cell:"node2",port:"left-port"},labels:[{position:.5,attrs:{text:{text:"ç¤ºä¾‹è¿žæŽ¥"}}}]}]};this.importDataJson=JSON.stringify(t,null,2)},hexToRgba:function(t,e){if(!t)return"rgba(24, 144, 255, ".concat(e,")");4===t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var o=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return"rgba(".concat(o,", ").concat(a,", ").concat(i,", ").concat(e,")")},enableEdgeEditing:function(){this.edgeEditingEnabled=!this.edgeEditingEnabled,this.edgeEditingEnabled?(this.graph.getEdges().forEach((function(t){t.setProp("interaction/edgeVertexMovable",!0),t.setProp("interaction/edgeVertexAddable",!0),t.setProp("interaction/edgeVertexDeletable",!0)})),this.graph.getEdges().forEach((function(t){t.addTools([{name:"vertices",args:{snap:!0,attrs:{fill:"#1890ff",stroke:"#1890ff",r:6}}}])})),alert("è¿žæŽ¥çº¿ç¼–è¾‘å·²å¯ç”¨ï¼š\n1. æ‹–æ‹½ç«¯ç‚¹å¯ä»¥åˆ‡æ¢è¿žæŽ¥\n2. ç‚¹å‡»è¿žçº¿å¯ä»¥æ·»åŠ /åˆ é™¤é¡¶ç‚¹\n3. æ‹–æ‹½é¡¶ç‚¹å¯ä»¥è°ƒæ•´è¿žçº¿å½¢çŠ¶")):this.graph.getEdges().forEach((function(t){t.setProp("interaction/edgeVertexMovable",!1),t.setProp("interaction/edgeVertexAddable",!1),t.setProp("interaction/edgeVertexDeletable",!1),t.removeTools()}))},straightenEdges:function(){this.graph.getEdges().forEach((function(t){t.setVertices([]),t.attr("line/strokeDasharray","")}))},smoothEdges:function(){this.graph.getEdges().forEach((function(t){t.attr("line/strokeDasharray",""),t.setConnector("smooth")}))}}},c=l,d=(o("a446"),o("2877")),f=Object(d["a"])(c,a,i,!1,null,"621281d6",null);e["default"]=f.exports},"7bbc":function(t,e,o){var a=o("6821"),i=o("9093").f,n={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return r.slice()}};t.exports.f=function(t){return r&&"[object Window]"==n.call(t)?s(t):i(a(t))}},"8a81":function(t,e,o){"use strict";var a=o("7726"),i=o("69a8"),n=o("9e1e"),r=o("5ca1"),s=o("2aba"),l=o("67ab").KEY,c=o("79e5"),d=o("5537"),f=o("7f20"),h=o("ca5a"),u=o("2b4c"),g=o("37c8"),p=o("3a72"),b=o("d4c0"),m=o("1169"),v=o("cb7c"),y=o("d3f4"),C=o("4bf8"),x=o("6821"),k=o("6a99"),N=o("4630"),E=o("2aeb"),w=o("7bbc"),_=o("11e9"),D=o("2621"),S=o("86cc"),F=o("0d58"),O=_.f,I=S.f,M=w.f,V=a.Symbol,z=a.JSON,P=z&&z.stringify,A="prototype",j=u("_hidden"),J=u("toPrimitive"),L={}.propertyIsEnumerable,W=d("symbol-registry"),T=d("symbols"),R=d("op-symbols"),K=Object[A],B="function"==typeof V&&!!D.f,Y=a.QObject,$=!Y||!Y[A]||!Y[A].findChild,U=n&&c((function(){return 7!=E(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(t,e,o){var a=O(K,e);a&&delete K[e],I(t,e,o),a&&t!==K&&I(K,e,a)}:I,X=function(t){var e=T[t]=E(V[A]);return e._k=t,e},G=B&&"symbol"==typeof V.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof V},H=function(t,e,o){return t===K&&H(R,e,o),v(t),e=k(e,!0),v(o),i(T,e)?(o.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),o=E(o,{enumerable:N(0,!1)})):(i(t,j)||I(t,j,N(1,{})),t[j][e]=!0),U(t,e,o)):I(t,e,o)},q=function(t,e){v(t);var o,a=b(e=x(e)),i=0,n=a.length;while(n>i)H(t,o=a[i++],e[o]);return t},Z=function(t,e){return void 0===e?E(t):q(E(t),e)},Q=function(t){var e=L.call(this,t=k(t,!0));return!(this===K&&i(T,t)&&!i(R,t))&&(!(e||!i(this,t)||!i(T,t)||i(this,j)&&this[j][t])||e)},tt=function(t,e){if(t=x(t),e=k(e,!0),t!==K||!i(T,e)||i(R,e)){var o=O(t,e);return!o||!i(T,e)||i(t,j)&&t[j][e]||(o.enumerable=!0),o}},et=function(t){var e,o=M(x(t)),a=[],n=0;while(o.length>n)i(T,e=o[n++])||e==j||e==l||a.push(e);return a},ot=function(t){var e,o=t===K,a=M(o?R:x(t)),n=[],r=0;while(a.length>r)!i(T,e=a[r++])||o&&!i(K,e)||n.push(T[e]);return n};B||(V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(o){this===K&&e.call(R,o),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),U(this,t,N(1,o))};return n&&$&&U(K,t,{configurable:!0,set:e}),X(t)},s(V[A],"toString",(function(){return this._k})),_.f=tt,S.f=H,o("9093").f=w.f=et,o("52a7").f=Q,D.f=ot,n&&!o("2d00")&&s(K,"propertyIsEnumerable",Q,!0),g.f=function(t){return X(u(t))}),r(r.G+r.W+r.F*!B,{Symbol:V});for(var at="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;at.length>it;)u(at[it++]);for(var nt=F(u.store),rt=0;nt.length>rt;)p(nt[rt++]);r(r.S+r.F*!B,"Symbol",{for:function(t){return i(W,t+="")?W[t]:W[t]=V(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in W)if(W[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),r(r.S+r.F*!B,"Object",{create:Z,defineProperty:H,defineProperties:q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:ot});var st=c((function(){D.f(1)}));r(r.S+r.F*st,"Object",{getOwnPropertySymbols:function(t){return D.f(C(t))}}),z&&r(r.S+r.F*(!B||c((function(){var t=V();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))}))),"JSON",{stringify:function(t){var e,o,a=[t],i=1;while(arguments.length>i)a.push(arguments[i++]);if(o=e=a[1],(y(e)||void 0!==t)&&!G(t))return m(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!G(e))return e}),a[1]=e,P.apply(z,a)}}),V[A][J]||o("32e9")(V[A],J,V[A].valueOf),f(V,"Symbol"),f(Math,"Math",!0),f(a.JSON,"JSON",!0)},9093:function(t,e,o){var a=o("ce10"),i=o("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},a446:function(t,e,o){"use strict";var a=o("bfb0"),i=o.n(a);i.a},a8db:function(t,e,o){"use strict";var a=o("e265"),i=o.n(a),n=o("a4bb"),r=o.n(n);function s(t,e){if(null==t)return{};var o,a,i={},n=r()(t);for(a=0;a<n.length;a++)o=n[a],e.indexOf(o)>=0||(i[o]=t[o]);return i}function l(t,e){if(null==t)return{};var o,a,n=s(t,e);if(i.a){var r=i()(t);for(a=0;a<r.length;a++)o=r[a],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}o.d(e,"a",(function(){return l}))},ac4d:function(t,e,o){o("3a72")("asyncIterator")},bfb0:function(t,e,o){},d4c0:function(t,e,o){var a=o("0d58"),i=o("2621"),n=o("52a7");t.exports=function(t){var e=a(t),o=i.f;if(o){var r,s=o(t),l=n.f,c=0;while(s.length>c)l.call(t,r=s[c++])&&e.push(r)}return e}}}]);