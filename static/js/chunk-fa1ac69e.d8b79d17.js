(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa1ac69e","chunk-7412e63c"],{"10ac":function(e,t,n){"use strict";var o=n("555e"),a=n.n(o);a.a},"1af7":function(e,t,n){},"3c54":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookConfigDia"},[n("el-dialog",{attrs:{title:"预约费用设置",visible:e.dialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[n("div",{staticClass:"formBox"},[n("el-radio",{attrs:{label:"1"},model:{value:e.book_config.fee_type,callback:function(t){e.$set(e.book_config,"fee_type",t)},expression:"book_config.fee_type"}},[e._v("\n        订单比例\n        "),n("el-input-number",{staticStyle:{margin:"0 3px"},attrs:{size:"small",min:0,max:100,label:"订单比例"},model:{value:e.book_config.percent,callback:function(t){e.$set(e.book_config,"percent",t)},expression:"book_config.percent"}}),e._v("\n        %\n      ")],1),n("el-radio",{staticStyle:{"margin-top":"15px"},attrs:{label:"2"},model:{value:e.book_config.fee_type,callback:function(t){e.$set(e.book_config,"fee_type",t)},expression:"book_config.fee_type"}},[e._v("\n        固定金额\n        "),n("el-input-number",{staticStyle:{margin:"0 3px"},attrs:{size:"small",min:0,label:"固定金额"},model:{value:e.book_config.fee,callback:function(t){e.$set(e.book_config,"fee",t)},expression:"book_config.fee"}}),e._v("\n        ￥\n      ")],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)])],1)},a=[],i=n("9add"),r={data:function(){return{dialog:!1,brand_id:"",book_config:{fee_type:"1",fee:0,percent:0}}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{submit:function(){var e=this;console.log(this.brand_id,this.book_config);var t={};t.fee_type=this.book_config.fee_type,t.fee=100*this.book_config.fee,t.percent=this.book_config.percent,Object(i["o"])({brand_id:this.brand_id,book_config:JSON.stringify(t)}).then((function(t){0==t.code&&(e.$message({message:"预约费用设置成功！",type:"success"}),e.$parent.refresh(),e.dialog=!1)}))},open:function(e,t){this.brand_id=e,t&&(this.book_config=JSON.parse(t),this.book_config.fee=this.book_config.fee/100),this.dialog=!0},closedDialog:function(){this.brand_id="",this.book_config={fee_type:"1",fee:0,percent:0}}}},c=r,s=(n("fae7"),n("2877")),l=Object(s["a"])(c,o,a,!1,null,"40db4af0",null);t["default"]=l.exports},4632:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.data.total_count,"page-count":e.data.page_count,"page-size":e.data.page_size},on:{"current-change":e.change}})],1)},a=[],i={props:{data:{type:Object,default:function(){return{}}}},computed:{},methods:{change:function(e){this.$emit("change",e)}}},r=i,c=(n("10ac"),n("2877")),s=Object(c["a"])(r,o,a,!1,null,null,null),l=s.exports;t["a"]=l},"555e":function(e,t,n){},"7d43":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"className"},[n("el-card",{staticClass:"anoCard"},[n("div",{staticClass:"anoCard-header",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("品牌管理")]),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:e.addBrand}},[e._v("新增品牌")])],1),n("div",{staticClass:"box"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingList,expression:"loadingList"}],staticStyle:{width:"100%"},attrs:{data:e.brandData.list,border:"","header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[n("el-table-column",{attrs:{prop:"brand_code",label:"品牌代码",width:"150"}}),n("el-table-column",{attrs:{prop:"name",label:"品牌名称",width:"150"}}),n("el-table-column",{attrs:{prop:"contact_name",label:"联系人",width:"150"}}),n("el-table-column",{attrs:{prop:"contact_phone",label:"联系电话",width:"200"}}),n("el-table-column",{attrs:{prop:"intro",label:"简介"}}),n("el-table-column",{attrs:{prop:"intro",label:"预定网站"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("\n              "+e._s(t.row.brand_url)+"\n              "),n("span",{staticStyle:{"margin-left":"5px"}},[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.copy(t.row.brand_url)}}},[e._v("复制")])],1)])]}}])}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),n("el-table-column",{attrs:{label:"操作",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.ghMes(t.row.brand_id)}}},[e._v("公众号信息")]),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.bindGh(t.row)}}},[e._v("公众号绑定")]),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.editBrand(t.row)}}},[e._v("编辑")]),0==t.row.status?n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.runBrand(t.row.brand_id)}}},[e._v("上线")]):e._e(),1==t.row.status?n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.stopBrand(t.row.brand_id)}}},[e._v("下线")]):e._e(),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.setBookConfig(t.row)}}},[e._v("预约费用")])],1)]}}])})],1)],1),n("pagination",{attrs:{data:e.brandData},on:{change:e.getBrandList}})],1),n("add-or-mod-brand-dia",{ref:"addOrModBrandDia"}),n("el-dialog",{attrs:{title:"绑定 "+e.activeBName+" 公众号",visible:e.showBindGh,width:"30%"},on:{"update:visible":function(t){e.showBindGh=t}}},[n("div",{staticClass:"qrCode"},[n("div",{attrs:{id:"qrImg"}}),n("div",{staticStyle:{"margin-top":"10px"}},[e._v("请用微信扫码绑定公众号")])])]),n("gh-mes-dia",{ref:"ghMesDia"}),n("book-config-dia",{ref:"bookConfigDia"})],1)},a=[],i=(n("7f7f"),n("9add")),r=n("4632"),c=n("a16a"),s=n("039d"),l=n("3c54"),d=n("d044"),f=n.n(d),u={data:function(){return{loadingList:!1,brandData:{},activeBName:"",qrCode:null,showBindGh:!1}},components:{pagination:r["a"],addOrModBrandDia:c["default"],ghMesDia:s["default"],bookConfigDia:l["default"]},filters:{},created:function(e){this.getBrandList()},onShow:function(){},mounted:function(){},computed:{page:function(){return this.brandData.page}},methods:{setBookConfig:function(e){console.log(e),this.$refs["bookConfigDia"].open(e.brand_id,e.book_config)},copy:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},ghMes:function(e){this.$refs["ghMesDia"].open(e)},bindGh:function(e){var t=this;this.$message({message:"二维码加载中，请稍后",type:"warning",offset:200,duration:0}),this.activeBName=e.name,Object(i["c"])({brand_id:e.brand_id}).then((function(e){0==e.code?(t.showBindGh=!0,t.$message.close(),t.$nextTick((function(){t.qrCode?(t.qrCode.clear(),t.qrCode.makeCode(e.data.auth_url)):t.qrCode=new f.a(document.getElementById("qrImg"),e.data.auth_url)}))):t.$message({message:e.msg?e.msg:"二维码获取失败",type:"error"})}))},editBrand:function(e){this.$refs["addOrModBrandDia"].open(e)},refresh:function(e){this.getBrandList(e||this.page)},stopBrand:function(e){var t=this;this.$confirm("此操作将下线品牌, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["p"])({brand_id:e}).then((function(e){0==e.code&&(t.$message({message:"下线成功",type:"success"}),t.refresh())}))}))},runBrand:function(e){var t=this;this.$confirm("此操作将上线品牌, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["n"])({brand_id:e}).then((function(e){0==e.code&&(t.$message({message:"上线成功",type:"success"}),t.refresh())}))}))},addBrand:function(){this.$refs["addOrModBrandDia"].open()},getBrandList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loadingList=!0,Object(i["d"])({page:t}).then((function(t){0==t.code&&(console.log(t.data),e.brandData=t.data)})).finally((function(){e.loadingList=!1}))}}},m=u,p=(n("ba1e"),n("2877")),b=Object(p["a"])(m,o,a,!1,null,"da2ae860",null);t["default"]=b.exports},8019:function(e,t,n){"use strict";n.r(t);var o=n("7d43");t["default"]=o["default"]},a16a:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addOrModBrandDia"},[n("el-dialog",{attrs:{title:0==e.formType?"新增品牌":"编辑品牌",visible:e.dialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closedDialog}},[n("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"品牌代码",prop:"brand_code"}},[n("el-input",{model:{value:e.form.brand_code,callback:function(t){e.$set(e.form,"brand_code",t)},expression:"form.brand_code"}})],1),n("el-form-item",{attrs:{label:"品牌名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"简介",prop:"intro"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),n("el-form-item",{attrs:{label:"联系人",prop:"contact_name"}},[n("el-input",{model:{value:e.form.contact_name,callback:function(t){e.$set(e.form,"contact_name",t)},expression:"form.contact_name"}})],1),n("el-form-item",{attrs:{label:"联系电话",prop:"contact_phone"}},[n("el-input",{model:{value:e.form.contact_phone,callback:function(t){e.$set(e.form,"contact_phone",t)},expression:"form.contact_phone"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},a=[],i=(n("7f7f"),n("9add")),r={data:function(){return{formType:0,dialog:!1,brand_id:"",form:{brand_code:"",name:"",intro:"",contact_name:"",contact_phone:""},rules:{brand_code:[{required:!0,message:"请输入品牌代码",trigger:"blur"}],name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],intro:[{required:!0,message:"请输入简介",trigger:"blur"}],contact_name:[{required:!0,message:"请输入联系人",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]}}},components:{},filters:{},onLoad:function(e){},onShow:function(){},mounted:function(){},computed:{},methods:{editBrand:function(e){var t=this;Object(i["b"])(e).then((function(e){0==e.code&&(t.$message({message:"修改品牌成功！",type:"success"}),t.$parent.refresh(1))}))},addBrand:function(e){var t=this;Object(i["a"])(e).then((function(e){0==e.code&&(t.$message({message:"新增品牌成功！",type:"success"}),t.$parent.refresh(1))}))},submit:function(){var e=this;console.log("点击了提交"),this.$refs["form"].validate((function(t){if(t){var n={};n.brand_code=e.form.brand_code,n.name=e.form.name,n.intro=e.form.intro,n.contact_name=e.form.contact_name,n.contact_phone=e.form.contact_phone,1==e.formType&&(n.brand_id=e.brand_id),0==e.formType?(console.log("新增商家"),e.addBrand(n)):(console.log("编辑商家"),e.editBrand(n)),e.dialog=!1}}))},open:function(e){console.log("123456"),e&&(this.formType=1,this.brand_id=e.brand_id,this.form.brand_code=e.brand_code,this.form.name=e.name,this.form.intro=e.intro,this.form.contact_name=e.contact_name,this.form.contact_phone=e.contact_phone),this.dialog=!0},closedDialog:function(){this.$refs["form"].clearValidate(),this.form={brand_code:"",name:"",intro:"",contact_name:"",contact_phone:""},this.formType=0}}},c=r,s=n("2877"),l=Object(s["a"])(c,o,a,!1,null,"447ca4d8",null);t["default"]=l.exports},ad5e:function(e,t,n){},ba1e:function(e,t,n){"use strict";var o=n("1af7"),a=n.n(o);a.a},fae7:function(e,t,n){"use strict";var o=n("ad5e"),a=n.n(o);a.a}}]);