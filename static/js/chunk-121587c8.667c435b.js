(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-121587c8","chunk-6b032676","chunk-65ee155c"],{"3b3a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workInfo"},[a("el-dialog",{attrs:{title:"订单信息",visible:t.show,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[a("div",{staticClass:"workLists"},[t._l(t.listWorkData,function(e,s){return a("div",{key:s,staticClass:"workItem"},[a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            订单号：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.trade_no)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            产品名：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.goods_name)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            商品属性：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.attrs)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            客户名：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.append_data.name)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            客户手机号：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.append_data.phone)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            订单金额：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            ￥"+t._s((e.order_money/100).toFixed(2))+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            工时数：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.work_num)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            支付状态：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.pay_status_name)+"\n          ")])]),a("div",{staticClass:"workCell"},[a("div",{staticClass:"workOption"},[t._v("\n            订单状态：\n          ")]),a("div",{staticClass:"workValue"},[t._v("\n            "+t._s(e.status_name)+"\n          ")])])])}),0==t.listWorkData.length?a("div",{staticStyle:{textAlign:"center",marginTop:"30px"}},[t._v("\n        订单列表为空\n      ")]):t._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddGoods}},[t._v("补单")])],1)]),a("add-goods",{ref:"addGoods"})],1)},n=[],i=a("f0a9"),o=a("f8b7"),r={data:function(){return{show:!1,shop_id:"",work_id:"",listWorkData:[]}},props:{},components:{addGoods:i["default"]},filters:{},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{},methods:{refresh:function(){this.$parent.refreshPage(),this.getListWork()},showAddGoods:function(t){this.$refs["addGoods"].open(this.shop_id,this.work_id)},open:function(t,e){console.log(t,e),this.shop_id=t,this.work_id=e,this.getListWork(),this.show=!0},getListWork:function(){var t=this;Object(o["f"])({work_id:this.work_id}).then(function(e){console.log(e),t.listWorkData=e.data,t.listWorkData.map(function(t,e){t.append_data=t.append_data?JSON.parse(t.append_data):{},t.attrs=t.attrs?JSON.parse(t.attrs):[]})})},closed:function(){this.listWorkData=[],this.show=!1}}},d=r,c=(a("cedc"),a("2877")),l=Object(c["a"])(d,s,n,!1,null,"3fae20d2",null);e["default"]=l.exports},"4d93":function(t,e,a){"use strict";var s=a("5b34"),n=a.n(s);n.a},"5b34":function(t,e,a){},"763c":function(t,e,a){"use strict";var s=a("a429"),n=a.n(s);n.a},"891b":function(t,e,a){"use strict";var s=a("9baf7"),n=a.n(s);n.a},"9abe":function(t,e,a){},"9add":function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"n",function(){return r}),a.d(e,"p",function(){return d}),a.d(e,"b",function(){return c}),a.d(e,"c",function(){return l}),a.d(e,"e",function(){return u}),a.d(e,"o",function(){return v}),a.d(e,"g",function(){return h}),a.d(e,"f",function(){return p}),a.d(e,"h",function(){return f}),a.d(e,"j",function(){return g}),a.d(e,"l",function(){return m}),a.d(e,"k",function(){return _}),a.d(e,"m",function(){return k}),a.d(e,"i",function(){return w});var s=a("365c"),n={brandList:"list",addBrand:"add",runBrand:"run",stopBrand:"stop",editBrand:"mod",getAppBindUrl:"getAppBindUrl",getGhMes:"getAppBindInfo",setBookConfig:"bookConfig",brandMod:"mod",getBookConfig:"getBookConfig",getWorkData:"workData",getReport:"report",setTemplate:"setTemplate",mchInfoAdd:"mchInfoAdd",mchInfoMod:"mchInfoMod",mchInfoStepGet:"mchInfoStepGet",mchInfoSave:"mchInfoSave",mchInfoSubmit:"mchInfoSubmit",mchInfoGet:"mchInfoGet"};function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.brandList,t,"gm/brand")}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.addBrand,t,"gm/brand")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.runBrand,t,"gm/brand")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.stopBrand,t,"gm/brand")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.editBrand,t,"gm/brand")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getAppBindUrl,t,"gm/brand")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getGhMes,t,"gm/brand")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.setBookConfig,t,"gm/brand")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getWorkData,t,"gm/brand")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getReport,t,"gm/brand")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoAdd,t,"gm/brand")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoMod,t,"gm/brand")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoStepGet,t,"gm/brand")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoSave,t,"gm/brand")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoSubmit,t,"gm/brand")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.mchInfoGet,t,"gm/brand")}},"9baf7":function(t,e,a){},a429:function(t,e,a){},cedc:function(t,e,a){"use strict";var s=a("9abe"),n=a.n(s);n.a},e690:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"className"},[a("el-card",{staticClass:"anoCard"},[a("div",{staticClass:"headerBox",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("经营概况")]),a("div",[a("el-dropdown",{attrs:{trigger:"click"}},[a("div",{staticClass:"title"},[a("div",{staticClass:"titleName",staticStyle:{color:"#000","margin-right":"10px"}},[a("span",{staticStyle:{fontWeight:"700"}},[t._v(t._s(t.activeShop.shop_name))])]),a("i",{staticClass:"el-icon-arrow-down"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingMenu,expression:"loadingMenu"}],ref:"dropMenuRef",staticClass:"dropMenu",on:{scroll:t.shopScroll}},t._l(t.games_list,function(e,s){return a("el-dropdown-item",{key:s,nativeOn:{click:function(a){return t.changeShop(e)}}},[a("div",{staticClass:"drodownItem"},[a("span",[t._v(t._s(e.shop_name))])])])}),1)])],1),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.dayChange},model:{value:t.activeDay,callback:function(e){t.activeDay=e},expression:"activeDay"}})],1)]),a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"sumBoxLeft"},[a("div",{staticClass:"earnRow"},[a("div",{staticClass:"earnItem"},[a("div",[t._v("\n                实际收入\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.incom_money))+"\n              ")])]),a("div",{staticClass:"earnItem",staticStyle:{"margin-left":"20px"}},[a("div",[t._v("\n                预计收入\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.expec_money))+"\n              ")])])]),a("div",{staticClass:"earnRow"},[a("div",{staticClass:"earnItem"},[a("div",[t._v("\n                服务订单\n              ")]),a("div",{staticClass:"price"},[t._v("\n                "+t._s(t.ordersData.total_num)),a("span",{staticStyle:{color:"#000",fontSize:"16px",marginLeft:"5px"}},[t._v("单")])])])])])]),a("el-col",{attrs:{span:14}},[a("el-row",{staticClass:"rightRow"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                商品金额\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.order_money))+"\n              ")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                结算订金\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.book_money))+"\n              ")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                收款金额\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.credit_money))+"\n              ")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                优惠减免\n              ")]),a("div",{staticClass:"price"},[t._v("\n                ￥"+t._s(t._f("formatMoney")(t.moneysData.reduce_money))+"\n              ")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                待服务\n              ")]),a("div",{staticClass:"price"},[t._v("\n                "+t._s(t.ordersData.waitservice_num)),a("span",{staticStyle:{color:"#000",fontSize:"16px",marginLeft:"5px"}},[t._v("单")])])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                已完成\n              ")]),a("div",{staticClass:"price"},[t._v("\n                "+t._s(t.ordersData.finish_num)),a("span",{staticStyle:{color:"#000",fontSize:"16px",marginLeft:"5px"}},[t._v("单")])])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"rightItem"},[a("div",[t._v("\n                已取消\n              ")]),a("div",{staticClass:"price"},[t._v("\n                "+t._s(t.ordersData.cancel_num)),a("span",{staticStyle:{color:"#000",fontSize:"16px",marginLeft:"5px"}},[t._v("单")])])])])],1)],1)],1),a("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"space-between"}},[a("el-button",{staticStyle:{padding:"0 20px"},attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:t.preWeek}}),a("el-tabs",{staticStyle:{flex:"1"},attrs:{stretch:""},on:{"tab-click":t.handleTabsClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.dayList,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.day+" "+t.week,name:t.day}})}),1),a("el-button",{staticStyle:{padding:"0 20px"},attrs:{type:"text",icon:"el-icon-arrow-right"},on:{click:t.nextWeek}})],1),t._l(t.workData,function(e,s){return a("div",{key:s,staticClass:"orderBox"},[a("div",{staticClass:"orderTime"},[t._v("\n        "+t._s(t.handleTimeText(s))+"\n      ")]),a("el-row",{attrs:{gutter:24}},t._l(e,function(e,s){return a("el-col",{key:s,attrs:{span:4}},[a("div",{staticClass:"orderItem",on:{click:function(a){return t.openWorkInfo(e)}}},[a("div",{staticClass:"time"},[t._v("\n              "+t._s(e.work_time)+"\n            ")]),a("div",{staticClass:"orderInfo"},[a("div",[t._v("\n                工位"),a("br"),t._v("\n                "+t._s(e.work_num)+"\n              ")]),a("div",[t._v("\n                订单\n                "),a("div",{style:{color:0==e.order_num?"#000":"#409eff"}},[t._v("\n                  "+t._s(e.order_num)+"\n                ")])])]),a("div",{staticClass:"workSwitch"},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.switchWork(e.work_id,e.is_work)}},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:e.is_work,callback:function(a){t.$set(e,"is_work",a)},expression:"innerItem.is_work"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:Number(e.work_num)<=Number(e.order_num)+Number(e.fix_num),expression:"Number(innerItem.work_num) <= (Number(innerItem.order_num) + Number(innerItem.fix_num))"}],staticClass:"fullIcon"},[t._v("\n              满\n            ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.is_work,expression:"innerItem.is_work == 0"}],staticClass:"closeIcon"},[t._v("\n              关\n            ")])])])}),1)],1)}),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.workData.length,expression:"workData.length == 0"}],staticClass:"tipBox"},[t._v("\n      "+t._s(t.tipMes?t.tipMes:"订单列表为空")+"\n    ")])],2),a("work-info-dia",{ref:"workInfoDia"})],1)},n=[],i=(a("7f7f"),a("2f62"),a("e692")),o=a("9add"),r=a("3b3a"),d={data:function(){return{activeDay:"",loadingMenu:!1,games_list:[],activeShop:{},page:1,page_count:0,activeTab:"",dayList:[],workData:[],tipMes:"",moneysData:{},ordersData:{},activeOrder:"",listWorkData:[]}},components:{workInfoDia:r["default"]},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},created:function(t){this.getNowFormatDate(),this.getShopList()},methods:{switchWork:function(t,e){var a=this;Object(i["p"])({work_id:t,is_work:e}).then(function(t){0==t.code?a.$message({message:"工时修改成功",type:"success"}):a.$message({message:t.msg?t.msg:"工时修改失败",type:"error"})})},openWorkInfo:function(t){this.listWorkData=[],this.$refs["workInfoDia"].open(this.activeShop.shop_id,t.work_id)},openPop:function(t){this.activeOrder==t.work_id?this.activeOrder="":this.activeOrder=t.work_id},handleActiveOrder:function(t){return this.activeOrder==t},getReport:function(){var t=this;Object(o["f"])({shop_id:this.activeShop.shop_id,day:this.activeDay}).then(function(e){t.moneysData=e.data.moneys,t.ordersData=e.data.orders})},handleTimeText:function(t){switch(t){case 0:return"上午时段";case 1:return"下午时段";case 2:return"晚上时段";default:break}},getWorkData:function(t){var e=this;Object(o["g"])({shop_id:this.activeShop.shop_id,day:t||this.activeDay}).then(function(t){e.workData=t.data,e.tipMes=t.msg})},handleTabsClick:function(t){this.dayChange(t.name)},getNowFormatDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a<10&&(a="0".concat(a)),s<10&&(s="0".concat(s)),this.activeDay="".concat(e,"-").concat(a,"-").concat(s)},preWeek:function(){var t=this.getPreviousDate(7,this.activeDay);this.activeDay=t,this.getWeekList()},nextWeek:function(){var t=this.getPreviousDate(-7,this.activeDay);this.activeDay=t,this.getWeekList()},getPreviousDate:function(t,e){var a=new Date(e);a.setDate(a.getDate()-t);var s=a.getFullYear(),n=a.getMonth()+1,i=a.getDate();return s+"-"+n+"-"+i},getWeekList:function(t){var e=null;e=t?new Date(t):this.activeDay?new Date(this.activeDay):new Date;for(var a=e.getTime(),s=e.getDay(),n=[],i=0,o=0;o<7;o++){var r=new Date(a+864e5*(o-(s+6)%7));e.getTime()==r.getTime()&&(i=o);var d=this.formatterDay(r);n.push(d)}this.dayList=n,this.activeTab=n[i].day,this.getWorkData()},formatterDay:function(t){var e=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate(),n=t.getDay();switch(n){case 0:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期日"};case 1:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期一"};case 2:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期二"};case 3:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期三"};case 4:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期四"};case 5:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期五"};case 6:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期六"};default:return{day:e+"-"+a+"-"+s,dayText:a+"月"+s+"日",week:"星期日"}}},refreshPage:function(){this.activeOrder="",this.getReport(),this.getWeekList()},changeShop:function(t){this.activeShop=t,this.getReport(),this.getWeekList(),this.activeOrder=""},dayChange:function(t){this.activeDay=t,this.getReport(),this.getWeekList(t),this.activeOrder=""},shopScroll:function(){var t=this.$refs["dropMenuRef"].scrollHeight-this.$refs["dropMenuRef"].scrollTop<=this.$refs["dropMenuRef"].clientHeight;t&&this.page<this.page_count&&(this.page=this.page+1,this.getShopList())},getShopList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loadingMenu=!0,Object(i["j"])({page:e}).then(function(e){0==e.code&&(t.page_count=e.data.page_count,1==t.page?t.games_list=e.data.list:t.games_list=t.games_list.concat(e.data.list),"{}"==JSON.stringify(t.activeShop)&&(t.activeShop=t.games_list[0]),t.getReport(),t.getWeekList())}).finally(function(){t.loadingMenu=!1})}}},c=d,l=(a("4d93"),a("891b"),a("2877")),u=Object(l["a"])(c,s,n,!1,null,"078d2cae",null);e["default"]=u.exports},f0a9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addGoods"},[a("el-dialog",{attrs:{title:"增购商品",visible:t.show,top:"20px",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},closed:t.closed}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"goodsList"},t._l(t.goodsList,function(e,s){return a("div",{key:s,staticClass:"goodsItem",class:{activeGoods:e.goods_id==t.activedId},on:{click:function(a){return t.selectGoods(e.goods_id)}}},[a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.cover}}),a("div",{staticClass:"goodsInfo"},[a("div",[t._v("\n                  "+t._s(e.goods_name)+"\n                  "),a("span",{style:{color:1==e.is_run?"#55aaff":"#777"}},[t._v(t._s(1==e.is_run?"已上线":"未上线"))])]),a("div",[t._v("\n                  ￥"+t._s(t._f("formatMoney")(e.sale_price))+"\n                ")])])],1)}),0)]),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.activedId,expression:"activedId"}],attrs:{span:12}},[a("div",{staticClass:"attrsList"},t._l(t.attrsList,function(e,s){return a("div",{key:s,staticClass:"attrsItem"},[a("div",{staticClass:"attrsTitle"},[t._v("\n              "+t._s(e.attr_name)+"\n            ")]),a("div",{staticClass:"attrsValue"},t._l(e.values,function(e,n){return a("div",{key:n,staticClass:"valueItem",class:e.attr_value_id==(t.selectAttrs[s]?t.selectAttrs[s].attr_value_id:"")?"activeAttr":"",on:{click:function(e){return t.selectAttr(s,n)}}},[t._v("\n                "+t._s(e.attr_value)+"\n              ")])}),0)])}),0),a("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",rules:t.rules,model:t.append_data,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入姓名"},model:{value:t.append_data.name,callback:function(e){t.$set(t.append_data,"name",e)},expression:"append_data.name"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.append_data.gender,callback:function(e){t.$set(t.append_data,"gender",e)},expression:"append_data.gender"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入联系手机"},model:{value:t.append_data.phone,callback:function(e){t.$set(t.append_data,"phone",e)},expression:"append_data.phone"}})],1),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-radio-group",{model:{value:t.order_status,callback:function(e){t.order_status=e},expression:"order_status"}},[a("el-radio",{attrs:{label:1}},[t._v("待服务")]),a("el-radio",{attrs:{label:2}},[t._v("已完成")])],1)],1)],1),a("div",{staticClass:"cell"},[a("div",[t._v("单价：")]),a("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price:0))+"\n          ")])]),a("div",{staticClass:"cell"},[a("div",[t._v("总价：")]),a("div",[t._v("\n            ￥"+t._s(t._f("formatMoney")(t.goods_sku?t.goods_sku.sale_price*t.num:0))+"\n          ")])])],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closed}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},n=[],i=(a("ac6a"),a("f8b7")),o={data:function(){return{show:!1,goodsList:[],goodsObj:{},shop_id:"",work_id:"",num:1,append_data:{name:"",gender:"",phone:""},order_status:1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],phone:[{required:!0,message:"请输入联系手机",trigger:"blur"}]},options:[{value:"1",label:"男"},{value:"0",label:"女"}],activedId:"",selectAttrs:[],hasSelect:[],attrs:[],skuMap:{}}},watch:{activedId:function(){var t=this;console.log(this.goodsObj[this.activedId]),this.num=1,this.skuMap={},this.goodsObj[this.activedId].sku.map(function(e,a){t.skuMap[e.attr_value_items]=e})}},components:{},filters:{formatMoney:function(t){return(t/100).toFixed(2)}},onLoad:function(t){},onShow:function(){},mounted:function(){},computed:{goods_sku:function(){if(console.log(this.selectAll),this.selectAll){var t=this.selectAttrs.map(function(t){return t?t.attr_value_id:""});return this.skuMap[JSON.stringify(t)]}return this.goodsObj[this.activedId]},attrsList:function(){return this.activedId?this.goodsObj[this.activedId].attrs:[]},selectAll:function(){var t=!0;return this.hasSelect.map(function(e,a){-1==e&&(t=!1)}),t},tipText:function(){for(var t="",e=0;e<this.hasSelect.length;e++){var a=this.hasSelect[e];if(-1==a){t=this.attrs[e].attr_name;break}}return t}},methods:{submit:function(){var t=this;this.selectAll?this.$refs.form.validate(function(e){if(e){var a=[];t.selectAttrs.map(function(t,e){a.push(t.attr_value_id)}),Object(i["n"])({work_id:t.work_id,shop_id:t.shop_id,goods_id:t.activedId,attrs:JSON.stringify(a),append_data:JSON.stringify(t.append_data),order_status:t.order_status}).then(function(e){0==e.code&&(t.$message({message:"补单成功",type:"success"}),t.show=!1,t.$parent.refresh())})}}):this.$message({message:"请选择".concat(this.tipText),type:"error"})},selectAttr:function(t,e){JSON.stringify(this.selectAttrs[t])==JSON.stringify(this.attrs[t].values[e])?(this.$set(this.selectAttrs,t,void 0),this.$set(this.hasSelect,t,-1)):(this.$set(this.selectAttrs,t,this.attrs[t].values[e]),this.$set(this.hasSelect,t,e))},selectGoods:function(t){var e=this;this.activedId=t,this.attrs=[],this.selectAttrs=[],this.attrs=this.goodsObj[this.activedId].attrs,this.hasSelect=[],this.attrs.map(function(t,a){e.hasSelect.push(-1)})},getOGoodsList:function(){var t=this;Object(i["g"])().then(function(e){console.log(e,1),t.goodsList=e.data,t.goodsList.map(function(e,a){t.goodsObj[e.goods_id]=e}),console.log(t.goodsObj)})},open:function(t,e){this.show=!0,this.shop_id=t,this.work_id=e,this.getOGoodsList()},closed:function(){this.activedId="",this.goodsObj={},this.shop_id="",this.work_id="",this.selectAttrs=[],this.attrs=[],this.hasSelect=[],this.show=!1,this.append_data={name:"",gender:"",phone:""},this.order_status=1,this.$refs["form"].clearValidate()}}},r=o,d=(a("763c"),a("2877")),c=Object(d["a"])(r,s,n,!1,null,"750ae2f6",null);e["default"]=c.exports},f8b7:function(t,e,a){"use strict";a.d(e,"i",function(){return i}),a.d(e,"h",function(){return o}),a.d(e,"b",function(){return r}),a.d(e,"m",function(){return d}),a.d(e,"o",function(){return c}),a.d(e,"e",function(){return l}),a.d(e,"c",function(){return u}),a.d(e,"g",function(){return v}),a.d(e,"k",function(){return h}),a.d(e,"l",function(){return p}),a.d(e,"d",function(){return f}),a.d(e,"f",function(){return g}),a.d(e,"n",function(){return m}),a.d(e,"p",function(){return _}),a.d(e,"a",function(){return k}),a.d(e,"j",function(){return w}),a.d(e,"q",function(){return y});var s=a("365c"),n={list:"list",setAddress:"setAddress",getShipComs:"getShipComs",setShip:"setShip",getOrderInfo:"info",contactMod:"contactMod",noticeMod:"noticeMod",priceReduce:"reduce",priceCredit:"credit",getCreditList:"creditList",creditDel:"creditDel",getOGoodsList:"goodsList",goodsAdd:"goodsAdd",goodsDel:"goodsDel",finishOrder:"finish",listWork:"listWork",orderAdd:"add",reBook:"reBook",cancelOrder:"cancel",getShipList:"express",setShiping:"setShiping"};function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.list,t,"gm/order")}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getOrderInfo,t,"gm/order")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.contactMod,t,"gm/order")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.noticeMod,t,"gm/order")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.priceCredit,t,"gm/order")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getCreditList,t,"gm/order")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.creditDel,t,"gm/order")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getOGoodsList,t,"gm/order")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.goodsAdd,t,"gm/order")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.goodsDel,t,"gm/order")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.finishOrder,t,"gm/order")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.listWork,t,"gm/order")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.orderAdd,t,"gm/order")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.reBook,t,"gm/order")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.cancelOrder,t,"gm/order")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.getShipList,t,"gm/order")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].post(n.setShiping,t,"gm/order")}}}]);