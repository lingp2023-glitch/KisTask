(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31905c06","chunk-f6102e1c"],{a3ab:function(t,a,r){"use strict";r.r(a);var o=r("ed85");a["default"]=o["default"]},c40e:function(t,a,r){"use strict";r.d(a,"c",function(){return n}),r.d(a,"m",function(){return i}),r.d(a,"i",function(){return s}),r.d(a,"J",function(){return d}),r.d(a,"G",function(){return u}),r.d(a,"I",function(){return l}),r.d(a,"F",function(){return c}),r.d(a,"w",function(){return g}),r.d(a,"t",function(){return p}),r.d(a,"r",function(){return h}),r.d(a,"u",function(){return f}),r.d(a,"s",function(){return v}),r.d(a,"o",function(){return m}),r.d(a,"v",function(){return _}),r.d(a,"x",function(){return A}),r.d(a,"q",function(){return S}),r.d(a,"p",function(){return b}),r.d(a,"A",function(){return w}),r.d(a,"z",function(){return y}),r.d(a,"y",function(){return k}),r.d(a,"B",function(){return x}),r.d(a,"n",function(){return L}),r.d(a,"K",function(){return V}),r.d(a,"L",function(){return D}),r.d(a,"g",function(){return G}),r.d(a,"h",function(){return C}),r.d(a,"a",function(){return I}),r.d(a,"b",function(){return R}),r.d(a,"f",function(){return $}),r.d(a,"j",function(){return P}),r.d(a,"H",function(){return N}),r.d(a,"d",function(){return M}),r.d(a,"e",function(){return T}),r.d(a,"l",function(){return z}),r.d(a,"k",function(){return j}),r.d(a,"C",function(){return O}),r.d(a,"E",function(){return q}),r.d(a,"D",function(){return B});var o=r("365c"),e={groupList:"groupList",groupAdd:"groupAdd",groupMod:"groupMod",groupDel:"groupDel",goodsGroupList:"groupList",goodsGroupAdd:"groupAdd",goodsGroupMod:"groupMod",goodsGroupDel:"groupDel",goodsGroupTree:"groupTree",goodsList:"list",goodsAdd:"add",goodsMod:"mod",goodsDel:"del",goodsAttrSet:"attrSet",goodsSkuSet:"skuSet",goodsSkuGet:"skuGet",goodsRun:"run",goodsStop:"stop",topList:"topList",setTop:"topSet",topCancel:"topCancel",applyList:"applyList",applyPool:"applyPool",applyCalc:"applyCalc",applyPut:"applyPut",fixPut:"fixPut",fixList:"fixList",setGoodsTop:"topSet",draftGet:"draftGet",draftSet:"draftSet",profitList:"profitList",imgGet:"imgsGet",setImgs:"imgsSet",serveGet:"serviceGet",setServe:"serviceSet",getAttrs:"attrs",getSkuShops:"skuShops",checkGoods:"check"};function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.checkGoods,t,"gm/goods")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.getSkuShops,t,"gm/goods")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.getAttrs,t,"gm/goods")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.setServe,t,"gm/goods")}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.serveGet,t,"gm/goods")}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.setImgs,t,"gm/goods")}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.imgGet,t,"gm/goods")}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsList,t,"gm/goods")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsGroupList,t,"gm/goods")}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsGroupAdd,t,"gm/goods")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsGroupMod,t,"gm/goods")}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsGroupDel,t,"gm/goods")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsAdd,t,"gm/goods")}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsGroupTree,t,"gm/goods")}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsMod,t,"gm/goods")}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsDel,t,"gm/goods")}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsAttrSet,t,"gm/goods")}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsSkuSet,t,"gm/goods")}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsSkuGet,t,"gm/goods")}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsRun,t,"gm/goods")}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.goodsStop,t,"gm/goods")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].get(e.topList,t,"gm/goods")}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].get(e.setTop,t,"gm/goods")}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].get(e.topCancel,t,"gm/goods")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.applyList,t,"gm/goods")}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.applyPool,t,"gm/goods")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.applyCalc,t,"gm/goods")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.applyPut,t,"gm/goods")}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.fixPut,t,"gm/goods")}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.fixList,t,"gm/goods")}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.setGoodsTop,t,"gm/goods")}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.draftGet,t,"gm/goods")}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.draftSet,t,"gm/goods")}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.profitList,t,"gm/goods")}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.groupList,t,"gm/goods")}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.groupAdd,t,"gm/goods")}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.groupMod,t,"gm/goods")}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].post(e.groupDel,t,"gm/goods")}},c68a:function(t,a,r){},c933:function(t,a,r){"use strict";var o=r("c68a"),e=r.n(o);e.a},ed85:function(t,a,r){"use strict";r.r(a);var o=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",[r("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasAttrs,expression:"hasAttrs"}],attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.showAddStandardAttr}},[t._v('"参数选择"定义属性')]),r("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.ShowAdd,callback:function(a){t.ShowAdd=a},expression:"ShowAdd"}},[r("div",{staticClass:"addAttrWrap"},[r("el-input",{attrs:{size:"mini",width:"100px",placeholder:"请输入规格名称"},model:{value:t.attr_item.attr_name,callback:function(a){t.$set(t.attr_item,"attr_name",a)},expression:"attr_item.attr_name"}}),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.addAttrItem}},[t._v("添加")])],1),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-plus",type:"primary",size:"mini"},slot:"reference"},[t._v('"文字描述"定义属性')])],1),r("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.attr,border:""}},[r("el-table-column",{attrs:{prop:"attr_name",label:"规格名称",width:"200"}}),r("el-table-column",{attrs:{prop:"attr_value",label:"规格值"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.values,function(o,e){return r("el-tag",{key:o.attr_value,staticClass:"tag",attrs:{name:o.attr_value,type:"info","disable-transitions":!0,closable:""},on:{click:function(r){return t.editAttrValue(o,a.$index,e)},close:function(r){return t.delAttrValue(a.$index,e)}}},[t._v("\n          "+t._s(o.attr_value)+"\n        ")])}),t.haveStandardValue(a.row.attr_name)?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(r){return t.addStandardValueDialog(a.$index,a.row.attr_name)}}},[t._v('"参数选择"定义属性值')]):t._e(),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(r){return t.addAttrDialog(a.$index)}}},[t._v('"文字描述"定义属性值')])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("el-link",{staticClass:"attr_link",attrs:{underline:!1},on:{click:function(r){return t.delAttr(a.$index)}}},[t._v("删除")])]}}])})],1),r("el-dialog",{attrs:{"append-to-body":"",title:"属性值",visible:t.addAttrValueShow,width:"30%"},on:{"update:visible":function(a){t.addAttrValueShow=a},closed:t.closed}},[r("el-form",{ref:"addAttrValueData",attrs:{"label-width":"auto",model:t.attr_value,rules:t.rules}},[r("el-form-item",{attrs:{label:"规格值",prop:"attr_value"}},[r("el-input",{model:{value:t.attr_value.attr_value,callback:function(a){t.$set(t.attr_value,"attr_value",a)},expression:"attr_value.attr_value"}})],1)],1),r("picture-library",{ref:"pic",attrs:{appendToBody:!0},on:{getData:t.getPic}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(a){t.addAttrValueShow=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.setAttrValue}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{"append-to-body":"",top:"20px",title:"标准属性值",visible:t.addStandardAttrShow},on:{"update:visible":function(a){t.addStandardAttrShow=a},closed:t.closed}},[r("div",{staticStyle:{"margin-bottom":"20px"}},[r("el-radio-group",{model:{value:t.group_id,callback:function(a){t.group_id=a},expression:"group_id"}},[r("el-radio-button",{attrs:{label:"1"}},[t._v("绿植类")]),r("el-radio-button",{attrs:{label:"2"}},[t._v("非绿植类")])],1)],1),r("el-row",[r("el-col",{staticStyle:{"border-right":"1px solid #ddd"},attrs:{span:6}},[r("div",{staticClass:"scrollBox"},[r("el-radio-group",{model:{value:t.standarAttr,callback:function(a){t.standarAttr=a},expression:"standarAttr"}},t._l(t.attrsNames,function(a,o){return r("el-radio",{key:o,attrs:{label:a},on:{change:t.attrsNameChange}},[t._v(t._s(a))])}),1)],1)]),r("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:18}},[r("el-checkbox-group",{model:{value:t.standardValueList,callback:function(a){t.standardValueList=a},expression:"standardValueList"}},t._l(t.valueData,function(t,a){return r("el-checkbox",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(a){t.standarAttr="",t.standardValueList=[],t.valueData=[],t.addStandardAttrShow=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addStandardAttrAndValue}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{"append-to-body":"",title:'"参数选择"定义属性值',visible:t.addStandardValueShow},on:{"update:visible":function(a){t.addStandardValueShow=a},closed:t.closed}},[r("el-checkbox-group",{model:{value:t.standardValueList,callback:function(a){t.standardValueList=a},expression:"standardValueList"}},t._l(t.valueData,function(t,a){return r("el-checkbox",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{label:t}})}),1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(a){t.standardValueList=[],t.addStandardValueShow=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addStandardValue}},[t._v("确 定")])],1)],1)],1)},e=[],n=r("cebc"),i=(r("ac6a"),r("7f7f"),r("7514"),r("0bba")),s=r("c40e"),d={components:{PictureLibrary:i["a"]},watch:{group_id:{handler:function(t){t&&this.getAttrs()},immediate:!0}},props:{attr:{type:[Array,String],required:!0,default:function(){return[]}}},data:function(){return{group_id:"1",ShowAdd:!1,addAttrValueShow:!1,data:[],rowIndex:"",rowIdx:"",attr_item:{attr_name:"",values:[]},attr_value:{attr_value:"",attr_img:"",min_img:""},rules:{attr_value:[{required:!0,message:"请输入规格值",trigger:"blur"}]},addStandardAttrShow:!1,standardAttrList:[],standardRadio:{},attrsData:[],hasAttrs:!1,addStandardValueShow:!1,standardRowName:"",standardValueList:[],valueData:[],attrsNames:[],standarAttr:""}},methods:{addStandardAttrAndValue:function(){if(""!=this.standarAttr)if(0!=this.standardValueList.length){var t=[];this.standardValueList.map(function(a,r){t.push({attr_value:a})}),this.attr.push({attr_name:this.standarAttr,values:t}),this.standarAttr="",this.standardValueList=[],this.valueData=[],this.addStandardAttrShow=!1}else this.$message({message:"请选择属性值",type:"warning"});else this.$message({message:"请选择属性",type:"warning"})},attrsNameChange:function(){var t=this;this.standardValueList=[];var a=this.attrsData.find(function(a){return Array.isArray(a.name)?a.name.some(function(a){return a==t.standarAttr})?a:void 0:a.name==t.standarAttr});this.valueData=a.value},getAttrs:function(){var t=this;Object(s["i"])({group_id:this.group_id}).then(function(a){a.data?(t.hasAttrs=!0,t.attrsData=a.data,t.attrsNames=t.attrsData.flatMap(function(t){return t.name})):t.hasAttrs=!1,t.$emit("changeRim",a.msg)})},handleCheckChange:function(t,a){if(console.log(this.standardRadio[a],!this.standardRadio[a]),1!=a.length)if(t){if(!this.standardRadio[a]){var r=this.standardAttrList.indexOf(a);console.log(r,"下标"),this.standardAttrList.splice(r,1)}}else this.standardRadio[a]=null},handleRadioChange:function(t,a){this.standardAttrList.some(function(t){return t==a})||this.standardAttrList.push(a)},addStandardValue:function(){var t=this;this.standardValueList.map(function(a,r){t.attr[t.rowIndex].values.push({attr_value:a})}),this.standardValueList=[],this.addStandardValueShow=!1},haveStandardValue:function(t){var a=this.attrsData.some(function(a){return Array.isArray(a.name)?a.name.some(function(a){return a==t})?a:void 0:a.name==t});return a},addStandardValueDialog:function(t,a){var r=this;this.standardRowName=a,this.rowIndex=t;var o=this.attrsData.find(function(t){return Array.isArray(t.name)?t.name.some(function(t){return t==r.standardRowName})?t:void 0:t.name==r.standardRowName});console.log(o),o?(this.valueData=o.value,this.addStandardValueShow=!0):this.$message({message:'此规格无"参数选择"定义属性值',type:"warning"})},addStandardAttr:function(){var t=this;this.standardAttrList.map(function(a,r){1!=a.length?t.standardRadio[a]&&t.attr.push({attr_name:t.standardRadio[a],values:[]}):t.attr.push({attr_name:a[0],values:[]})}),this.standardAttrList=[],this.standardRadio={},this.addStandardAttrShow=!1},showAddStandardAttr:function(){this.addStandardAttrShow=!0,this.ShowAdd=!1,console.log(this.group_id)},closed:function(){this.rowIndex="",this.rowIdx="",this.attr_value.min_img="",this.attr_value.attr_img="",this.attr_value.attr_value=""},addAttrItem:function(){this.attr_item.attr_name&&(this.attr.push(Object(n["a"])({},this.attr_item)),this.attr_item={attr_name:"",values:[]},this.ShowAdd=!1,this.updateAttr())},addAttrDialog:function(t){this.rowIndex=t,this.addAttrValueShow=!0},editAttrValue:function(t,a,r){this.attr_value=Object(n["a"])({},t),this.rowIndex=a,this.rowIdx=r,this.addAttrValueShow=!0},selectPic:function(){this.$refs.pic.open()},getPic:function(t){this.attr_value.attr_img=t.src_file,this.attr_value.min_img=t.min_file},setAttrValue:function(){var t=!1;if(this.$refs["addAttrValueData"].validate(function(a){t=a}),t){var a=this.attr_value,r=a.attr_value,o=a.attr_img;"string"==typeof this.rowIdx?this.attr[this.rowIndex].values.push({attr_value:r,attr_img:o}):this.$set(this.attr[this.rowIndex].values,this.rowIdx,{attr_value:r,attr_img:o}),this.updateAttr(),this.addAttrValueShow=!1}},delAttr:function(t){this.attr.splice(t,1),this.updateAttr()},delAttrValue:function(t,a){this.attr[t].values.splice(a,1),this.updateAttr()},updateAttr:function(){this.$emit("update:attr",this.attr)}}},u=d,l=(r("c933"),r("2877")),c=Object(l["a"])(u,o,e,!1,null,"848b9326",null);a["default"]=c.exports}}]);